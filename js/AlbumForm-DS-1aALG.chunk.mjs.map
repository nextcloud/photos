{"version":3,"file":"AlbumForm-DS-1aALG.chunk.mjs","sources":["../node_modules/@mdi/svg/svg/account-group-outline.svg","../src/components/Albums/CollaboratorsSelectionForm.vue","../src/components/Albums/AlbumForm.vue"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='mdi-account-group-outline'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,5A3.5,3.5%200%200,0%208.5,8.5A3.5,3.5%200%200,0%2012,12A3.5,3.5%200%200,0%2015.5,8.5A3.5,3.5%200%200,0%2012,5M12,7A1.5,1.5%200%200,1%2013.5,8.5A1.5,1.5%200%200,1%2012,10A1.5,1.5%200%200,1%2010.5,8.5A1.5,1.5%200%200,1%2012,7M5.5,8A2.5,2.5%200%200,0%203,10.5C3,11.44%203.53,12.25%204.29,12.68C4.65,12.88%205.06,13%205.5,13C5.94,13%206.35,12.88%206.71,12.68C7.08,12.47%207.39,12.17%207.62,11.81C6.89,10.86%206.5,9.7%206.5,8.5C6.5,8.41%206.5,8.31%206.5,8.22C6.2,8.08%205.86,8%205.5,8M18.5,8C18.14,8%2017.8,8.08%2017.5,8.22C17.5,8.31%2017.5,8.41%2017.5,8.5C17.5,9.7%2017.11,10.86%2016.38,11.81C16.5,12%2016.63,12.15%2016.78,12.3C16.94,12.45%2017.1,12.58%2017.29,12.68C17.65,12.88%2018.06,13%2018.5,13C18.94,13%2019.35,12.88%2019.71,12.68C20.47,12.25%2021,11.44%2021,10.5A2.5,2.5%200%200,0%2018.5,8M12,14C9.66,14%205,15.17%205,17.5V19H19V17.5C19,15.17%2014.34,14%2012,14M4.71,14.55C2.78,14.78%200,15.76%200,17.5V19H3V17.07C3,16.06%203.69,15.22%204.71,14.55M19.29,14.55C20.31,15.22%2021,16.06%2021,17.07V19H24V17.5C24,15.76%2021.22,14.78%2019.29,14.55M12,16C13.53,16%2015.24,16.5%2016.23,17H7.77C8.76,16.5%2010.47,16%2012,16Z'%20/%3e%3c/svg%3e\"","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"manage-collaborators\">\n\t\t<h2 class=\"manage-collaborators__title\">\n\t\t\t{{ t('photos', 'Add collaborators') }}\n\t\t</h2>\n\n\t\t<form class=\"manage-collaborators__form\" @submit.prevent>\n\t\t\t<NcSelect\n\t\t\t\tv-model=\"searchText\"\n\t\t\t\tinput-id=\"sharing-search-input\"\n\t\t\t\t:input-label=\"t('photos', 'Add people or groups who can edit your album')\"\n\t\t\t\t:loading=\"loadingCollaborators\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\t:filterable=\"false\"\n\t\t\t\t:placeholder=\"t('photos', 'Search people or groups')\"\n\t\t\t\t:clear-search-on-blur=\"() => false\"\n\t\t\t\t:user-select=\"true\"\n\t\t\t\t:append-to-body=\"false\"\n\t\t\t\t:options=\"searchResults\"\n\t\t\t\t@search=\"searchCollaborators\"\n\t\t\t\t@option:selected=\"({ key }) => selectEntity(key)\">\n\t\t\t\t{{ t('photos', 'No recommendations. Start typing.') }}\n\t\t\t</NcSelect>\n\t\t</form>\n\n\t\t<ul class=\"manage-collaborators__selection\">\n\t\t\t<li\n\t\t\t\tv-for=\"collaboratorKey of listableSelectedCollaboratorsKeys\"\n\t\t\t\t:key=\"collaboratorKey\"\n\t\t\t\tclass=\"manage-collaborators__selection__item\">\n\t\t\t\t<NcListItemIcon\n\t\t\t\t\t:id=\"availableCollaborators[collaboratorKey].id\"\n\t\t\t\t\t:display-name=\"availableCollaborators[collaboratorKey].label\"\n\t\t\t\t\t:name=\"availableCollaborators[collaboratorKey].label\"\n\t\t\t\t\t:user=\"availableCollaborators[collaboratorKey].id\"\n\t\t\t\t\t:is-no-user=\"availableCollaborators[collaboratorKey].type !== collaboratorTypes.User\">\n\t\t\t\t\t<AccountGroupOutline v-if=\"availableCollaborators[collaboratorKey].type === collaboratorTypes.Group\" :title=\"t('photos', 'Group')\" />\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t\t:aria-label=\"t('photos', 'Remove {collaboratorLabel} from the collaborators list', { collaboratorLabel: availableCollaborators[collaboratorKey].label })\"\n\t\t\t\t\t\t@click=\"unselectEntity(collaboratorKey)\">\n\t\t\t\t\t\t<Close slot=\"icon\" :size=\"20\" />\n\t\t\t\t\t</NcButton>\n\t\t\t\t</NcListItemIcon>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<div class=\"actions\">\n\t\t\t<div v-if=\"allowPublicLink\" class=\"actions__public-link\">\n\t\t\t\t<template v-if=\"isPublicLinkSelected && publicLink.id !== ''\">\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\tclass=\"manage-collaborators__public-link-button\"\n\t\t\t\t\t\t:aria-label=\"t('photos', 'Copy the public link')\"\n\t\t\t\t\t\t:title=\"publicLinkURL\"\n\t\t\t\t\t\t@click=\"copyPublicLink\">\n\t\t\t\t\t\t<template v-if=\"publicLinkCopied\">\n\t\t\t\t\t\t\t{{ t('photos', 'Public link copied!') }}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t{{ t('photos', 'Copy public link') }}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<Check v-if=\"publicLinkCopied\" />\n\t\t\t\t\t\t\t<ContentCopy v-else />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcButton>\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t\t:aria-label=\"t('photos', 'Delete the public link')\"\n\t\t\t\t\t\t@click=\"deletePublicLink\">\n\t\t\t\t\t\t<Close slot=\"icon\" />\n\t\t\t\t\t</NcButton>\n\t\t\t\t</template>\n\t\t\t\t<NcButton\n\t\t\t\t\tv-else\n\t\t\t\t\t:disabled=\"isPublicLinkSelected && publicLink.id === ''\"\n\t\t\t\t\t:aria-label=\"t('photos', 'Create public link share')\"\n\t\t\t\t\tclass=\"manage-collaborators__public-link-button\"\n\t\t\t\t\t@click=\"createPublicLinkForAlbum\">\n\t\t\t\t\t<Earth slot=\"icon\" />\n\t\t\t\t\t{{ t('photos', 'Share via public link') }}\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\n\t\t\t<div class=\"actions__slot\">\n\t\t\t\t<slot :collaborators=\"selectedCollaborators\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang='ts'>\n\nimport type { PropType } from 'vue'\nimport type { Collaborator } from '../../store/albums.js'\n\nimport AccountGroupOutlineSvg from '@mdi/svg/svg/account-group-outline.svg'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport axios from '@nextcloud/axios'\nimport { showError } from '@nextcloud/dialogs'\nimport { translate } from '@nextcloud/l10n'\nimport { generateOcsUrl, generateUrl } from '@nextcloud/router'\nimport { ShareType } from '@nextcloud/sharing'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcListItemIcon from '@nextcloud/vue/components/NcListItemIcon'\nimport NcSelect from '@nextcloud/vue/components/NcSelect'\nimport AccountGroupOutline from 'vue-material-design-icons/AccountGroupOutline.vue'\nimport Check from 'vue-material-design-icons/Check.vue'\nimport Close from 'vue-material-design-icons/Close.vue'\nimport ContentCopy from 'vue-material-design-icons/ContentCopy.vue'\nimport Earth from 'vue-material-design-icons/Earth.vue'\nimport FetchCollectionContentMixin from '../../mixins/FetchCollectionContentMixin.js'\nimport logger from '../../services/logger.js'\nimport { albumsExtraProps } from '../../store/albums.ts'\n\ntype CollaboratorSearchResult = Collaborator & {\n\tkey: string\n\tdisplayName: string // The label of the collaborator for display.\n\ticonSvg?: Element // An icon to differentiate the collaborator type.\n}\n\nexport default {\n\tname: 'CollaboratorsSelectionForm',\n\n\tcomponents: {\n\t\tClose,\n\t\tAccountGroupOutline,\n\t\tContentCopy,\n\t\tCheck,\n\t\tEarth,\n\t\tNcButton,\n\t\tNcListItemIcon,\n\t\tNcSelect,\n\t},\n\n\tmixins: [FetchCollectionContentMixin],\n\n\tprops: {\n\t\talbumName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\tcollaborators: {\n\t\t\ttype: Array as PropType<Collaborator[]>,\n\t\t\tdefault: () => [],\n\t\t},\n\n\t\tallowPublicLink: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tsearchText: null,\n\t\t\tavailableCollaborators: {} as Record<string, Collaborator>,\n\t\t\tselectedCollaboratorsKeys: [] as string[],\n\t\t\tcurrentSearchResults: [] as Collaborator[],\n\t\t\tloadingCollaborators: false,\n\t\t\trandomId: Math.random().toString().substring(2, 10),\n\t\t\tpublicLinkCopied: false,\n\t\t\tcollaboratorTypes: ShareType,\n\t\t\tconfig: {\n\t\t\t\tminSearchStringLength: parseInt(OC.config['sharing.minSearchStringLength'], 10) || 0,\n\t\t\t},\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tsearchResults(): CollaboratorSearchResult[] {\n\t\t\treturn this.currentSearchResults\n\t\t\t\t.filter(({ id }) => id !== getCurrentUser()?.uid)\n\t\t\t\t.map((collaborator) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...collaborator,\n\t\t\t\t\t\tkey: `${collaborator.type}:${collaborator.id}`,\n\t\t\t\t\t\ticonSvg: collaborator.type === ShareType.Group ? AccountGroupOutlineSvg : undefined,\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.filter(({ key }) => !this.selectedCollaboratorsKeys.includes(key))\n\t\t},\n\n\t\tlistableSelectedCollaboratorsKeys(): string[] {\n\t\t\treturn this.selectedCollaboratorsKeys\n\t\t\t\t.filter((collaboratorKey) => this.availableCollaborators[collaboratorKey].type !== ShareType.Link)\n\t\t},\n\n\t\tselectedCollaborators(): Collaborator[] {\n\t\t\treturn this.selectedCollaboratorsKeys\n\t\t\t\t.map((collaboratorKey) => this.availableCollaborators[collaboratorKey])\n\t\t},\n\n\t\tisPublicLinkSelected(): boolean {\n\t\t\treturn this.selectedCollaboratorsKeys.includes(`${ShareType.Link}`)\n\t\t},\n\n\t\tpublicLink(): Collaborator {\n\t\t\treturn this.availableCollaborators[ShareType.Link]\n\t\t},\n\n\t\tpublicLinkURL(): string {\n\t\t\treturn `${window.location.protocol}//${window.location.host}${generateUrl(`apps/photos/public/${this.publicLink.id}`)}`\n\t\t},\n\n\t\talbumFileName(): string {\n\t\t\treturn this.$store.getters.getAlbumName(this.albumName)\n\t\t},\n\t},\n\n\twatch: {\n\t\tcollaborators(collaborators) {\n\t\t\tthis.populateCollaborators(collaborators)\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.populateCollaborators(this.collaborators)\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Fetch possible collaborators.\n\t\t *\n\t\t * @param query\n\t\t */\n\t\tasync searchCollaborators(query: string) {\n\t\t\tif (query === undefined) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tquery = query.trim()\n\n\t\t\tif (query.length < this.config.minSearchStringLength) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tthis.loadingCollaborators = true\n\t\t\t\tconst response = await axios.get(generateOcsUrl('core/autocomplete/get'), {\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tsearch: query,\n\t\t\t\t\t\titemType: 'share-recipients',\n\t\t\t\t\t\tshareTypes: [\n\t\t\t\t\t\t\tShareType.User,\n\t\t\t\t\t\t\tShareType.Group,\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t\tthis.currentSearchResults = response.data.ocs.data\n\t\t\t\t\t.map((collaborator) => {\n\t\t\t\t\t\tswitch (collaborator.source) {\n\t\t\t\t\t\t\tcase 'users':\n\t\t\t\t\t\t\t\treturn { id: collaborator.id, label: collaborator.label, type: ShareType.User }\n\t\t\t\t\t\t\tcase 'groups':\n\t\t\t\t\t\t\t\treturn { id: collaborator.id, label: collaborator.label, type: ShareType.Group }\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tthrow new Error(`Invalid collaborator source ${collaborator.source}`)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\tthis.availableCollaborators = {\n\t\t\t\t\t...this.availableCollaborators,\n\t\t\t\t\t...this.currentSearchResults.reduce(this.indexCollaborators, {}),\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.errorFetchingCollaborators = error\n\t\t\t\tlogger.error(this.t('photos', 'Failed to fetch collaborators list.'), { error })\n\t\t\t\tshowError(this.t('photos', 'Failed to fetch collaborators list.'))\n\t\t\t} finally {\n\t\t\t\tthis.loadingCollaborators = false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Populate selectedCollaboratorsKeys and availableCollaborators.\n\t\t *\n\t\t * @param collaborators\n\t\t */\n\t\tpopulateCollaborators(collaborators: Collaborator[]) {\n\t\t\tconst initialCollaborators = collaborators.reduce(this.indexCollaborators, {})\n\t\t\tthis.selectedCollaboratorsKeys = Object.keys(initialCollaborators)\n\t\t\tthis.availableCollaborators = {\n\t\t\t\t3: {\n\t\t\t\t\tid: '',\n\t\t\t\t\tlabel: this.t('photos', 'Public link'),\n\t\t\t\t\ttype: ShareType.Link,\n\t\t\t\t},\n\n\t\t\t\t...this.availableCollaborators,\n\t\t\t\t...initialCollaborators,\n\t\t\t}\n\t\t},\n\n\t\tindexCollaborators(collaborators: Record<string, Collaborator>, collaborator: Collaborator) {\n\t\t\treturn { ...collaborators, [`${collaborator.type}${collaborator.type === ShareType.Link ? '' : ':'}${collaborator.type === ShareType.Link ? '' : collaborator.id}`]: collaborator }\n\t\t},\n\n\t\tasync createPublicLinkForAlbum() {\n\t\t\tthis.selectEntity(`${ShareType.Link}`)\n\t\t\tawait this.updateAlbumCollaborators()\n\t\t\tawait this.fetchCollection(\n\t\t\t\tthis.albumFileName,\n\t\t\t\talbumsExtraProps,\n\t\t\t)\n\t\t},\n\n\t\tasync deletePublicLink() {\n\t\t\tthis.unselectEntity(`${ShareType.Link}`)\n\t\t\tthis.availableCollaborators[3] = {\n\t\t\t\tid: '',\n\t\t\t\tlabel: this.t('photos', 'Public link'),\n\t\t\t\ttype: ShareType.Link,\n\t\t\t}\n\t\t\tthis.publicLinkCopied = false\n\t\t\tawait this.updateAlbumCollaborators()\n\t\t},\n\n\t\tasync updateAlbumCollaborators() {\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('updateCollection', {\n\t\t\t\t\tcollectionFileName: this.albumFileName,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tcollaborators: this.selectedCollaborators,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('[PublicAlbumContent] Error updating album', { error })\n\t\t\t\tshowError(this.t('photos', 'Failed to update album.'))\n\t\t\t}\n\t\t},\n\n\t\tasync copyPublicLink() {\n\t\t\tawait navigator.clipboard.writeText(this.publicLinkURL)\n\t\t\tthis.publicLinkCopied = true\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.publicLinkCopied = false\n\t\t\t}, 10000)\n\t\t},\n\n\t\tselectEntity(collaboratorKey) {\n\t\t\tthis.searchText = null\n\n\t\t\tif (this.selectedCollaboratorsKeys.includes(collaboratorKey)) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.selectedCollaboratorsKeys.push(collaboratorKey)\n\t\t},\n\n\t\tunselectEntity(collaboratorKey) {\n\t\t\tconst index = this.selectedCollaboratorsKeys.indexOf(collaboratorKey)\n\n\t\t\tif (index === -1) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.selectedCollaboratorsKeys.splice(index, 1)\n\t\t},\n\n\t\tt: translate,\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.manage-collaborators {\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 20px;\n\theight: 500px;\n\n\t&__title {\n\t\tfont-weight: bold;\n\t}\n\n\t&__subtitle {\n\t\tcolor: var(--color-text-lighter);\n\t}\n\n\t&__public-link-button {\n\t\tmargin: 4px 0;\n\t}\n\n\t&__form {\n\t\tmargin-top: 4px 0;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&__input {\n\t\t\tposition: relative;\n\t\t\tdisplay: block;\n\n\t\t\tinput {\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding-inline-start: 34px;\n\t\t\t}\n\n\t\t\t.loading-icon {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: calc(36px / 2 - 20px / 2);\n\t\t\t\tinset-inline-end: 8px;\n\t\t\t}\n\t\t}\n\n\t\t&__list {\n\t\t\tpadding: 8px;\n\t\t\theight: 350px;\n\t\t\toverflow: scroll;\n\n\t\t\t&__result {\n\t\t\t\tpadding: 8px;\n\t\t\t\tborder-radius: 100px;\n\t\t\t\tbox-sizing: border-box;\n\n\t\t\t\t&, & * {\n\t\t\t\t\tcursor: pointer !important;\n\t\t\t\t}\n\n\t\t\t\t&:hover {\n\t\t\t\t\tbackground: var(--color-background-dark);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t&--empty {\n\t\t\t\tmargin: 100px 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t&__selection {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-top: 32px;\n\t\tflex-grow: 1;\n\n\t\t&__item {\n\t\t\tborder-radius: var(--border-radius-pill);\n\t\t\tpadding:  0 8px;\n\n\t\t\t&:hover {\n\t\t\t\tbackground: var(--color-background-dark);\n\t\t\t}\n\n\t\t\t:deep(.option) {\n\t\t\t\tgap: 4px;\n\t\t\t}\n\t\t}\n\t}\n\n\t.actions {\n\t\tdisplay: flex;\n\t\tmargin-top: 8px;\n\n\t\t&__public-link {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\n\t\t\tbutton {\n\t\t\t\tmargin-inline-start: 8px;\n\t\t\t}\n\t\t}\n\n\t\t&__slot {\n\t\t\tflex-grow: 1;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: flex-end;\n\t\t\talign-items: center;\n\t\t}\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<form v-if=\"!showCollaboratorView\" class=\"album-form\" @submit.prevent=\"submit()\">\n\t\t<div class=\"form-inputs\">\n\t\t\t<NcTextField\n\t\t\t\tref=\"nameInput\"\n\t\t\t\t:value.sync=\"albumName\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"name\"\n\t\t\t\t:helper-text=\"albumNameValidationError\"\n\t\t\t\t:error=\"albumNameValidationError !== undefined\"\n\t\t\t\t:required=\"true\"\n\t\t\t\t:label=\"t('photos', 'Name of the album')\" />\n\t\t\t<NcTextField\n\t\t\t\t:value.sync=\"albumLocation\"\n\t\t\t\tname=\"location\"\n\t\t\t\ttype=\"text\"\n\t\t\t\t:label=\"t('photos', 'Location of the album')\">\n\t\t\t\t<template #default>\n\t\t\t\t\t<MapMarkerOutline :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcTextField>\n\t\t</div>\n\n\t\t<PhotosFiltersInput\n\t\t\t:selected-filters=\"albumFilters\"\n\t\t\t@select-filter=\"selectFilter\" />\n\t\t<PhotosFiltersDisplay\n\t\t\t:selected-filters=\"albumFilters\"\n\t\t\t@deselect-filter=\"deselectFilter\" />\n\n\t\t<div class=\"form-buttons\">\n\t\t\t<span class=\"left-buttons\">\n\t\t\t\t<NcButton\n\t\t\t\t\tv-if=\"displayBackButton\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t@click=\"back\">\n\t\t\t\t\t{{ t('photos', 'Back') }}\n\t\t\t\t</NcButton>\n\t\t\t</span>\n\t\t\t<span class=\"right-buttons\">\n\t\t\t\t<NcButton\n\t\t\t\t\tv-if=\"sharingEnabled && !editMode\"\n\t\t\t\t\ttype=\"secondary\"\n\t\t\t\t\t:disabled=\"!canSubmit\"\n\t\t\t\t\t@click=\"showCollaboratorView = true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<AccountMultiplePlusOutline :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('photos', 'Add collaborators') }}\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t:disabled=\"!canSubmit\"\n\t\t\t\t\t@click=\"submit()\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcLoadingIcon v-if=\"loading\" :size=\"20\" />\n\t\t\t\t\t\t<SendOutline v-else :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ editMode ? t('photos', 'Save') : t('photos', 'Create album') }}\n\t\t\t\t</NcButton>\n\t\t\t</span>\n\t\t</div>\n\t</form>\n\t<CollaboratorsSelectionForm\n\t\tv-else\n\t\t:album-name=\"albumName\"\n\t\t:allow-public-link=\"false\">\n\t\t<template #default=\"{ collaborators }\">\n\t\t\t<span class=\"left-buttons\">\n\t\t\t\t<NcButton\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t@click=\"showCollaboratorView = false\">\n\t\t\t\t\t{{ t('photos', 'Back') }}\n\t\t\t\t</NcButton>\n\t\t\t</span>\n\t\t\t<span class=\"right-buttons\">\n\t\t\t\t<NcButton\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t:disabled=\"albumName.trim() === '' || loading\"\n\t\t\t\t\t@click=\"submit(collaborators)\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcLoadingIcon v-if=\"loading\" :size=\"20\" />\n\t\t\t\t\t\t<SendOutline v-else :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ editMode ? t('photos', 'Save') : t('photos', 'Create album') }}\n\t\t\t\t</NcButton>\n\t\t\t</span>\n\t\t</template>\n\t</CollaboratorsSelectionForm>\n</template>\n\n<script lang='ts'>\nimport type { PropType } from 'vue'\nimport type { FilterOption } from '../../services/PhotosFilters/PhotosFilter.ts'\nimport type { Album, AlbumEditableProperties, Collaborator } from '../../store/albums.ts'\n\nimport { InvalidFilenameError, InvalidFilenameErrorReason, validateFilename } from '@nextcloud/files'\nimport { resultToNode } from '@nextcloud/files/dav'\nimport { t } from '@nextcloud/l10n'\nimport moment from '@nextcloud/moment'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcLoadingIcon from '@nextcloud/vue/components/NcLoadingIcon'\nimport NcTextField from '@nextcloud/vue/components/NcTextField'\nimport AccountMultiplePlusOutline from 'vue-material-design-icons/AccountMultiplePlusOutline.vue'\nimport MapMarkerOutline from 'vue-material-design-icons/MapMarkerOutline.vue'\nimport SendOutline from 'vue-material-design-icons/SendOutline.vue'\nimport PhotosFiltersDisplay from '../PhotosFilters/PhotosFiltersDisplay.vue'\nimport PhotosFiltersInput from '../PhotosFilters/PhotosFiltersInput.vue'\nimport CollaboratorsSelectionForm from './CollaboratorsSelectionForm.vue'\nimport filters from '../../services/PhotosFilters/index.ts'\nimport { albumsPrefix } from '../../store/albums.ts'\n\nexport default {\n\tname: 'AlbumForm',\n\n\tcomponents: {\n\t\tMapMarkerOutline,\n\t\tAccountMultiplePlusOutline,\n\t\tSendOutline,\n\t\tNcButton,\n\t\tNcLoadingIcon,\n\t\tNcTextField,\n\t\tCollaboratorsSelectionForm,\n\t\tPhotosFiltersInput,\n\t\tPhotosFiltersDisplay,\n\t},\n\n\tprops: {\n\t\talbum: {\n\t\t\ttype: Object as PropType<Album | null>,\n\t\t\tdefault: null,\n\t\t},\n\n\t\tfiltersValue: {\n\t\t\ttype: Object as PropType<Record<string, unknown[]>>,\n\t\t\tdefault: () => ({}),\n\t\t},\n\n\t\tdisplayBackButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tshowCollaboratorView: false,\n\t\t\talbumName: '',\n\t\t\talbumLocation: '',\n\t\t\talbumFilters: filters.reduce((acc, filter) => ({ ...acc, [filter.id]: [] }), {}),\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\teditMode(): boolean {\n\t\t\treturn this.album !== null\n\t\t},\n\n\t\tsharingEnabled(): boolean {\n\t\t\treturn OC.Share !== undefined\n\t\t},\n\n\t\talbumFileName(): string {\n\t\t\treturn this.$store.getters.getAlbumName(this.albumName)\n\t\t},\n\n\t\talbumNameValidationError(): string | undefined {\n\t\t\t// If loading is true, it means that the album is being created\n\t\t\t// so this condition will eventually become true\n\t\t\t// but we don't want to show the error message while loading\n\t\t\tconst existingAlbum = this.$store.getters.albums[this.albumFileName]\n\t\t\tif (existingAlbum !== undefined && this.album !== existingAlbum && !this.loading) {\n\t\t\t\treturn t('files', 'This name is already in use.')\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvalidateFilename(this.albumName)\n\t\t\t} catch (error) {\n\t\t\t\tif (!(error instanceof InvalidFilenameError)) {\n\t\t\t\t\tthrow error\n\t\t\t\t}\n\n\t\t\t\tswitch (error.reason) {\n\t\t\t\t\tcase InvalidFilenameErrorReason.Character:\n\t\t\t\t\t\treturn t('files', '\"{char}\" is not allowed inside a filename.', { char: error.segment })\n\t\t\t\t\tcase InvalidFilenameErrorReason.ReservedName:\n\t\t\t\t\t\treturn undefined // We don't need to enforce that for albums.\n\t\t\t\t\tcase InvalidFilenameErrorReason.Extension:\n\t\t\t\t\t\treturn undefined // We don't need to enforce that for albums.\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn t('files', 'Invalid filename.')\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn undefined\n\t\t},\n\n\t\tcanSubmit() {\n\t\t\treturn this.albumName !== '' && this.albumNameValidationError === undefined && !this.loading\n\t\t},\n\t},\n\n\tmounted() {\n\t\tif (this.editMode) {\n\t\t\tthis.albumName = this.album?.basename as string\n\t\t\tthis.albumLocation = this.album?.attributes.location ?? ''\n\t\t\tthis.albumFilters = {\n\t\t\t\t...this.albumFilters,\n\t\t\t\t...structuredClone(this.album?.attributes.filters ?? {}),\n\t\t\t}\n\t\t} else {\n\t\t\tthis.albumFilters = {\n\t\t\t\t...this.albumFilters,\n\t\t\t\t...structuredClone(this.filtersValue),\n\t\t\t}\n\t\t}\n\n\t\tthis.$nextTick(() => {\n\t\t\t(this.$refs!.nameInput! as NcTextField).$el.getElementsByTagName('input')[0].focus()\n\t\t})\n\t},\n\n\tmethods: {\n\t\tsubmit(collaborators: Collaborator[] = []) {\n\t\t\tif (!this.canSubmit) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (this.editMode) {\n\t\t\t\tthis.handleUpdateAlbum()\n\t\t\t} else {\n\t\t\t\tthis.handleCreateAlbum(collaborators)\n\t\t\t}\n\t\t},\n\n\t\tasync handleCreateAlbum(collaborators: Collaborator[] = []) {\n\t\t\ttry {\n\t\t\t\tthis.loading = true\n\n\t\t\t\tconst localAlbum = resultToNode({\n\t\t\t\t\tbasename: this.albumName,\n\t\t\t\t\tfilename: albumsPrefix + '/' + this.albumName,\n\t\t\t\t\tlastmod: '',\n\t\t\t\t\tsize: 0,\n\t\t\t\t\ttype: 'directory',\n\t\t\t\t\tetag: null,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tdisplayname: this.albumName,\n\t\t\t\t\t\tresourcetype: {},\n\t\t\t\t\t\tnbItems: 0,\n\t\t\t\t\t\tlocation: this.albumLocation,\n\t\t\t\t\t\t'last-photo': -1,\n\t\t\t\t\t\tdate: moment().format('MMMM YYYY'),\n\t\t\t\t\t\tcollaborators,\n\t\t\t\t\t\tfilters: this.filtersValue,\n\t\t\t\t\t\tsource: generateRemoteUrl(`dav/${this.albumFileName}`),\n\t\t\t\t\t},\n\t\t\t\t}, albumsPrefix)\n\n\t\t\t\tlet album = await this.$store.dispatch('createCollection', { collection: localAlbum })\n\n\t\t\t\tif (album === undefined) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst propertiesToUpdate: Partial<AlbumEditableProperties> = {}\n\n\t\t\t\tif (this.albumLocation !== '') {\n\t\t\t\t\tpropertiesToUpdate.location = this.albumLocation\n\t\t\t\t}\n\n\t\t\t\tif (this.albumLocation !== '' || collaborators.length !== 0) {\n\t\t\t\t\tpropertiesToUpdate.collaborators = collaborators\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(this.filtersValue).length > 0) {\n\t\t\t\t\tpropertiesToUpdate.filters = this.filtersValue\n\t\t\t\t}\n\n\t\t\t\talbum = await this.$store.dispatch('updateCollection', {\n\t\t\t\t\tcollectionFileName: this.albumFileName,\n\t\t\t\t\tproperties: propertiesToUpdate,\n\t\t\t\t})\n\n\t\t\t\tthis.$emit('done', { album })\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\tasync handleUpdateAlbum() {\n\t\t\ttry {\n\t\t\t\tthis.loading = true\n\n\t\t\t\tlet album = this.album?.clone() as Album\n\t\t\t\tconst changes: string[] = []\n\n\t\t\t\tif (this.album !== null && this.album.basename !== this.albumName) {\n\t\t\t\t\tchanges.push('name')\n\t\t\t\t\talbum = await this.$store.dispatch('renameCollection', { collectionFileName: this.album.root + this.album.path, newBaseName: this.albumName }) as Album\n\t\t\t\t}\n\n\t\t\t\tif (this.album !== null && this.album.attributes.location !== this.albumLocation) {\n\t\t\t\t\tchanges.push('location')\n\t\t\t\t\talbum = await this.$store.dispatch('updateCollection', { collectionFileName: album.root + album.path, properties: { location: this.albumLocation } }) as Album\n\t\t\t\t}\n\n\t\t\t\tif (this.album !== null && JSON.stringify(this.album.attributes.filters) !== JSON.stringify(this.albumFilters)) {\n\t\t\t\t\tchanges.push('filters')\n\t\t\t\t\talbum = await this.$store.dispatch('updateCollection', { collectionFileName: album.root + album.path, properties: { filters: this.albumFilters } }) as Album\n\t\t\t\t}\n\n\t\t\t\tthis.$emit('done', { album, changes })\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\tselectFilter(filterOption: FilterOption<unknown>) {\n\t\t\tthis.albumFilters[filterOption.filterId].push(filterOption.value)\n\t\t},\n\n\t\tdeselectFilter(filterOption: { filterId: string, value: unknown }) {\n\t\t\tconst index = this.albumFilters[filterOption.filterId].indexOf(filterOption.value)\n\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.albumFilters[filterOption.filterId].splice(index, 1)\n\t\t\t}\n\t\t},\n\n\t\tback() {\n\t\t\tthis.$emit('back')\n\t\t},\n\n\t\tt,\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.album-form {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\theight: 350px;\n\tpadding: calc(var(--default-grid-baseline) * 4);\n\n\t.form-title {\n\t\tfont-weight: bold;\n\t}\n\n\t.form-subtitle {\n\t\tcolor: var(--color-text-lighter);\n\t}\n\n\t.form-inputs {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: calc(var(--default-grid-baseline) * 4);\n\t}\n\n\t.form-buttons {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\tflex-direction: column;\n\n\t\t.left-buttons, .right-buttons {\n\t\t\tdisplay: flex;\n\t\t\tgap: calc(var(--default-grid-baseline) * 4);\n\t\t}\n\n\t\t.right-buttons {\n\t\t\tjustify-content: flex-end;\n\t\t}\n\t}\n}\n\n.left-buttons {\n\tflex-grow: 1;\n}\n\n@media only screen and (max-width: 1020px) {\n\t.right-buttons {\n\t\tjustify-content: flex-end;\n\t\tflex-direction: column;\n\t}\n}\n</style>\n"],"names":["generateUrl","axios","generateOcsUrl","t","generateRemoteUrl"],"mappings":"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","x_google_ignoreList":[0]}
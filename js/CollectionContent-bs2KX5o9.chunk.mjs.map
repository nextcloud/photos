{"version":3,"file":"CollectionContent-bs2KX5o9.chunk.mjs","sources":["../src/components/Collection/CollectionContent.vue"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<!-- Errors handlers-->\n\t<NcEmptyContent v-if=\"(collection === undefined && !loading) || error === 404\"\n\t\tclass=\"empty-content-with-illustration\"\n\t\t:name=\"t('photos', 'This collection does not exist')\">\n\t\t<FolderMultipleImage slot=\"icon\" />\n\t</NcEmptyContent>\n\t<NcEmptyContent v-else-if=\"error\" :name=\"t('photos', 'An error occurred')\">\n\t\t<AlertCircle slot=\"icon\" />\n\t</NcEmptyContent>\n\n\t<div v-else class=\"collection\">\n\t\t<!-- Header -->\n\t\t<slot class=\"collection__header\"\n\t\t\tname=\"header\"\n\t\t\t:selected-file-ids=\"selectedFileIds\"\n\t\t\t:reset-selection=\"resetSelection\" />\n\n\t\t<!-- No content -->\n\t\t<slot v-if=\"sortedCollectionFileIds.length === 0 && !loading\" name=\"empty-content\" />\n\n\t\t<!-- Media list -->\n\t\t<FilesListViewer v-if=\"collection !== undefined && sortedCollectionFileIds.length > 0 \"\n\t\t\t:container-element=\"appContent\"\n\t\t\tclass=\"collection__media\"\n\t\t\t:file-ids=\"sortedCollectionFileIds\"\n\t\t\t:base-height=\"isMobile ? 120 : 200\"\n\t\t\t:loading=\"loading\">\n\t\t\t<File slot-scope=\"{file, distance}\"\n\t\t\t\t:file=\"files[file.id]\"\n\t\t\t\t:allow-selection=\"allowSelection\"\n\t\t\t\t:selected=\"selection[file.id] === true\"\n\t\t\t\t:distance=\"distance\"\n\t\t\t\t@click=\"openViewer\"\n\t\t\t\t@select-toggled=\"onFileSelectToggle\" />\n\t\t</FilesListViewer>\n\t</div>\n</template>\n\n<script lang='ts'>\nimport type { PropType } from 'vue'\n\nimport AlertCircle from 'vue-material-design-icons/AlertCircle.vue'\nimport FolderMultipleImage from 'vue-material-design-icons/FolderMultipleImage.vue'\n\nimport { NcEmptyContent, isMobile } from '@nextcloud/vue'\nimport { translate } from '@nextcloud/l10n'\n\nimport FilesSelectionMixin from '../../mixins/FilesSelectionMixin.js'\nimport FilesListViewer from '.././FilesListViewer.vue'\nimport File from '.././File.vue'\nimport type { Collection } from '../../services/collectionFetcher.js'\nimport type { PhotoNode } from '../../utils/fileUtils.js'\n\nexport default {\n\tname: 'CollectionContent',\n\n\tcomponents: {\n\t\tAlertCircle,\n\t\tFolderMultipleImage,\n\t\tNcEmptyContent,\n\t\tFilesListViewer,\n\t\tFile,\n\t},\n\n\tmixins: [\n\t\tFilesSelectionMixin,\n\t\tisMobile,\n\t],\n\n\tprops: {\n\t\tcollection: {\n\t\t\ttype: Object as PropType<Collection>,\n\t\t\tdefault: () => undefined,\n\t\t},\n\n\t\tcollectionFileIds: {\n\t\t\ttype: Array as PropType<string[]>,\n\t\t\trequired: true,\n\t\t},\n\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\n\t\tallowSelection: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\n\t\terror: {\n\t\t\ttype: [Error, Number],\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tappContent: document.getElementById('app-content-vue'),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tfiles(): Record<string, PhotoNode> {\n\t\t\treturn this.$store.getters.files\n\t\t},\n\n\t\tsortedCollectionFileIds() {\n\t\t\treturn this.collectionFileIds.toSorted((fileId1, fileId2) => this.files[fileId1].timestamp < this.files[fileId2].timestamp ? -1 : 1)\n\t\t},\n\t},\n\n\tmethods: {\n\t\topenViewer(fileId) {\n\t\t\tconst file = this.files[fileId]\n\t\t\tOCA.Viewer.open({\n\t\t\t\tfileInfo: file,\n\t\t\t\tlist: this.sortedCollectionFileIds.map(fileId => this.files[fileId]).filter(file => !file.sectionHeader),\n\t\t\t\tloadMore: file.loadMore ? async () => await file.loadMore(true) : () => [],\n\t\t\t\tcanLoop: file.canLoop,\n\t\t\t})\n\t\t},\n\n\t\tt: translate,\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.collection {\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t&__media {\n\t\tpadding: 0 64px;\n\n\t\t@media only screen and (max-width: 1200px) {\n\t\t\tpadding: 0 4px;\n\t\t}\n\t}\n}\n</style>\n"],"names":["_sfc_main","AlertCircle","FolderMultipleImage","NcEmptyContent","FilesListViewer","File","FilesSelectionMixin","isMobile","fileId1","fileId2","fileId","file","translate"],"mappings":"4WA0DA,MAAAA,EAAA,CACA,KAAA,oBAEA,WAAA,CACA,YAAAC,EACA,oBAAAC,EACA,eAAAC,EACA,gBAAAC,EACA,KAAAC,CACA,EAEA,OAAA,CACAC,EACAC,CACA,EAEA,MAAA,CACA,WAAA,CACA,KAAA,OACA,QAAA,IAAA,CAAA,CACA,EAEA,kBAAA,CACA,KAAA,MACA,SAAA,EACA,EAEA,QAAA,CACA,KAAA,QACA,QAAA,EACA,EAEA,eAAA,CACA,KAAA,QACA,QAAA,EACA,EAEA,MAAA,CACA,KAAA,CAAA,MAAA,MAAA,EACA,QAAA,IAAA,CAEA,EAEA,MAAA,CACA,MAAA,CACA,WAAA,SAAA,eAAA,iBAAA,CACA,CACA,EAEA,SAAA,CACA,OAAA,CACA,OAAA,KAAA,OAAA,QAAA,KACA,EAEA,yBAAA,CACA,OAAA,KAAA,kBAAA,SAAA,CAAAC,EAAAC,IAAA,KAAA,MAAAD,CAAA,EAAA,UAAA,KAAA,MAAAC,CAAA,EAAA,UAAA,GAAA,CAAA,CAAA,CAEA,EAEA,QAAA,CACA,WAAAC,EAAA,CACA,MAAAC,EAAA,KAAA,MAAAD,CAAA,EACA,IAAA,OAAA,KAAA,CACA,SAAAC,EACA,KAAA,KAAA,wBAAA,IAAAD,GAAA,KAAA,MAAAA,CAAA,CAAA,EAAA,OAAAC,GAAA,CAAAA,EAAA,aAAA,EACA,SAAAA,EAAA,SAAA,SAAA,MAAAA,EAAA,SAAA,EAAA,EAAA,IAAA,CAAA,EACA,QAAAA,EAAA,OAAA,CACA,CACA,EAEA,EAAAC,CAAA,CAEA"}
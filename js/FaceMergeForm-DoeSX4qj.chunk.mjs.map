{"version":3,"file":"FaceMergeForm-DoeSX4qj.chunk.mjs","sources":["../src/components/Faces/FaceMergeForm.vue"],"sourcesContent":["<!--\n - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"merge-form face-list\">\n\t\t<FaceCover\n\t\t\tv-for=\"face in filteredFaces\"\n\t\t\t:key=\"face.basename\"\n\t\t\t:base-name=\"face.basename\"\n\t\t\tsmall\n\t\t\t@click=\"handleSelect(face.basename)\" />\n\t</div>\n</template>\n\n<script lang='ts'>\nimport FaceCover from './FaceCover.vue'\nimport FaceCoverMixin from '../../mixins/FaceCoverMixin.js'\nimport FetchFacesMixin from '../../mixins/FetchFacesMixin.js'\n\nexport default {\n\tname: 'FaceMergeForm',\n\tcomponents: { FaceCover },\n\tmixins: [\n\t\tFaceCoverMixin,\n\t\tFetchFacesMixin,\n\t],\n\n\tprops: {\n\t\tfirstFace: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tfiles() {\n\t\t\treturn this.$store.state.files.files\n\t\t},\n\n\t\tfaces() {\n\t\t\treturn this.$store.state.faces.faces\n\t\t},\n\n\t\tfacesFiles() {\n\t\t\treturn this.$store.getters.facesFiles\n\t\t},\n\n\t\tfilteredFaces() {\n\t\t\treturn Object.values(this.faces)\n\t\t\t\t.filter((face) => face.basename !== this.firstFace)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tif (a.attributes.nbItems && b.attributes.nbItems) {\n\t\t\t\t\t\treturn b.attributes.nbItems - a.attributes.nbItems\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.facesFiles[b.basename] || !this.facesFiles[a.basename]) {\n\t\t\t\t\t\treturn 0\n\t\t\t\t\t}\n\t\t\t\t\treturn this.facesFiles[b.basename].length - this.facesFiles[a.basename].length\n\t\t\t\t})\n\t\t},\n\t},\n\n\tmethods: {\n\t\thandleSelect(faceName) {\n\t\t\tthis.$emit('select', faceName)\n\t\t\tthis.loading = true\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.face-list {\n\tdisplay: flex;\n\tflex-direction: row;\n\theight: 350px;\n\tflex-wrap: wrap;\n\tpadding: 12px;\n}\n\n.loader {\n\tmargin: 25% auto;\n}\n</style>\n"],"names":[],"mappings":";;;;AAoBA,MAAA,YAAA;AAAA,EACA,MAAA;AAAA,EACA,YAAA,EAAA,UAAA;AAAA,EACA,QAAA;AAAA,IACA;AAAA,IACA;AAAA,EACA;AAAA,EAEA,OAAA;AAAA,IACA,WAAA;AAAA,MACA,MAAA;AAAA,MACA,UAAA;AAAA,IAAA;AAAA,EAEA;AAAA,EAEA,OAAA;AACA,WAAA;AAAA,MACA,SAAA;AAAA,IACA;AAAA,EACA;AAAA,EAEA,UAAA;AAAA,IACA,QAAA;AACA,aAAA,KAAA,OAAA,MAAA,MAAA;AAAA,IACA;AAAA,IAEA,QAAA;AACA,aAAA,KAAA,OAAA,MAAA,MAAA;AAAA,IACA;AAAA,IAEA,aAAA;AACA,aAAA,KAAA,OAAA,QAAA;AAAA,IACA;AAAA,IAEA,gBAAA;AACA,aAAA,OAAA,OAAA,KAAA,KAAA,EACA,OAAA,CAAA,SAAA,KAAA,aAAA,KAAA,SAAA,EACA,KAAA,CAAA,GAAA,MAAA;AACA,YAAA,EAAA,WAAA,WAAA,EAAA,WAAA,SAAA;AACA,iBAAA,EAAA,WAAA,UAAA,EAAA,WAAA;AAAA,QAAA;AAEA,YAAA,CAAA,KAAA,WAAA,EAAA,QAAA,KAAA,CAAA,KAAA,WAAA,EAAA,QAAA,GAAA;AACA,iBAAA;AAAA,QAAA;AAEA,eAAA,KAAA,WAAA,EAAA,QAAA,EAAA,SAAA,KAAA,WAAA,EAAA,QAAA,EAAA;AAAA,MAAA,CACA;AAAA,IAAA;AAAA,EAEA;AAAA,EAEA,SAAA;AAAA,IACA,aAAA,UAAA;AACA,WAAA,MAAA,UAAA,QAAA;AACA,WAAA,UAAA;AAAA,IAAA;AAAA,EACA;AAEA;;;;;;;;;;;;;;;;;;;;;"}
var Oe=Object.defineProperty,Re=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var me=(e,i,t)=>i in e?Oe(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,x=(e,i)=>{for(var t in i||(i={}))Te.call(i,t)&&me(e,t,i[t]);if(fe)for(var t of fe(i))We.call(i,t)&&me(e,t,i[t]);return e},T=(e,i)=>Re(e,Ee(i));import{V as W,u as Ze,s as je,E as Ue,d as z,g,e as h,G as X,H as ke,f as Se,z as E,I as Ge,J as qe,k as Y,K as Ke,b as Q,p as Je,F as D,L as Xe,o as Ye,M as Ne,N as Qe,r as ee,O as Le,P as he,w as et}from"./vue.runtime.esm-OiydnxB-.chunk.mjs";import{n as G,h as te,x as ie,X as k,Y as y,s as re,O as Fe,C as xe}from"./index-ycziVi-9.chunk.mjs";import{v as tt,I as it,a as K,s as rt,f as nt}from"./index-Dt0wq4bO.chunk.mjs";import{N as Be}from"./NcCheckboxRadioSwitch-Di43R9CE-DU845puP.chunk.mjs";import{e as at}from"./filters-Bm6FUGKw.chunk.mjs";import{N as st}from"./NcDateTime-enXYuwj8-BbRwmIXM.chunk.mjs";import{P as ot,p as j}from"./index-COmVzmHC.chunk.mjs";import{N as lt}from"./NcBreadcrumbs-DahxPGJY-AqyqpRJh.chunk.mjs";import{c as ct}from"./createElementId-DhjFt1I9-D5Zp4M-4.chunk.mjs";import{d as ut}from"./index-gUDvIMxF.chunk.mjs";import{N as dt}from"./NcActionButton-1gSJfFUC-DtAb5qOU.chunk.mjs";import{a as pt,b as ft}from"./NcAvatar-OCD_HmOb-BPLtBYgo.chunk.mjs";import{N as mt}from"./NcSelect-BD9fhCVy-vmNiMZzD.chunk.mjs";import{N as ht}from"./NcTextField-DLlQozKA-Cjumguf1.chunk.mjs";import{N as vt}from"./NcDialog-Bu9xyU24-In8X1aeg.chunk.mjs";import{N as gt}from"./NcEmptyContent-RnRTX9Z0.chunk.mjs";import"./useModelMigration-EhAWvqDD-CCVvXBPb.chunk.mjs";import"./preload-helper-CPULxMJS.chunk.mjs";import"./dialog-CiY8TRVl.chunk.mjs";import"./icons-UgBTm9C1.chunk.mjs";import"./PhotosFiltersInput-BXJdN7DC.chunk.mjs";import"./NcDateTimePicker-BP2THb4s.chunk.mjs";import"./useFormatDateTime-DCSIXuCx.chunk.mjs";import"./video-BDfR9rZh.chunk.mjs";import"./collectionFetcher-DAjdzmEV.chunk.mjs";import"./index-DuF3OKwX.chunk.mjs";const _t={name:"ChevronRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var yt=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon chevron-right-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},bt=[],wt=G(_t,yt,bt,!1,null,null);const Ct=wt.exports,kt={name:"NcBreadcrumb",components:{NcActions:ie,ChevronRight:Ct,NcButton:te},inheritAttrs:!1,props:{name:{type:String,required:!0},title:{type:String,default:null},to:{type:[String,Object],default:void 0},exact:{type:Boolean,default:!1},href:{type:String,default:void 0},icon:{type:String,default:""},forceIconText:{type:Boolean,default:!1},disableDrop:{type:Boolean,default:!1},forceMenu:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["update:open","dropped"],setup(){const e=ct();return{actionsContainer:'.vue-crumb[data-crumb-id="'.concat(e,'"]'),crumbId:e}},data(){return{hovering:!1}},computed:{linkAttributes(){return this.to?x({to:this.to,exact:this.exact},this.$attrs):this.href?x({href:this.href},this.$attrs):this.$attrs}},methods:{onOpenChange(e){this.$emit("update:open",e)},dropped(e){return this.disableDrop||(this.$emit("dropped",e,this.to||this.href),this.$parent.$emit("dropped",e,this.to||this.href),this.hovering=!1),!1},dragEnter(){this.disableDrop||(this.hovering=!0)},dragLeave(e){this.disableDrop||e.target.contains(e.relatedTarget)||this.$refs.crumb.contains(e.relatedTarget)||(this.hovering=!1)}}};var St=function(){var e=this,i=e._self._c;return i("li",{ref:"crumb",staticClass:"vue-crumb",class:{"vue-crumb--hovered":e.hovering},attrs:{"data-crumb-id":e.crumbId,draggable:"false"},on:{dragstart:function(t){return t.preventDefault(),(()=>{}).apply(null,arguments)},drop:function(t){return t.preventDefault(),e.dropped.apply(null,arguments)},dragover:function(t){return t.preventDefault(),(()=>{}).apply(null,arguments)},dragenter:e.dragEnter,dragleave:e.dragLeave}},[(e.name||e.icon||e.$slots.icon)&&!e.$slots.default?i("NcButton",e._g(e._b({attrs:{"aria-label":e.icon?e.name:void 0,title:e.title,variant:"tertiary"},scopedSlots:e._u([e.$slots.icon||e.icon?{key:"icon",fn:function(){return[e._t("icon",function(){return[i("span",{staticClass:"icon",class:e.icon})]})]},proxy:!0}:null,!(e.$slots.icon||e.icon)||e.forceIconText?{key:"default",fn:function(){return[e._v(" "+e._s(e.name)+" ")]},proxy:!0}:null],null,!0)},"NcButton",e.linkAttributes,!1),e.$listeners)):e._e(),e.$slots.default?i("NcActions",{ref:"actions",attrs:{"force-menu":e.forceMenu,open:e.open,"menu-name":e.name,title:e.title,"force-name":!0,container:e.actionsContainer,variant:"tertiary"},on:{"update:open":e.onOpenChange},scopedSlots:e._u([{key:"icon",fn:function(){return[e._t("menu-icon")]},proxy:!0}],null,!0)},[e._t("default")],2):e._e(),i("ChevronRight",{staticClass:"vue-crumb__separator",attrs:{size:20}})],1)},Nt=[],Lt=G(kt,St,Nt,!1,null,"bc2f0c21");const Ve=Lt.exports;var q=Symbol(),O=Symbol(),ve=Symbol(),ge=Symbol(),ne=function(e){return"frag"in e},Ft={get:function(){return this[O]||this.parentElement},configurable:!0},R=function(e,i){O in e||(e[O]=i,Object.defineProperty(e,"parentNode",Ft))},xt={get:function(){var e=this.parentNode.childNodes,i=e.indexOf(this);return i>-1&&e[i+1]||null}},Z=function(e){ve in e||(e[ve]=!0,Object.defineProperty(e,"nextSibling",xt))},Bt=function(e,i){for(;e.parentNode!==i;){var t=e,r=t.parentNode;r&&(e=r)}return e},J,Ae=function(e){if(!J){var i=Object.getOwnPropertyDescriptor(Node.prototype,"childNodes");J=i.get}var t=J.apply(e),r=Array.from(t).map(function(n){return Bt(n,e)});return r.filter(function(n,a){return n!==r[a-1]})},Vt={get:function(){return this.frag||Ae(this)}},At={get:function(){return this.childNodes[0]||null}};function Pt(){return this.childNodes.length>0}var _e=function(e){ge in e||(e[ge]=!0,Object.defineProperties(e,{childNodes:Vt,firstChild:At}),e.hasChildNodes=Pt)};function It(){var e;(e=this.frag[0]).before.apply(e,arguments)}function zt(){var e=this.frag,i=e.splice(0,e.length);i.forEach(function(t){t.remove()})}var Ht=function e(i){var t;return(t=Array.prototype).concat.apply(t,i.map(function(r){return ne(r)?e(r.frag):r}))},$t=function(e,i){var t=e[q];i.before(t),R(t,e),e.frag.unshift(t)};function ye(e){if(ne(this)){var i=this.frag.indexOf(e);if(i>-1){var t=this.frag.splice(i,1),r=t[0];this.frag.length===0&&$t(this,r),e.remove()}}else{var n=Ae(this),a=n.indexOf(e);a>-1&&e.remove()}return e}function be(e,i){var t=this,r=e.frag||[e];if(ne(this)){if(e[O]===this&&e.parentElement)return e;var n=this.frag;if(i){var a=n.indexOf(i);a>-1&&(n.splice.apply(n,[a,0].concat(r)),i.before.apply(i,r))}else{var s=n[n.length-1];n.push.apply(n,r),s.after.apply(s,r)}Pe(this)}else i?this.childNodes.includes(i)&&i.before.apply(i,r):this.append.apply(this,r);r.forEach(function(c){R(c,t)});var o=r[r.length-1];return Z(o),e}function Mt(e){if(e[O]===this&&e.parentElement)return e;var i=this.frag,t=i[i.length-1];return t.after(e),R(e,this),Pe(this),i.push(e),e}var Pe=function(e){var i=e[q];e.frag[0]===i&&(e.frag.shift(),i.remove())},Dt={set:function(e){var i=this;if(this.frag[0]!==this[q]&&this.frag.slice().forEach(function(r){return i.removeChild(r)}),e){var t=document.createElement("div");t.innerHTML=e,Array.from(t.childNodes).forEach(function(r){i.appendChild(r)})}},get:function(){return""}},Ot={inserted:function(e){var i=e.parentNode,t=e.nextSibling,r=e.previousSibling,n=Array.from(e.childNodes),a=document.createComment("");n.length===0&&n.push(a),e.frag=n,e[q]=a;var s=document.createDocumentFragment();s.append.apply(s,Ht(n)),e.replaceWith(s),n.forEach(function(o){R(o,e),Z(o)}),_e(e),Object.assign(e,{remove:zt,appendChild:Mt,insertBefore:be,removeChild:ye,before:It}),Object.defineProperty(e,"innerHTML",Dt),i&&(Object.assign(i,{removeChild:ye,insertBefore:be}),R(e,i),_e(i)),t&&Z(e),r&&Z(r)},unbind:function(e){e.remove()}},Ie={name:"Fragment",directives:{frag:Ot},render:function(e){return e("div",{directives:[{name:"frag"}]},this.$slots.default)}};const Rt={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Et=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},Tt=[],Wt=G(Rt,Et,Tt,!1,null,null);const Zt=Wt.exports;function we(e,i,t){if(e!==void 0)for(let r=e.length-1;r>=0;r--){const n=e[r],a=!n.componentOptions&&n.tag&&i.indexOf(n.tag)===-1,s=!!n.componentOptions&&typeof n.componentOptions.tag=="string",o=s&&i.indexOf(n.componentOptions.tag)===-1;(a||!s||o)&&((a||o)&&W.util.warn("".concat(a?n.tag:n.componentOptions.tag," is not allowed inside the ").concat(t.$options.name," component"),t),e.splice(r,1))}}const C="vue-crumb",jt={name:"NcBreadcrumbs",components:{NcActions:ie,NcActionButton:dt,NcActionRouter:ft,NcActionLink:pt,NcBreadcrumb:Ve,IconFolder:Zt},props:{rootIcon:{type:String,default:"icon-home"},ariaLabel:{type:String,default:null}},emits:["dropped"],data(){return{hiddenIndices:[],menuBreadcrumbProps:{name:"",forceMenu:!0,disableDrop:!0,open:!1},breadcrumbsRefs:{}}},beforeMount(){we(this.$slots.default,["NcBreadcrumb"],this)},beforeUpdate(){we(this.$slots.default,["NcBreadcrumb"],this)},created(){window.addEventListener("resize",ut(()=>{this.handleWindowResize()},100)),je("navigation-toggled",this.delayedResize)},mounted(){this.handleWindowResize()},updated(){this.delayedResize(),this.$nextTick(()=>{this.hideCrumbs()})},beforeDestroy(){window.removeEventListener("resize",this.handleWindowResize),Ze("navigation-toggled",this.delayedResize)},methods:{closeActions(e){this.$refs.actionsBreadcrumb.$el.contains(e.relatedTarget)||(this.menuBreadcrumbProps.open=!1)},async delayedResize(){await this.$nextTick(),this.handleWindowResize()},handleWindowResize(){var c;if(!this.$refs.container)return;const e=Object.values(this.breadcrumbsRefs),i=e.length,t=[],r=this.$refs.container.offsetWidth;let n=this.getTotalWidth(e);this.$refs.breadcrumb__actions&&(n+=this.$refs.breadcrumb__actions.offsetWidth);let a=n-r;a+=a>0?64:0;let s=0;const o=Math.floor(i/2);for(;a>0&&s<i-2;){const l=o+(s%2?s+1:s)/2*Math.pow(-1,s+i%2);a-=this.getWidth((c=e[l])==null?void 0:c.elm,l===e.length-1),t.push(l),s++}this.arraysEqual(this.hiddenIndices,t.sort((l,d)=>l-d))||(this.hiddenIndices=t)},arraysEqual(e,i){if(e.length!==i.length)return!1;if(e===i)return!0;if(e===null||i===null)return!1;for(let t=0;t<e.length;++t)if(e[t]!==i[t])return!1;return!0},getTotalWidth(e){return e.reduce((i,t,r)=>i+this.getWidth(t==null?void 0:t.elm,r===e.length-1),0)},getWidth(e,i){if(!(e!=null&&e.classList))return 0;const t=e.classList.contains("".concat(C,"--hidden"));e.style.minWidth="auto",i&&(e.style.maxWidth="210px"),e.classList.remove("".concat(C,"--hidden"));const r=e.offsetWidth;return t&&e.classList.add("".concat(C,"--hidden")),e.style.minWidth="",e.style.maxWidth="",r},preventDefault(e){return e.preventDefault&&e.preventDefault(),!1},dragStart(e){return this.preventDefault(e)},dropped(e,i,t){return t||this.$emit("dropped",e,i),this.menuBreadcrumbProps.open=!1,document.querySelectorAll(".".concat(C)).forEach(r=>{r.classList.remove("".concat(C,"--hovered"))}),this.preventDefault(e)},dragOver(e){return this.preventDefault(e)},dragEnter(e,i){if(!i&&e.target.closest){const t=e.target.closest(".".concat(C));t.classList&&t.classList.contains(C)&&(document.querySelectorAll(".".concat(C)).forEach(r=>{r.classList.remove("".concat(C,"--hovered"))}),t.classList.add("".concat(C,"--hovered")))}},dragLeave(e,i){if(!i&&!e.target.contains(e.relatedTarget)&&e.target.closest){const t=e.target.closest(".".concat(C));if(t.contains(e.relatedTarget))return;t.classList&&t.classList.contains(C)&&t.classList.remove("".concat(C,"--hovered"))}},hideCrumbs(){Object.values(this.breadcrumbsRefs).forEach((e,i)=>{var t;(t=e==null?void 0:e.elm)!=null&&t.classList&&(this.hiddenIndices.includes(i)?e.elm.classList.add("".concat(C,"--hidden")):e.elm.classList.remove("".concat(C,"--hidden")))})},isBreadcrumb(e){var i;return(((i=e==null?void 0:e.componentOptions)==null?void 0:i.tag)||(e==null?void 0:e.tag)||"").includes("NcBreadcrumb")}},render(e){const i=[];if(this.$slots.default.forEach(a=>{var s,o;if(this.isBreadcrumb(a)){i.push(a);return}(a==null?void 0:a.type)===Ie&&((o=(s=a==null?void 0:a.children)==null?void 0:s.forEach)==null||o.call(s,c=>{this.isBreadcrumb(c)&&i.push(c)}))}),i.length===0)return;W.set(i[0].componentOptions.propsData,"icon",this.rootIcon),W.set(i[0].componentOptions.propsData,"ref","breadcrumbs");const t={};i.forEach((a,s)=>{W.set(a,"ref","crumb-".concat(s)),t[s]=a});let r=[];if(!this.hiddenIndices.length)r=i;else{r=i.slice(0,Math.round(i.length/2)),r.push(e("NcBreadcrumb",{class:"dropdown",props:this.menuBreadcrumbProps,attrs:{"aria-hidden":!0},ref:"actionsBreadcrumb",key:"actions-breadcrumb-1",nativeOn:{dragstart:this.dragStart,dragenter:()=>{this.menuBreadcrumbProps.open=!0},dragleave:this.closeActions},on:{"update:open":s=>{this.menuBreadcrumbProps.open=s}}},this.hiddenIndices.filter(s=>s<=i.length-1).map(s=>{const o=i[s],c=o.componentOptions.propsData.to,l=o.componentOptions.propsData.href,d=o.componentOptions.propsData.disableDrop,u=o.componentOptions.propsData.title,b=o.componentOptions.propsData.name;let p="NcActionButton",w="";l&&(p="NcActionLink",w=l),c&&(p="NcActionRouter",w=c);const L=e("IconFolder",{props:{size:20},slot:"icon"});return e(p,{class:C,props:{href:l||null,title:u,to:c||null},attrs:{draggable:!1},on:x({},o.componentOptions.listeners),nativeOn:{dragstart:this.dragStart,drop:S=>this.dropped(S,w,d),dragover:this.dragOver,dragenter:S=>this.dragEnter(S,d),dragleave:S=>this.dragLeave(S,d)}},[L,b])})));const a=i.slice(Math.round(i.length/2));r=r.concat(a)}const n=[e("nav",{attrs:{"aria-label":this.ariaLabel}},[e("ul",{class:"breadcrumb__crumbs"},[r])])];return this.$slots.actions&&n.push(e("div",{class:"breadcrumb__actions",ref:"breadcrumb__actions"},this.$slots.actions)),this.breadcrumbsRefs=t,e("div",{class:["breadcrumb",{"breadcrumb--collapsed":this.hiddenIndices.length===i.length-2}],ref:"container"},n)}},Ut=null,Gt=null;var qt=G(jt,Ut,Gt,!1,null,"daf14f2f");const Kt=qt.exports;function ae(e,i,t){var a;const r="#initial-state-".concat(e,"-").concat(i);if((a=window._nc_initial_state)!=null&&a.has(r))return window._nc_initial_state.get(r);window._nc_initial_state||(window._nc_initial_state=new Map);const n=document.querySelector(r);if(n===null)return t;try{const s=JSON.parse(atob(n.value));return window._nc_initial_state.set(r,s),s}catch(s){return console.error("[@nextcloud/initial-state] Could not parse initial state",{key:i,app:e,error:s}),t}}function ze(){var e;return(e=ae("files_sharing","isPublic",null))!=null?e:document.querySelector('input#isPublic[type="hidden"][name="isPublic"][value="1"]')!==null}function M(e){return typeof e=="function"?e():Ue(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;var Jt="M12,5A3.5,3.5 0 0,0 8.5,8.5A3.5,3.5 0 0,0 12,12A3.5,3.5 0 0,0 15.5,8.5A3.5,3.5 0 0,0 12,5M12,7A1.5,1.5 0 0,1 13.5,8.5A1.5,1.5 0 0,1 12,10A1.5,1.5 0 0,1 10.5,8.5A1.5,1.5 0 0,1 12,7M5.5,8A2.5,2.5 0 0,0 3,10.5C3,11.44 3.53,12.25 4.29,12.68C4.65,12.88 5.06,13 5.5,13C5.94,13 6.35,12.88 6.71,12.68C7.08,12.47 7.39,12.17 7.62,11.81C6.89,10.86 6.5,9.7 6.5,8.5C6.5,8.41 6.5,8.31 6.5,8.22C6.2,8.08 5.86,8 5.5,8M18.5,8C18.14,8 17.8,8.08 17.5,8.22C17.5,8.31 17.5,8.41 17.5,8.5C17.5,9.7 17.11,10.86 16.38,11.81C16.5,12 16.63,12.15 16.78,12.3C16.94,12.45 17.1,12.58 17.29,12.68C17.65,12.88 18.06,13 18.5,13C18.94,13 19.35,12.88 19.71,12.68C20.47,12.25 21,11.44 21,10.5A2.5,2.5 0 0,0 18.5,8M12,14C9.66,14 5,15.17 5,17.5V19H19V17.5C19,15.17 14.34,14 12,14M4.71,14.55C2.78,14.78 0,15.76 0,17.5V19H3V17.07C3,16.06 3.69,15.22 4.71,14.55M19.29,14.55C20.31,15.22 21,16.06 21,17.07V19H24V17.5C24,15.76 21.22,14.78 19.29,14.55M12,16C13.53,16 15.24,16.5 16.23,17H7.77C8.76,16.5 10.47,16 12,16Z",Ce="M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z",Xt="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",Yt="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",Qt="M7 14C5.9 14 5 13.1 5 12S5.9 10 7 10 9 10.9 9 12 8.1 14 7 14M12.6 10C11.8 7.7 9.6 6 7 6C3.7 6 1 8.7 1 12S3.7 18 7 18C9.6 18 11.8 16.3 12.6 14H16V18H20V14H23V10H12.6Z",ei="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z",ti="M15,20A1,1 0 0,0 14,19H13V17H17A2,2 0 0,0 19,15V5A2,2 0 0,0 17,3H7A2,2 0 0,0 5,5V15A2,2 0 0,0 7,17H11V19H10A1,1 0 0,0 9,20H2V22H9A1,1 0 0,0 10,23H14A1,1 0 0,0 15,22H22V20H15M7,15V5H17V15H7Z",ii="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",ri="M21.41 11.58L12.41 2.58A2 2 0 0 0 11 2H4A2 2 0 0 0 2 4V11A2 2 0 0 0 2.59 12.42L11.59 21.42A2 2 0 0 0 13 22A2 2 0 0 0 14.41 21.41L21.41 14.41A2 2 0 0 0 22 13A2 2 0 0 0 21.41 11.58M13 20L4 11V4H11L20 13M6.5 5A1.5 1.5 0 1 1 5 6.5A1.5 1.5 0 0 1 6.5 5Z",U;(function(e){e[e.User=0]="User",e[e.Group=1]="Group",e[e.Link=3]="Link",e[e.Email=4]="Email",e[e.Remote=6]="Remote",e[e.Team=7]="Team",e[e.Guest=8]="Guest",e[e.RemoteGroup=9]="RemoteGroup",e[e.Room=10]="Room",e[e.Deck=12]="Deck",e[e.FederatedGroup=14]="FederatedGroup",e[e.ScienceMesh=15]="ScienceMesh"})(U||(U={}));const ni={name:"FileIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ai=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon file-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},si=[],oi=k(ni,ai,si,!1,null,null);const He=oi.exports,$e=()=>{var n,a,s;const e=ae("files","config",null),i=g((n=e==null?void 0:e.show_hidden)!=null?n:!0),t=g((a=e==null?void 0:e.sort_favorites_first)!=null?a:!0),r=g((s=e==null?void 0:e.crop_image_previews)!=null?s:!0);return E(async()=>{var o,c,l,d,u,b;if(ze())console.debug("Skip loading files settings - currently on public share");else try{const{data:p}=await Fe.get(Y("/apps/files/api/v1/configs"));i.value=(c=(o=p==null?void 0:p.data)==null?void 0:o.show_hidden)!=null?c:!1,t.value=(d=(l=p==null?void 0:p.data)==null?void 0:l.sort_favorites_first)!=null?d:!0,r.value=(b=(u=p==null?void 0:p.data)==null?void 0:u.crop_image_previews)!=null?b:!0}catch(p){console.error("Could not load files settings",p),re(y("Could not load files settings"))}}),{showHiddenFiles:i,sortFavoritesFirst:t,cropImagePreviews:r}},li=e=>{var l,d,u,b,p,w,L,S,V,B,F,v;const i=N=>N==="asc"?"ascending":N==="desc"?"descending":"none",t=ae("files","viewConfigs",null),r=g({sortBy:(d=(l=t==null?void 0:t.files)==null?void 0:l.sorting_mode)!=null?d:"basename",order:i((b=(u=t==null?void 0:t.files)==null?void 0:u.sorting_direction)!=null?b:"asc")}),n=g({sortBy:(w=(p=t==null?void 0:t.recent)==null?void 0:p.sorting_mode)!=null?w:"basename",order:i((S=(L=t==null?void 0:t.recent)==null?void 0:L.sorting_direction)!=null?S:"asc")}),a=g({sortBy:(B=(V=t==null?void 0:t.favorites)==null?void 0:V.sorting_mode)!=null?B:"basename",order:i((v=(F=t==null?void 0:t.favorites)==null?void 0:F.sorting_direction)!=null?v:"asc")});E(async()=>{var N,A,f,m,P,H,$,I,se,oe,le,ce,ue,de,pe;if(ze())console.debug("Skip loading files views - currently on public share");else try{const{data:_}=await Fe.get(Y("/apps/files/api/v1/views"));r.value={sortBy:(f=(A=(N=_==null?void 0:_.data)==null?void 0:N.files)==null?void 0:A.sorting_mode)!=null?f:"basename",order:i((P=(m=_==null?void 0:_.data)==null?void 0:m.files)==null?void 0:P.sorting_direction)},a.value={sortBy:(I=($=(H=_==null?void 0:_.data)==null?void 0:H.favorites)==null?void 0:$.sorting_mode)!=null?I:"basename",order:i((oe=(se=_==null?void 0:_.data)==null?void 0:se.favorites)==null?void 0:oe.sorting_direction)},n.value={sortBy:(ue=(ce=(le=_==null?void 0:_.data)==null?void 0:le.recent)==null?void 0:ce.sorting_mode)!=null?ue:"basename",order:i((pe=(de=_==null?void 0:_.data)==null?void 0:de.recent)==null?void 0:pe.sorting_direction)}}catch(_){console.error("Could not load files views",_),re(y("Could not load files views"))}});const s=h(()=>M(e||"files")==="files"?r.value:M(e)==="recent"?n.value:a.value),o=h(()=>s.value.sortBy),c=h(()=>s.value.order);return{filesViewConfig:r,favoritesViewConfig:a,recentViewConfig:n,currentConfig:s,sortBy:o,order:c}},ci={name:"MenuUpIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ui=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon menu-up-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M7,15L12,10L17,15H7Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},di=[],pi=k(ci,ui,di,!1,null,null);const fi=pi.exports,mi={name:"MenuDownIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var hi=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon menu-down-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M7,10L12,15L17,10H7Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},vi=[],gi=k(mi,hi,vi,!1,null,null);const _i=gi.exports,Me={"file-picker__file-icon":"_file-picker__file-icon_3v9zx_9","file-picker__file-icon--primary":"_file-picker__file-icon--primary_3v9zx_21","file-picker__file-icon-overlay":"_file-picker__file-icon-overlay_3v9zx_25"},yi=z({__name:"LoadingTableRow",props:{showCheckbox:{type:Boolean}},setup(e){return{__sfc:!0,fileListIconStyles:Me}}});var bi=function(){var e=this,i=e._self._c,t=e._self._setupProxy;return i("tr",{staticClass:"file-picker__row loading-row",attrs:{"aria-hidden":"true"}},[e.showCheckbox?i("td",{staticClass:"row-checkbox"},[i("span")]):e._e(),i("td",{staticClass:"row-name"},[i("div",{staticClass:"row-wrapper"},[i("span",{class:t.fileListIconStyles["file-picker__file-icon"]}),i("span")])]),e._m(0),e._m(1)])},wi=[function(){var e=this,i=e._self._c;return e._self._setupProxy,i("td",{staticClass:"row-size"},[i("span")])},function(){var e=this,i=e._self._c;return e._self._setupProxy,i("td",{staticClass:"row-modified"},[i("span")])}],Ci=k(yi,bi,wi,!1,null,"15187afc");const ki=Ci.exports,Si=new ot({concurrency:5});function Ni(e){const{resolve:i,promise:t}=Promise.withResolvers();return Si.add(()=>{const r=new Image;return r.onerror=()=>i(!1),r.onload=()=>i(!0),r.src=e,t}),t}function Li(e,i={}){var t;i=x({size:32,cropPreview:!1,mimeFallback:!0},i);try{const r=((t=e.attributes)==null?void 0:t.previewUrl)||Y("/core/preview?fileId={fileid}",{fileid:e.fileid});let n;try{n=new URL(r)}catch(a){n=new URL(r,window.location.origin)}return n.searchParams.set("x","".concat(i.size)),n.searchParams.set("y","".concat(i.size)),n.searchParams.set("mimeFallback","".concat(i.mimeFallback)),n.searchParams.set("a",i.cropPreview===!0?"0":"1"),n.searchParams.set("c","".concat(e.attributes.etag)),n}catch(r){return null}}const Fi=(e,i)=>{const t=g(null),r=g(!1);return et(()=>{r.value=!1,t.value=Li(M(e),M(i||{})),t.value&&M(e).type===D.File&&Ni(t.value.href).then(n=>{r.value=n})}),{previewURL:t,previewLoaded:r}},xi={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Bi=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},Vi=[],Ai=k(xi,Bi,Vi,!1,null,null);const De=Ai.exports,Pi={name:"FilePreview"},Ii=z(T(x({},Pi),{props:{node:null,cropImagePreviews:{type:Boolean}},setup(e){const i=e,t=g(Me),{previewURL:r,previewLoaded:n}=Fi(Se(i,"node"),h(()=>({cropPreview:i.cropImagePreviews}))),a=h(()=>i.node.type===D.File),s=h(()=>{var c,l,d,u;if(i.node.type!==D.Folder)return null;if(((c=i.node.attributes)==null?void 0:c["is-encrypted"])===1)return Qt;if((l=i.node.attributes)!=null&&l["is-tag"])return ri;const o=Object.values(((d=i.node.attributes)==null?void 0:d["share-types"])||{}).flat();if(o.some(b=>b===U.Link||b===U.Email))return ei;if(o.length>0)return Ce;switch((u=i.node.attributes)==null?void 0:u["mount-type"]){case"external":case"external-session":return ti;case"group":return Jt;case"shared":return Ce}return null});return{__sfc:!0,fileListIconStyles:t,props:i,previewURL:r,previewLoaded:n,isFile:a,folderDecorationIcon:s,NcIconSvgWrapper:xe,IconFile:He,IconFolder:De}}}));var zi=function(){var e=this,i=e._self._c,t=e._self._setupProxy;return i("div",{class:t.fileListIconStyles["file-picker__file-icon"],style:t.previewLoaded?{backgroundImage:"url(".concat(t.previewURL,")")}:void 0},[t.previewLoaded?e._e():[t.isFile?i(t.IconFile,{attrs:{size:32}}):[t.folderDecorationIcon?i(t.NcIconSvgWrapper,{class:t.fileListIconStyles["file-picker__file-icon-overlay"],attrs:{inline:"",path:t.folderDecorationIcon,size:16}}):e._e(),i(t.IconFolder,{class:t.fileListIconStyles["file-picker__file-icon--primary"],attrs:{size:32}})]]],2)},Hi=[],$i=k(Ii,zi,Hi,!1,null,null);const Mi=$i.exports,Di=z({__name:"FileListRow",props:{allowPickDirectory:{type:Boolean},selected:{type:Boolean},showCheckbox:{type:Boolean},canPick:{type:Boolean},node:null,cropImagePreviews:{type:Boolean}},emits:["update:selected","enter-directory"],setup(e,{emit:i}){const t=e,r=h(()=>at(t.node.displayname)),n=h(()=>t.node.displayname.slice(0,r.value?-r.value.length:void 0)),a=h(()=>t.node.type===D.Folder),s=h(()=>t.canPick&&(t.allowPickDirectory||!a.value)),o=h(()=>(t.node.permissions&he.READ)===he.READ);function c(){s.value&&i("update:selected",!t.selected)}function l(){a.value?o.value&&i("enter-directory",t.node):c()}function d(u){u.key==="Enter"&&l()}return{__sfc:!0,props:t,emit:i,fileExtension:r,displayName:n,isDirectory:a,isPickable:s,isNavigatable:o,toggleSelected:c,handleClick:l,handleKeyDown:d,formatFileSize:nt,NcCheckboxRadioSwitch:Be,NcDateTime:st,t:y,FilePreview:Mi}}});var Oi=function(){var e=this,i=e._self._c,t=e._self._setupProxy;return i("tr",e._g({class:["file-picker__row",{"file-picker__row--selected":e.selected&&!e.showCheckbox,"file-picker__row--not-navigatable":t.isDirectory&&!t.isNavigatable,"file-picker__row--not-pickable":!t.isPickable}],attrs:{tabindex:e.showCheckbox&&!t.isDirectory?void 0:0,"aria-selected":t.isPickable?e.selected:void 0,"data-filename":e.node.basename,"data-testid":"file-list-row"}},x({click:t.handleClick},!e.showCheckbox||t.isDirectory?{keydown:t.handleKeyDown}:{})),[e.showCheckbox?i("td",{staticClass:"row-checkbox",on:{click:function(r){return r.stopPropagation(),(()=>{}).apply(null,arguments)}}},[i(t.NcCheckboxRadioSwitch,{attrs:{"aria-label":t.t("Select the row for {nodename}",{nodename:t.displayName}),disabled:!t.isPickable,"data-testid":"row-checkbox","model-value":e.selected},on:{"update:model-value":t.toggleSelected}})],1):e._e(),i("td",{staticClass:"row-name"},[i("div",{staticClass:"file-picker__name-container",attrs:{"data-testid":"row-name"}},[i(t.FilePreview,{attrs:{node:e.node,"crop-image-previews":e.cropImagePreviews}}),i("div",{staticClass:"file-picker__file-name",attrs:{title:t.displayName},domProps:{textContent:e._s(t.displayName)}}),i("div",{staticClass:"file-picker__file-extension",domProps:{textContent:e._s(t.fileExtension)}})],1)]),i("td",{staticClass:"row-size"},[e._v(" "+e._s(t.formatFileSize(e.node.size||0))+" ")]),i("td",{staticClass:"row-modified"},[i(t.NcDateTime,{attrs:{timestamp:e.node.mtime,"ignore-seconds":!0}})],1)])},Ri=[],Ei=k(Di,Oi,Ri,!1,null,"82f380c9");const Ti=Ei.exports,Wi=z({__name:"FileList",props:{currentView:null,multiselect:{type:Boolean},allowPickDirectory:{type:Boolean},loading:{type:Boolean},files:null,canPick:null,selectedFiles:null,path:null},emits:["update:path","update:selectedFiles"],setup(e,{emit:i}){const t=e,r=g(),{currentConfig:n}=li(t.currentView),a=h(()=>{var v;return(v=r.value)!=null?v:n.value}),s=h(()=>a.value.sortBy==="basename"?a.value.order==="none"?void 0:a.value.order:void 0),o=h(()=>a.value.sortBy==="size"?a.value.order==="none"?void 0:a.value.order:void 0),c=h(()=>a.value.sortBy==="mtime"?a.value.order==="none"?void 0:a.value.order:void 0),l=v=>{a.value.sortBy===v?a.value.order==="ascending"?r.value={sortBy:a.value.sortBy,order:"descending"}:r.value={sortBy:a.value.sortBy,order:"ascending"}:r.value={sortBy:v,order:"ascending"}},{sortFavoritesFirst:d,cropImagePreviews:u}=$e(),b=h(()=>rt(t.files,{sortFoldersFirst:!0,sortFavoritesFirst:d.value,sortingOrder:a.value.order==="descending"?"desc":"asc",sortingMode:a.value.sortBy})),p=h(()=>t.files.filter(v=>t.allowPickDirectory||v.type!==D.Folder)),w=h(()=>!t.loading&&t.selectedFiles.length>0&&t.selectedFiles.length>=p.value.length);function L(){t.selectedFiles.length<p.value.length?i("update:selectedFiles",p.value):i("update:selectedFiles",[])}function S(v){t.selectedFiles.includes(v)?i("update:selectedFiles",t.selectedFiles.filter(N=>N.path!==v.path)):t.multiselect?i("update:selectedFiles",[...t.selectedFiles,v]):i("update:selectedFiles",[v])}function V(v){i("update:path",v.path)}const B=g(4),F=g();{const v=()=>Xe(()=>{var f,m,P,H,$;const N=((m=(f=F.value)==null?void 0:f.parentElement)==null?void 0:m.children)||[];let A=((H=(P=F.value)==null?void 0:P.parentElement)==null?void 0:H.clientHeight)||450;for(let I=0;I<N.length;I++)($=F.value)!=null&&$.isSameNode(N[I])||(A-=N[I].clientHeight);B.value=Math.max(1,Math.floor((A-50)/50))});E(()=>{window.addEventListener("resize",v),v()}),Ye(()=>{window.removeEventListener("resize",v)})}return{__sfc:!0,props:t,emit:i,customSortingConfig:r,filesAppSorting:n,sortingConfig:a,sortByName:s,sortBySize:o,sortByModified:c,toggleSorting:l,sortFavoritesFirst:d,cropImagePreviews:u,sortedFiles:b,selectableFiles:p,allSelected:w,onSelectAll:L,onNodeSelected:S,onChangeDirectory:V,skeletonNumber:B,fileContainer:F,NcButton:te,NcCheckboxRadioSwitch:Be,t:y,IconSortAscending:fi,IconSortDescending:_i,LoadingTableRow:ki,FileListRow:Ti}}});var Zi=function(){var e=this,i=e._self._c,t=e._self._setupProxy;return i("div",{ref:"fileContainer",staticClass:"file-picker__files"},[i("table",[i("thead",[i("tr",[e.multiselect?i("th",{staticClass:"row-checkbox"},[i("span",{staticClass:"hidden-visually"},[e._v(" "+e._s(t.t("Select entry"))+" ")]),e.multiselect?i(t.NcCheckboxRadioSwitch,{attrs:{"aria-label":t.t("Select all entries"),"data-testid":"select-all-checkbox","model-value":t.allSelected},on:{"update:model-value":t.onSelectAll}}):e._e()],1):e._e(),i("th",{staticClass:"row-name",attrs:{"aria-sort":t.sortByName}},[i("div",{staticClass:"header-wrapper"},[i("span",{staticClass:"file-picker__header-preview"}),i(t.NcButton,{attrs:{wide:!0,type:"tertiary","data-test":"file-picker_sort-name"},on:{click:function(r){return t.toggleSorting("basename")}},scopedSlots:e._u([{key:"icon",fn:function(){return[t.sortByName==="ascending"?i(t.IconSortAscending,{attrs:{size:20}}):t.sortByName==="descending"?i(t.IconSortDescending,{attrs:{size:20}}):i("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(t.t("Name"))+" ")])],1)]),i("th",{staticClass:"row-size",attrs:{"aria-sort":t.sortBySize}},[i(t.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(r){return t.toggleSorting("size")}},scopedSlots:e._u([{key:"icon",fn:function(){return[t.sortBySize==="ascending"?i(t.IconSortAscending,{attrs:{size:20}}):t.sortBySize==="descending"?i(t.IconSortDescending,{attrs:{size:20}}):i("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(t.t("Size"))+" ")])],1),i("th",{staticClass:"row-modified",attrs:{"aria-sort":t.sortByModified}},[i(t.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(r){return t.toggleSorting("mtime")}},scopedSlots:e._u([{key:"icon",fn:function(){return[t.sortByModified==="ascending"?i(t.IconSortAscending,{attrs:{size:20}}):t.sortByModified==="descending"?i(t.IconSortDescending,{attrs:{size:20}}):i("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(t.t("Modified"))+" ")])],1)])]),i("tbody",[e.loading?e._l(t.skeletonNumber,function(r){return i(t.LoadingTableRow,{key:r,attrs:{"show-checkbox":e.multiselect}})}):e._l(t.sortedFiles,function(r){return i(t.FileListRow,{key:r.fileid||r.path,attrs:{"allow-pick-directory":e.allowPickDirectory,"show-checkbox":e.multiselect,"can-pick":(e.multiselect||e.selectedFiles.length===0||e.selectedFiles.includes(r))&&(e.canPick===void 0||e.canPick(r)),selected:e.selectedFiles.includes(r),node:r,"crop-image-previews":t.cropImagePreviews},on:{"update:selected":function(n){return t.onNodeSelected(r)},"enter-directory":t.onChangeDirectory}})})],2)])])},ji=[],Ui=k(Wi,Zi,ji,!1,null,"6503afab");const Gi=Ui.exports,qi={name:"HomeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Ki=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon home-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},Ji=[],Xi=k(qi,Ki,Ji,!1,null,null);const Yi=Xi.exports,Qi={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var er=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon plus-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},tr=[],ir=k(Qi,er,tr,!1,null,null);const rr=ir.exports,nr=z({__name:"FilePickerBreadcrumbs",props:{path:null,showMenu:{type:Boolean}},emits:["update:path","create-node"],setup(e,{emit:i}){const t=e,r=g(!1),n=g(""),a=g();function s(){var b,p;const l=n.value.trim(),d=(p=(b=a.value)==null?void 0:b.$el)==null?void 0:p.querySelector("input");let u="";try{tt(l)}catch(w){if(!(w instanceof it))throw w;switch(w.reason){case K.Character:u=y('"{char}" is not allowed inside a folder name.',{char:w.segment});break;case K.ReservedName:u=y('"{segment}" is a reserved name and not allowed for folder names.',{segment:w.segment});break;case K.Extension:u=y('Folder names must not end with "{extension}".',{extension:w.segment});break;default:u=y("Invalid folder name.")}}return d&&d.setCustomValidity(u),u===""}const o=function(){const l=n.value.trim();s()&&(r.value=!1,i("create-node",l),n.value="")},c=h(()=>t.path.split("/").filter(l=>l!=="").map((l,d,u)=>({name:l,path:"/"+u.slice(0,d+1).join("/")})));return{__sfc:!0,props:t,emit:i,actionsOpen:r,newNodeName:n,nameInput:a,validateInput:s,onSubmit:o,pathElements:c,NcActionInput:lt,NcActions:ie,NcBreadcrumb:Ve,NcBreadcrumbs:Kt,IconFolder:De,IconHome:Yi,IconPlus:rr,t:y}}});var ar=function(){var e=this,i=e._self._c,t=e._self._setupProxy;return i(t.NcBreadcrumbs,{staticClass:"file-picker__breadcrumbs",scopedSlots:e._u([{key:"default",fn:function(){return[i(t.NcBreadcrumb,{attrs:{name:t.t("All files"),title:t.t("Home")},on:{click:function(r){return t.emit("update:path","/")}},scopedSlots:e._u([{key:"icon",fn:function(){return[i(t.IconHome,{attrs:{size:20}})]},proxy:!0}])}),e._l(t.pathElements,function(r){return i(t.NcBreadcrumb,{key:r.path,attrs:{name:r.name,title:r.path},on:{click:function(n){return t.emit("update:path",r.path)}}})})]},proxy:!0},e.showMenu?{key:"actions",fn:function(){return[i(t.NcActions,{attrs:{open:t.actionsOpen,"aria-label":t.t("Create directory"),"force-menu":!0,"force-name":!0,"menu-name":t.t("New"),type:"secondary"},on:{"update:open":function(r){t.actionsOpen=r},close:function(r){t.newNodeName=""}},scopedSlots:e._u([{key:"icon",fn:function(){return[i(t.IconPlus,{attrs:{size:20}})]},proxy:!0}],null,!1,2971667417)},[i(t.NcActionInput,{ref:"nameInput",attrs:{value:t.newNodeName,label:t.t("New folder"),placeholder:t.t("New folder name")},on:{"update:value":function(r){t.newNodeName=r},submit:t.onSubmit,"update:model-value":t.validateInput},scopedSlots:e._u([{key:"icon",fn:function(){return[i(t.IconFolder,{attrs:{size:20}})]},proxy:!0}],null,!1,1614167509)})],1)]},proxy:!0}:null],null,!0)})},sr=[],or=k(nr,ar,sr,!1,null,"1a8cb0b2");const lr=or.exports,cr={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ur=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon close-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},dr=[],pr=k(cr,ur,dr,!1,null,null);const fr=pr.exports,mr={name:"MagnifyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var hr=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon magnify-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},vr=[],gr=k(mr,hr,vr,!1,null,null);const _r=gr.exports,yr=e=>{const i=[{id:"files",label:y("All files"),icon:Yt},{id:"recent",label:y("Recent"),icon:Xt},{id:"favorites",label:y("Favorites"),icon:ii}],t=e.value?i.filter(({id:r})=>r==="files"):i;return{allViews:i,availableViews:t}},br=z({__name:"FilePickerNavigation",props:{currentView:null,filterString:null,isCollapsed:{type:Boolean},disabledNavigation:{type:Boolean}},emits:["update:currentView","update:filterString"],setup(e,{emit:i}){const t=e,{availableViews:r}=yr(g(Je()===null)),n=h(()=>{var a;return(a=r.filter(s=>s.id===t.currentView)[0])!=null?a:r[0]});return{__sfc:!0,props:t,emit:i,availableViews:r,currentViewObject:n,updateFilterValue:a=>i("update:filterString",a),IconClose:fr,IconMagnify:_r,NcButton:te,NcIconSvgWrapper:xe,NcSelect:mt,NcTextField:ht,Fragment:Ie,t:y}}});var wr=function(){var e=this,i=e._self._c,t=e._self._setupProxy;return i(t.Fragment,[i(t.NcTextField,{staticClass:"file-picker__filter-input",attrs:{label:t.t("Filter file list"),"show-trailing-button":!!e.filterString,"model-value":e.filterString},on:{"update:model-value":t.updateFilterValue,"trailing-button-click":function(r){return t.updateFilterValue("")}},scopedSlots:e._u([{key:"trailing-button-icon",fn:function(){return[i(t.IconClose,{attrs:{size:16}})]},proxy:!0}])},[i(t.IconMagnify,{attrs:{size:16}})],1),t.availableViews.length>1&&!e.disabledNavigation?[e.isCollapsed?i(t.NcSelect,{attrs:{"aria-label":t.t("Current view selector"),clearable:!1,searchable:!1,options:t.availableViews,"model-value":t.currentViewObject},on:{"update:model-value":function(r){return t.emit("update:currentView",r.id)}}}):i("ul",{staticClass:"file-picker__side"},e._l(t.availableViews,function(r){return i("li",{key:r.id},[i(t.NcButton,{attrs:{type:e.currentView===r.id?"primary":"tertiary",wide:!0},on:{click:function(n){return e.$emit("update:currentView",r.id)}},scopedSlots:e._u([{key:"icon",fn:function(){return[i(t.NcIconSvgWrapper,{attrs:{path:r.icon,size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(r.label)+" ")])],1)}),0)]:e._e()],2)},Cr=[],kr=k(br,wr,Cr,!1,null,"f5975252");const Sr=kr.exports;function Nr(e){const i=new AbortController,t=Math.round(Date.now()/1e3)-60*60*24*14;return new Ne(async(r,n,a)=>{a(()=>i.abort());try{const{data:s}=await e.search("/",{signal:i.signal,details:!0,data:Qe(t)}),o=s.results.map(c=>ee(c));r(o)}catch(s){n(s)}})}function Lr(e,i){const t=new AbortController;return new Ne(async(r,n,a)=>{a(()=>t.abort());try{const s=(await e.getDirectoryContents(j.join(Q,i),{signal:t.signal,details:!0,includeSelf:!0,data:Le()})).data.map(o=>ee(o));r({contents:s.filter(({path:o})=>o!==i),folder:s.find(({path:o})=>o===i)})}catch(s){n(s)}})}async function Fr(e,i){const{data:t}=await e.stat(j.join(Q,i),{details:!0,data:Le()});return ee(t)}const xr=function(e,i){const t=qe(),r=X([]),n=X(null),a=g(!0),s=g(null);async function o(l){const d=j.join(i.value,l);await t.createDirectory(j.join(Q,d));const u=await Fr(t,d);return r.value=[...r.value,u],u}async function c(){s.value&&s.value.cancel(),a.value=!0,e.value==="favorites"?s.value=Ke(t,i.value):e.value==="recent"?s.value=Nr(t):s.value=Lr(t,i.value);const l=await s.value;"folder"in l?(n.value=l.folder,r.value=l.contents):(n.value=null,r.value=l),s.value=null,a.value=!1}return ke([e,i],()=>c()),E(()=>c()),{isLoading:a,files:r,folder:n,loadFiles:c,createDirectory:o}},Br=function(e){const i=h(()=>e.value.map(t=>t.split("/")));return{isSupportedMimeType:t=>{const r=t.split("/");return i.value.some(([n,a])=>(r[0]===n||n==="*")&&(r[1]===a||a==="*"))}}},Vr={name:"FilePicker"},Ar=z(T(x({},Vr),{props:{buttons:null,name:null,allowPickDirectory:{type:Boolean,default:!1},disabledNavigation:{type:Boolean,default:!1},container:{default:"body"},filterFn:{default:void 0},canPickFn:{default:void 0},mimetypeFilter:{default:()=>[]},multiselect:{type:Boolean,default:!0},path:{default:void 0}},emits:["close"],setup(e,{emit:i}){const t=e,r=g(!0),n=h(()=>{const f=l.value.length===0&&t.allowPickDirectory&&S.value?[S.value]:l.value;return(typeof t.buttons=="function"?t.buttons(f,b.value,o.value):t.buttons).map(m=>T(x({},m),{disabled:m.disabled||V.value,callback:()=>{a=!0,s(m.callback,f)}}))});let a=!1;const s=async(f,m)=>{f(m),i("close",m),a=!1},o=g("files"),c=h(()=>o.value==="favorites"?y("Favorites"):o.value==="recent"?y("Recent"):""),l=X([]),d=g((window==null?void 0:window.sessionStorage.getItem("NC.FilePicker.LastPath"))||"/"),u=g("");ke([u],()=>{t.path===void 0&&u.value&&window.sessionStorage.setItem("NC.FilePicker.LastPath",u.value),l.value=[]});const b=h({get:()=>o.value==="files"?u.value||t.path||d.value:"/",set:f=>{u.value=f}}),p=g(""),{isSupportedMimeType:w}=Br(Se(t,"mimetypeFilter")),{files:L,folder:S,isLoading:V,loadFiles:B,createDirectory:F}=xr(o,b);E(()=>B());const{showHiddenFiles:v}=$e(),N=h(()=>{let f=L.value;return v.value||(f=f.filter(m=>!m.basename.startsWith("."))),t.mimetypeFilter.length>0&&(f=f.filter(m=>m.type==="folder"||m.mime&&w(m.mime))),p.value&&(f=f.filter(m=>m.basename.toLowerCase().includes(p.value.toLowerCase()))),t.filterFn&&(f=f.filter(m=>t.filterFn(m))),f}),A=h(()=>o.value==="files"?y("Upload some content or sync with your devices!"):o.value==="recent"?y("Files and folders you recently modified will show up here."):y("Files and folders you mark as favorite will show up here."));return{__sfc:!0,props:t,emit:i,isOpen:r,dialogButtons:n,isHandlingCallback:a,handleButtonClick:s,currentView:o,viewHeadline:c,selectedFiles:l,savedPath:d,navigatedPath:u,currentPath:b,filterString:p,isSupportedMimeType:w,files:L,currentFolder:S,isLoading:V,loadFiles:B,createDirectory:F,showHiddenFiles:v,filteredFiles:N,noFilesDescription:A,onCreateFolder:async f=>{try{const m=await F(f);u.value=m.path,Ge("files:node:created",L.value.filter(P=>P.basename===f)[0])}catch(m){console.warn("Could not create new folder",{name:f,error:m}),re(y("Could not create the new folder"))}},handleClose:f=>{!f&&!a&&i("close")},IconFile:He,FileList:Gi,FilePickerBreadcrumbs:lr,FilePickerNavigation:Sr,NcDialog:vt,NcEmptyContent:gt,t:y}}}));var Pr=function(){var e=this,i=e._self._c,t=e._self._setupProxy;return i(t.NcDialog,{attrs:{open:t.isOpen,container:e.container,buttons:t.dialogButtons,name:e.name,size:"large","content-classes":"file-picker__content","dialog-classes":"file-picker","navigation-classes":"file-picker__navigation"},on:{"update:open":[function(r){t.isOpen=r},t.handleClose]},scopedSlots:e._u([{key:"navigation",fn:function({isCollapsed:r}){return[i(t.FilePickerNavigation,{attrs:{"current-view":t.currentView,"filter-string":t.filterString,"is-collapsed":r,"disabled-navigation":e.disabledNavigation},on:{"update:currentView":function(n){t.currentView=n},"update:current-view":function(n){t.currentView=n},"update:filterString":function(n){t.filterString=n},"update:filter-string":function(n){t.filterString=n}}})]}}])},[i("div",{staticClass:"file-picker__main"},[t.currentView==="files"?i(t.FilePickerBreadcrumbs,{attrs:{path:t.currentPath,"show-menu":e.allowPickDirectory},on:{"update:path":function(r){t.currentPath=r},"create-node":t.onCreateFolder}}):i("div",{staticClass:"file-picker__view"},[i("h3",[e._v(e._s(t.viewHeadline))])]),t.isLoading||t.filteredFiles.length>0?i(t.FileList,{attrs:{path:t.currentPath,"selected-files":t.selectedFiles,"allow-pick-directory":e.allowPickDirectory,"current-view":t.currentView,files:t.filteredFiles,multiselect:e.multiselect,loading:t.isLoading,name:t.viewHeadline,"can-pick":e.canPickFn},on:{"update:path":[function(r){t.currentPath=r},function(r){t.currentView="files"}],"update:selectedFiles":function(r){t.selectedFiles=r},"update:selected-files":function(r){t.selectedFiles=r}}}):t.filterString?i(t.NcEmptyContent,{attrs:{name:t.t("No matching files"),description:t.t("No files matching your filter were found.")},scopedSlots:e._u([{key:"icon",fn:function(){return[i(t.IconFile)]},proxy:!0}])}):i(t.NcEmptyContent,{attrs:{name:t.t("No files in here"),description:t.noFilesDescription},scopedSlots:e._u([{key:"icon",fn:function(){return[i(t.IconFile)]},proxy:!0}])})],1)])},Ir=[],zr=k(Ar,Pr,Ir,!1,null,"dda9b42b");const cn=zr.exports;export{cn as default};
//# sourceMappingURL=FilePicker-JKNLPCbR-C1b0VlZX.chunk.mjs.map

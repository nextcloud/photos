{"version":3,"file":"HeaderNavigation-C9AntmL1.chunk.mjs","sources":["../src/components/HeaderNavigation.vue"],"sourcesContent":["<!--\n - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div :class=\"{'photos-navigation--root': isRoot}\" class=\"photos-navigation\" role=\"toolbar\">\n\t\t<!-- Back navigation button -->\n\t\t<NcButton v-if=\"!isRoot\"\n\t\t\tclass=\"photos-navigation__back\"\n\t\t\t:aria-label=\"t('photos', 'Go back')\"\n\t\t\ttype=\"tertiary\"\n\t\t\t@click=\"folderUp\">\n\t\t\t<template #icon>\n\t\t\t\t<ArrowLeft :size=\"20\" />\n\t\t\t</template>\n\t\t</NcButton>\n\n\t\t<!-- Main Navigation title -->\n\t\t<div class=\"photos-navigation__title\">\n\t\t\t<h1 class=\"photos-navigation__title__main\" @click=\"refresh\">\n\t\t\t\t{{ name }}\n\t\t\t</h1>\n\t\t\t<div class=\"photos-navigation__title__sub\" />\n\t\t\t<slot name=\"subtitle\" />\n\t\t</div>\n\n\t\t<!-- Main slot -->\n\t\t<div v-if=\"$slots.default\" class=\"photos-navigation__content\">\n\t\t\t<slot />\n\t\t</div>\n\n\t\t<NcLoadingIcon v-show=\"loading\" class=\"photos-navigation__loader\" />\n\n\t\t<div class=\"photos-navigation__content-right\">\n\t\t\t<slot name=\"right\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script lang='ts'>\nimport ArrowLeft from 'vue-material-design-icons/ArrowLeft.vue'\n\nimport { NcButton, NcLoadingIcon } from '@nextcloud/vue'\nimport { t } from '@nextcloud/l10n'\nimport type { Location } from 'vue-router'\n\nexport default {\n\tname: 'HeaderNavigation',\n\n\tcomponents: {\n\t\tArrowLeft,\n\t\tNcButton,\n\t\tNcLoadingIcon,\n\t},\n\n\tinheritAttrs: false,\n\n\tprops: {\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tpath: {\n\t\t\ttype: String,\n\t\t\tdefault: '/',\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trootTitle: {\n\t\t\ttype: String,\n\t\t\tdefault: t('photos', 'Photos'),\n\t\t},\n\t\t// The route params\n\t\tparams: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tisRoot() {\n\t\t\tconst isRoot = this.path === '/'\n\t\t\tthis.toggleNavigationButton(!isRoot)\n\t\t\treturn isRoot\n\t\t},\n\n\t\tname() {\n\t\t\tif (this.isRoot) {\n\t\t\t\treturn this.rootTitle\n\t\t\t}\n\t\t\treturn this.title\n\t\t},\n\n\t\tparentPath() {\n\t\t\tconst path = this.path.split('/')\n\t\t\tpath.pop()\n\t\t\tconst parent = path.join('/')\n\t\t\treturn this.isRoot || parent.trim() === ''\n\t\t\t\t? '/'\n\t\t\t\t: path.join('/')\n\t\t},\n\n\t\tparentName() {\n\t\t\treturn this.parentPath && this.parentPath.split('/').pop()\n\t\t},\n\n\t\tbackToText() {\n\t\t\tif (this.parentPath === '/') {\n\t\t\t\treturn t('photos', 'Back to {folder}', { folder: this.rootTitle })\n\t\t\t}\n\t\t\treturn t('photos', 'Back to {folder}', { folder: this.parentName })\n\t\t},\n\n\t\t/**\n\t\t * We do not want encoded slashes when browsing by folder\n\t\t * so we generate a new valid route object, get the final url back\n\t\t * decode it and use it as a direct string, which vue-router\n\t\t * does not encode afterwards\n\t\t */\n\t\tto(): string|Location {\n\t\t\t// always remove first slash, the router\n\t\t\t// manage it automatically\n\t\t\tconst regex = /^\\/?(.*)/i\n\t\t\tconst path = (regex.exec(this.parentPath) as string[])[1]\n\n\t\t\t// apply to current route\n\t\t\tconst { name, params } = Object.assign({}, this.$route, {\n\t\t\t\tparams: this.params || { path },\n\t\t\t})\n\n\t\t\t// return the full object as we don't care about\n\t\t\t// an empty path if this is route\n\t\t\tif (path === '') {\n\t\t\t\treturn { name: name ?? undefined }\n\t\t\t}\n\n\t\t\t// returning a string prevent vue-router to encode it again\n\t\t\treturn decodeURIComponent(this.$router.resolve({ name: name ?? undefined, params }).resolved.path)\n\t\t},\n\t},\n\n\tmethods: {\n\t\tfolderUp() {\n\t\t\tthis.$router.push(this.to)\n\t\t},\n\n\t\trefresh() {\n\t\t\tthis.$emit('refresh')\n\t\t},\n\n\t\ttoggleNavigationButton(hide) {\n\t\t\t// Hide the navigation toggle if the back button is shown\n\t\t\tconst navigationToggle = document.querySelector('button.app-navigation-toggle')\n\t\t\tif (navigationToggle !== null) {\n\t\t\t\tnavigationToggle.style.display = hide ? 'none' : null\n\t\t\t}\n\t\t},\n\n\t\tt,\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.photos-navigation {\n\tposition: sticky;\n\tz-index: 20;\n\ttop: 0;\n\tdisplay: flex;\n\t// We need to wrap on small devices for accessibility\n\tflex-wrap: wrap;\n\tgap: calc(2 * var(--app-navigation-padding));\n\talign-items: center;\n\tjustify-content: flex-start;\n\twidth: 100%;\n\t// Ensure to not overlap with app navigation toggle\n\tpadding-inline: calc(var(--default-clickable-area) + 2 * var(--app-navigation-padding)) var(--app-navigation-padding);\n\t// Align with app navigation toggle\n\tpadding-block: var(--app-navigation-padding);\n\tbackground: var(--color-main-background);\n\n\t&__back {\n\t\t// Replaces the app navigation button\n\t\tposition: absolute !important;\n\t\tleft: var(--app-navigation-padding);\n\t}\n\n\t&__title {\n\t\tmax-width: 45%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&__main {\n\t\t\tcursor: pointer;\n\t\t\tfont-weight: 700;\n\t\t\tfont-size: 20px;\n\t\t\tline-height: 44px;\n\t\t}\n\n\t\t&__main, &__sub {\n\t\t\toverflow: hidden;\n\t\t\twhite-space: nowrap;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\t}\n\n\t&__loader {\n\t\tmargin-inline-start: 32px;\n\t}\n\n\t&__content-right {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin-inline-start: auto;\n\t}\n}\n\n</style>\n"],"names":["_sfc_main","ArrowLeft","NcButton","NcLoadingIcon","t","isRoot","path","parent","name","params","hide","navigationToggle"],"mappings":"qKA+CA,MAAAA,EAAA,CACA,KAAA,mBAEA,WAAA,CACA,UAAAC,EACA,SAAAC,EACA,cAAAC,CACA,EAEA,aAAA,GAEA,MAAA,CACA,QAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,KAAA,CACA,KAAA,OACA,QAAA,GACA,EACA,MAAA,CACA,KAAA,OACA,SAAA,EACA,EACA,UAAA,CACA,KAAA,OACA,QAAAC,EAAA,SAAA,QAAA,CACA,EAEA,OAAA,CACA,KAAA,OACA,QAAA,IAAA,CAEA,EAEA,SAAA,CACA,QAAA,CACA,MAAAC,EAAA,KAAA,OAAA,IACA,OAAA,KAAA,uBAAA,CAAAA,CAAA,EACAA,CACA,EAEA,MAAA,CACA,OAAA,KAAA,OACA,KAAA,UAEA,KAAA,KACA,EAEA,YAAA,CACA,MAAAC,EAAA,KAAA,KAAA,MAAA,GAAA,EACAA,EAAA,IAAA,EACA,MAAAC,EAAAD,EAAA,KAAA,GAAA,EACA,OAAA,KAAA,QAAAC,EAAA,KAAA,IAAA,GACA,IACAD,EAAA,KAAA,GAAA,CACA,EAEA,YAAA,CACA,OAAA,KAAA,YAAA,KAAA,WAAA,MAAA,GAAA,EAAA,IAAA,CACA,EAEA,YAAA,CACA,OAAA,KAAA,aAAA,IACAF,EAAA,SAAA,mBAAA,CAAA,OAAA,KAAA,UAAA,EAEAA,EAAA,SAAA,mBAAA,CAAA,OAAA,KAAA,WAAA,CACA,EAQA,IAAA,CAIA,MAAAE,EADA,YACA,KAAA,KAAA,UAAA,EAAA,CAAA,EAGA,CAAA,KAAAE,EAAA,OAAAC,GAAA,OAAA,OAAA,CAAA,EAAA,KAAA,OAAA,CACA,OAAA,KAAA,QAAA,CAAA,KAAAH,CAAA,CAAA,CACA,EAIA,OAAAA,IAAA,GACA,CAAA,KAAAE,GAAA,MAAA,EAIA,mBAAA,KAAA,QAAA,QAAA,CAAA,KAAAA,GAAA,OAAA,OAAAC,CAAA,CAAA,EAAA,SAAA,IAAA,CAAA,CAEA,EAEA,QAAA,CACA,UAAA,CACA,KAAA,QAAA,KAAA,KAAA,EAAA,CACA,EAEA,SAAA,CACA,KAAA,MAAA,SAAA,CACA,EAEA,uBAAAC,EAAA,CAEA,MAAAC,EAAA,SAAA,cAAA,8BAAA,EACAA,IAAA,OACAA,EAAA,MAAA,QAAAD,EAAA,OAAA,KAEA,EAEAN,EAAAA,CAAA,CAEA"}
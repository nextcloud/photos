import{c as D,e as Q,f as J,x as Ut,w as U,Q as Dt,a7 as Lt,a8 as Nt,g as qt,ak as Bt,N as et,al as Pt,v as Et,l as wt,C as yt,ai as Ot,q as X,u as E,s as O}from"./preload-helper-3AjuMuUS.chunk.mjs";import{aq as zt,m as $t,ar as Ht,as as Wt,r as q,at as Gt,t as w,au as Xt,av as jt,n as L,O as K,H as T,aw as Ft,w as Zt,C as Vt,j as Rt,x as Yt,ax as Qt,F as j}from"./index-gMNm7ohC.chunk.mjs";import"./useIsMobile-CObDjo05.chunk.mjs";import{e as St}from"./index-yAeEl58F.chunk.mjs";import{a as tt,N as Jt}from"./NcActionButton-DykQxmXJ-C3Q_TP_S.chunk.mjs";const _t=D(xt());window.addEventListener("resize",()=>{_t.value=xt()});function xt(){return window.outerHeight===window.screen.height}Q(_t);var F={exports:{}},Kt=F.exports,st;function te(){return st||(st=1,function(t){(function(e){if(typeof s!="function"){var s=function(d){return d};s.nonNative=!0}const a=s("plaintext"),u=s("html"),p=s("comment"),f=/<(\w*)>/g,i=/<\/?([^\s\/>]+)/;function v(d,h,g){d=d||"",h=h||[],g=g||"";let m=r(h,g);return o(d,m)}function n(d,h){d=d||[],h=h||"";let g=r(d,h);return function(m){return o(m||"",g)}}v.init_streaming_mode=n;function r(d,h){return d=c(d),{allowable_tags:d,tag_replacement:h,state:a,tag_buffer:"",depth:0,in_quote_char:""}}function o(d,h){if(typeof d!="string")throw new TypeError("'html' parameter must be a string");let g=h.allowable_tags,m=h.tag_replacement,_=h.state,y=h.tag_buffer,M=h.depth,b=h.in_quote_char,A="";for(let P=0,kt=d.length;P<kt;P++){let x=d[P];if(_===a)switch(x){case"<":_=u,y+=x;break;default:A+=x;break}else if(_===u)switch(x){case"<":if(b)break;M++;break;case">":if(b)break;if(M){M--;break}b="",_=a,y+=">",g.has(l(y))?A+=y:A+=m,y="";break;case'"':case"'":x===b?b="":b=b||x,y+=x;break;case"-":y==="<!-"&&(_=p),y+=x;break;case" ":case`
`:if(y==="<"){_=a,A+="< ",y="";break}y+=x;break;default:y+=x;break}else if(_===p)switch(x){case">":y.slice(-2)=="--"&&(_=a),y="";break;default:y+=x;break}}return h.state=_,h.tag_buffer=y,h.depth=M,h.in_quote_char=b,A}function c(d){let h=new Set;if(typeof d=="string"){let g;for(;g=f.exec(d);)h.add(g[1])}else!s.nonNative&&typeof d[s.iterator]=="function"?h=new Set(d):typeof d.forEach=="function"&&d.forEach(h.add,h);return h}function l(d){let h=i.exec(d);return h?h[1].toLowerCase():null}t.exports?t.exports=v:e.striptags=v})(Kt)}(F)),F.exports}te();function B(t=document.body){const e=window.getComputedStyle(t).getPropertyValue("--background-invert-if-dark");return e!==void 0?e==="invert(100%)":!1}B();const ee=Symbol.for("nc:theme:enforced");function se(t){const e=J(()=>$t(t)??document.body),s=D(B(e.value)),a=Ht();function u(){s.value=B(e.value)}return Wt(e,u,{attributes:!0}),U(e,u),U(a,u,{immediate:!0}),Q(s)}const ne=zt(()=>se());function ae(){const t=ne(),e=Ut(ee,void 0);return J(()=>e?.value?e.value==="dark":t.value)}function bt(t){return Lt()?(Nt(t),!0):!1}function C(t){return typeof t=="function"?t():Dt(t)}const nt={mounted:"inserted",unmounted:"unbind"},Ct=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const re=Object.prototype.toString,ie=t=>re.call(t)==="[object Object]",k=()=>{},Z=oe();function oe(){var t,e;return Ct&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function ce(...t){if(t.length!==1)return qt(...t);const e=t[0];return typeof e=="function"?Q(Bt(()=>({get:e,set:k}))):D(e)}const Mt=Ct?window:void 0;function I(t){var e;const s=C(t);return(e=s?.$el)!=null?e:s}function N(...t){let e,s,a,u;if(typeof t[0]=="string"||Array.isArray(t[0])?([s,a,u]=t,e=Mt):[e,s,a,u]=t,!e)return k;Array.isArray(s)||(s=[s]),Array.isArray(a)||(a=[a]);const p=[],f=()=>{p.forEach(r=>r()),p.length=0},i=(r,o,c,l)=>(r.addEventListener(o,c,l),()=>r.removeEventListener(o,c,l)),v=U(()=>[I(e),C(u)],([r,o])=>{if(f(),!r)return;const c=ie(o)?{...o}:o;p.push(...s.flatMap(l=>a.map(d=>i(r,l,d,c))))},{immediate:!0,flush:"post"}),n=()=>{v(),f()};return bt(n),n}let at=!1;function rt(t,e,s={}){const{window:a=Mt,ignore:u=[],capture:p=!0,detectIframe:f=!1}=s;if(!a)return k;Z&&!at&&(at=!0,Array.from(a.document.body.children).forEach(d=>d.addEventListener("click",k)),a.document.documentElement.addEventListener("click",k));let i=!0;const v=d=>C(u).some(h=>{if(typeof h=="string")return Array.from(a.document.querySelectorAll(h)).some(g=>g===d.target||d.composedPath().includes(g));{const g=I(h);return g&&(d.target===g||d.composedPath().includes(g))}});function n(d){const h=C(d);return h&&h.$.subTree.shapeFlag===16}function r(d,h){const g=C(d),m=g.$.subTree&&g.$.subTree.children;return m==null||!Array.isArray(m)?!1:m.some(_=>_.el===h.target||h.composedPath().includes(_.el))}const o=d=>{const h=I(t);if(d.target!=null&&!(!(h instanceof Element)&&n(t)&&r(t,d))&&!(!h||h===d.target||d.composedPath().includes(h))){if(d.detail===0&&(i=!v(d)),!i){i=!0;return}e(d)}};let c=!1;const l=[N(a,"click",d=>{c||(c=!0,setTimeout(()=>{c=!1},0),o(d))},{passive:!0,capture:p}),N(a,"pointerdown",d=>{const h=I(t);i=!v(d)&&!!(h&&!d.composedPath().includes(h))},{passive:!0}),f&&N(a,"blur",d=>{setTimeout(()=>{var h;const g=I(t);((h=a.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!g?.contains(a.document.activeElement)&&e(d)},0)})].filter(Boolean);return()=>l.forEach(d=>d())}const ue={[nt.mounted](t,e){const s=!e.modifiers.bubble;if(typeof e.value=="function")t.__onClickOutside_stop=rt(t,e.value,{capture:s});else{const[a,u]=e.value;t.__onClickOutside_stop=rt(t,a,Object.assign({capture:s},u))}},[nt.unmounted](t){t.__onClickOutside_stop()}};function z(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function Tt(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const s=t.parentNode;return!s||s.tagName==="BODY"?!1:Tt(s)}}function le(t){const e=t||window.event,s=e.target;return Tt(s)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const $=new WeakMap;function de(t,e=!1){const s=D(e);let a=null,u="";U(ce(t),i=>{const v=z(C(i));if(v){const n=v;if($.get(n)||$.set(n,n.style.overflow),n.style.overflow!=="hidden"&&(u=n.style.overflow),n.style.overflow==="hidden")return s.value=!0;if(s.value)return n.style.overflow="hidden"}},{immediate:!0});const p=()=>{const i=z(C(t));!i||s.value||(Z&&(a=N(i,"touchmove",v=>{le(v)},{passive:!1})),i.style.overflow="hidden",s.value=!0)},f=()=>{const i=z(C(t));!i||!s.value||(Z&&a?.(),i.style.overflow=u,$.delete(i),s.value=!1)};return bt(f),J({get(){return s.value},set(i){i?p():f()}})}function he(){let t=!1;const e=D(!1);return(s,a)=>{if(e.value=a.value,t)return;t=!0;const u=de(s,a.value);U(e,p=>u.value=p)}}he();function pe(t,e){const s=(r,o)=>r.startsWith(o)?r.slice(o.length):r,a=(r,...o)=>o.reduce((c,l)=>s(c,l),r);if(!t)return null;const u=/^https?:\/\//.test(e),p=/^[a-z][a-z0-9+.-]*:.+/.test(e);if(!u&&p||u&&!e.startsWith(et())||!u&&!e.startsWith("/"))return null;const f=u?a(e,et(),"/index.php"):e,i=a(t.history.base,Pt(),"/index.php"),v=a(f,i)||"/",n=t.resolve(v).route;return n.matched.length?n.fullPath:null}function fe(t){return window._nc_contacts_menu_hooks?Object.values(window._nc_contacts_menu_hooks).filter(e=>e.enabled(t)):[]}var it={exports:{}},ot={exports:{}},ct;function ge(){return ct||(ct=1,function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(s,a){return s<<a|s>>>32-a},rotr:function(s,a){return s<<32-a|s>>>a},endian:function(s){if(s.constructor==Number)return e.rotl(s,8)&16711935|e.rotl(s,24)&4278255360;for(var a=0;a<s.length;a++)s[a]=e.endian(s[a]);return s},randomBytes:function(s){for(var a=[];s>0;s--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(s){for(var a=[],u=0,p=0;u<s.length;u++,p+=8)a[p>>>5]|=s[u]<<24-p%32;return a},wordsToBytes:function(s){for(var a=[],u=0;u<s.length*32;u+=8)a.push(s[u>>>5]>>>24-u%32&255);return a},bytesToHex:function(s){for(var a=[],u=0;u<s.length;u++)a.push((s[u]>>>4).toString(16)),a.push((s[u]&15).toString(16));return a.join("")},hexToBytes:function(s){for(var a=[],u=0;u<s.length;u+=2)a.push(parseInt(s.substr(u,2),16));return a},bytesToBase64:function(s){for(var a=[],u=0;u<s.length;u+=3)for(var p=s[u]<<16|s[u+1]<<8|s[u+2],f=0;f<4;f++)u*8+f*6<=s.length*8?a.push(t.charAt(p>>>6*(3-f)&63)):a.push("=");return a.join("")},base64ToBytes:function(s){s=s.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],u=0,p=0;u<s.length;p=++u%4)p!=0&&a.push((t.indexOf(s.charAt(u-1))&Math.pow(2,-2*p+8)-1)<<p*2|t.indexOf(s.charAt(u))>>>6-p*2);return a}};ot.exports=e}()),ot.exports}var H,ut;function lt(){if(ut)return H;ut=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var s=[],a=0;a<e.length;a++)s.push(e.charCodeAt(a)&255);return s},bytesToString:function(e){for(var s=[],a=0;a<e.length;a++)s.push(String.fromCharCode(e[a]));return s.join("")}}};return H=t,H}var W,dt;function ve(){if(dt)return W;dt=1,W=function(s){return s!=null&&(t(s)||e(s)||!!s._isBuffer)};function t(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function e(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&t(s.slice(0,0))}return W}var ht;function me(){return ht||(ht=1,function(){var t=ge(),e=lt().utf8,s=ve(),a=lt().bin,u=function(p,f){p.constructor==String?f&&f.encoding==="binary"?p=a.stringToBytes(p):p=e.stringToBytes(p):s(p)?p=Array.prototype.slice.call(p,0):!Array.isArray(p)&&p.constructor!==Uint8Array&&(p=p.toString());for(var i=t.bytesToWords(p),v=p.length*8,n=1732584193,r=-271733879,o=-1732584194,c=271733878,l=0;l<i.length;l++)i[l]=(i[l]<<8|i[l]>>>24)&16711935|(i[l]<<24|i[l]>>>8)&4278255360;i[v>>>5]|=128<<v%32,i[(v+64>>>9<<4)+14]=v;for(var d=u._ff,h=u._gg,g=u._hh,m=u._ii,l=0;l<i.length;l+=16){var _=n,y=r,M=o,b=c;n=d(n,r,o,c,i[l+0],7,-680876936),c=d(c,n,r,o,i[l+1],12,-389564586),o=d(o,c,n,r,i[l+2],17,606105819),r=d(r,o,c,n,i[l+3],22,-1044525330),n=d(n,r,o,c,i[l+4],7,-176418897),c=d(c,n,r,o,i[l+5],12,1200080426),o=d(o,c,n,r,i[l+6],17,-1473231341),r=d(r,o,c,n,i[l+7],22,-45705983),n=d(n,r,o,c,i[l+8],7,1770035416),c=d(c,n,r,o,i[l+9],12,-1958414417),o=d(o,c,n,r,i[l+10],17,-42063),r=d(r,o,c,n,i[l+11],22,-1990404162),n=d(n,r,o,c,i[l+12],7,1804603682),c=d(c,n,r,o,i[l+13],12,-40341101),o=d(o,c,n,r,i[l+14],17,-1502002290),r=d(r,o,c,n,i[l+15],22,1236535329),n=h(n,r,o,c,i[l+1],5,-165796510),c=h(c,n,r,o,i[l+6],9,-1069501632),o=h(o,c,n,r,i[l+11],14,643717713),r=h(r,o,c,n,i[l+0],20,-373897302),n=h(n,r,o,c,i[l+5],5,-701558691),c=h(c,n,r,o,i[l+10],9,38016083),o=h(o,c,n,r,i[l+15],14,-660478335),r=h(r,o,c,n,i[l+4],20,-405537848),n=h(n,r,o,c,i[l+9],5,568446438),c=h(c,n,r,o,i[l+14],9,-1019803690),o=h(o,c,n,r,i[l+3],14,-187363961),r=h(r,o,c,n,i[l+8],20,1163531501),n=h(n,r,o,c,i[l+13],5,-1444681467),c=h(c,n,r,o,i[l+2],9,-51403784),o=h(o,c,n,r,i[l+7],14,1735328473),r=h(r,o,c,n,i[l+12],20,-1926607734),n=g(n,r,o,c,i[l+5],4,-378558),c=g(c,n,r,o,i[l+8],11,-2022574463),o=g(o,c,n,r,i[l+11],16,1839030562),r=g(r,o,c,n,i[l+14],23,-35309556),n=g(n,r,o,c,i[l+1],4,-1530992060),c=g(c,n,r,o,i[l+4],11,1272893353),o=g(o,c,n,r,i[l+7],16,-155497632),r=g(r,o,c,n,i[l+10],23,-1094730640),n=g(n,r,o,c,i[l+13],4,681279174),c=g(c,n,r,o,i[l+0],11,-358537222),o=g(o,c,n,r,i[l+3],16,-722521979),r=g(r,o,c,n,i[l+6],23,76029189),n=g(n,r,o,c,i[l+9],4,-640364487),c=g(c,n,r,o,i[l+12],11,-421815835),o=g(o,c,n,r,i[l+15],16,530742520),r=g(r,o,c,n,i[l+2],23,-995338651),n=m(n,r,o,c,i[l+0],6,-198630844),c=m(c,n,r,o,i[l+7],10,1126891415),o=m(o,c,n,r,i[l+14],15,-1416354905),r=m(r,o,c,n,i[l+5],21,-57434055),n=m(n,r,o,c,i[l+12],6,1700485571),c=m(c,n,r,o,i[l+3],10,-1894986606),o=m(o,c,n,r,i[l+10],15,-1051523),r=m(r,o,c,n,i[l+1],21,-2054922799),n=m(n,r,o,c,i[l+8],6,1873313359),c=m(c,n,r,o,i[l+15],10,-30611744),o=m(o,c,n,r,i[l+6],15,-1560198380),r=m(r,o,c,n,i[l+13],21,1309151649),n=m(n,r,o,c,i[l+4],6,-145523070),c=m(c,n,r,o,i[l+11],10,-1120210379),o=m(o,c,n,r,i[l+2],15,718787259),r=m(r,o,c,n,i[l+9],21,-343485551),n=n+_>>>0,r=r+y>>>0,o=o+M>>>0,c=c+b>>>0}return t.endian([n,r,o,c])};u._ff=function(p,f,i,v,n,r,o){var c=p+(f&i|~f&v)+(n>>>0)+o;return(c<<r|c>>>32-r)+f},u._gg=function(p,f,i,v,n,r,o){var c=p+(f&v|i&~v)+(n>>>0)+o;return(c<<r|c>>>32-r)+f},u._hh=function(p,f,i,v,n,r,o){var c=p+(f^i^v)+(n>>>0)+o;return(c<<r|c>>>32-r)+f},u._ii=function(p,f,i,v,n,r,o){var c=p+(i^(f|~v))+(n>>>0)+o;return(c<<r|c>>>32-r)+f},u._blocksize=16,u._digestsize=16,it.exports=function(p,f){if(p==null)throw new Error("Illegal argument "+p);var i=t.wordsToBytes(u(p,f));return f&&f.asBytes?i:f&&f.asString?a.bytesToString(i):t.bytesToHex(i)}}()),it.exports}var we=me();const ye=Et(we);q(Gt);class S{constructor(e,s,a,u){this.r=e,this.g=s,this.b=a,this.name=u,this.r=Math.min(e,255),this.g=Math.min(s,255),this.b=Math.min(a,255),this.name=u}get color(){const e=s=>`00${s.toString(16)}`.slice(-2);return`#${e(this.r)}${e(this.g)}${e(this.b)}`}}function Se(t,e,s){return{r:(s.r-e.r)/t,g:(s.g-e.g)/t,b:(s.b-e.b)/t}}function G(t,e,s){const a=[];a.push(e);const u=Se(t,e,s);for(let p=1;p<t;p++){const f=Math.floor(e.r+u.r*p),i=Math.floor(e.g+u.g*p),v=Math.floor(e.b+u.b*p);a.push(new S(f,i,v))}return a}const V=new S(182,70,157,w("Purple")),R=new S(221,203,85,w("Gold")),Y=new S(0,130,201,w("Nextcloud blue")),os=new S(0,0,0,w("Black")),cs=new S(255,255,255,w("White")),us=[V,new S(191,103,139,w("Rosy brown")),new S(201,136,121,w("Feldspar")),new S(211,169,103,w("Whiskey")),R,new S(165,184,114,w("Olivine")),new S(110,166,143,w("Acapulco")),new S(55,148,172,w("Boston Blue")),Y,new S(45,115,190,w("Mariner")),new S(91,100,179,w("Blue Violet")),new S(136,85,168,w("Deluge"))];function _e(t){const e=G(t,V,R),s=G(t,R,Y),a=G(t,Y,V);return e.concat(s).concat(a)}function pt(t){let e=t.toLowerCase();e.match(/^([0-9a-f]{4}-?){8}$/)===null&&(e=ye(e)),e=e.replace(/[^0-9a-f]/g,"");const s=6,a=_e(s);function u(p,f){let i=0;const v=[];for(let n=0;n<p.length;n++)v.push(parseInt(p.charAt(n),16)%16);for(const n in v)i+=v[n];return parseInt(parseInt(i,10)%f,10)}return a[u(e,s*3)]}function xe(t,e){const s=(e?.size||64)<=64?64:512,a=e?.isGuest?"/guest":"",u=e?.isDarkTheme??B(document.body)?"/dark":"";return wt(`/avatar${a}/{user}/{size}${u}`,{user:t,size:s})}const ft=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
	<path fill="none" d="M-4-4h24v24H-4z" />
	<path fill="var(--color-warning)" d="M6.9.1C3 .6-.1 4-.1 8c0 4.4 3.6 8 8 8 4 0 7.4-3 8-6.9-1.2 1.3-2.9 2.1-4.7 2.1-3.5 0-6.4-2.9-6.4-6.4 0-1.9.8-3.6 2.1-4.7z" />
</svg>
`,be=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-away, var(--color-warning, #C88800))"
		d="m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`,Ce=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-busy, var(--color-error, #DB0606))"
		d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`,Me=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
	<path fill="none" d="M-4-4h24v24H-4V-4z" />
	<path fill="var(--color-border-error, var(--color-error))" d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z" />
	<path fill="#fdffff" d="M5 6.5h6c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5H5c-.8 0-1.5-.7-1.5-1.5S4.2 6.5 5 6.5z" />
</svg>
`,Te=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-busy, var(--color-error, #DB0606))"
		d="M280-440h400v-80H280v80ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`,gt=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
	<path fill="none" d="M-4-4h24v24H-4V-4z" />
	<path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 3.2c2.7 0 4.8 2.1 4.8 4.8s-2.1 4.8-4.8 4.8S3.2 10.7 3.2 8 5.3 3.2 8 3.2z" />
</svg>
`,vt=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-offline, var(--color-text-maxcontrast, #6B6B6B))"
		d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
</svg>
`,Ae=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
	<path fill="var(--color-success)" d="M4.8 11.2h6.4V4.8H4.8v6.4zM8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z" />
</svg>
`,Ie=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-online, var(--color-success, #2D7B41))"
		d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`;q(Xt),q(jt);function At(t){switch(t){case"away":return w("away");case"busy":return w("busy");case"dnd":return w("do not disturb");case"online":return w("online");case"invisible":return w("invisible");case"offline":return w("offline");default:return t}}const ke={online:T?Ae:Ie,away:T?ft:be,busy:T?ft:Ce,dnd:T?Me:Te,invisible:T?gt:vt,offline:T?gt:vt},Ue={name:"NcUserStatusIcon",props:{user:{type:String,default:null},status:{type:String,default:null,validator:t=>["online","away","busy","dnd","invisible","offline"].includes(t)},ariaHidden:{type:String,default:null,validator:t=>["true","false"].includes(t)}},data(){return{fetchedUserStatus:null}},computed:{activeStatus(){return this.status??this.fetchedUserStatus},activeSvg(){return ke[this.activeStatus]??null},ariaLabel(){return this.ariaHidden==="true"?null:w("User status: {status}",{status:At(this.activeStatus)})}},watch:{user:{immediate:!0,async handler(t){if(!t||!St()?.user_status?.enabled){this.fetchedUserStatus=null;return}try{const{data:e}=await K.get(yt("/apps/user_status/api/v1/statuses/{user}",{user:t}));this.fetchedUserStatus=e.ocs?.data?.status}catch{this.fetchedUserStatus=null}}}}};var De=function(){var t=this,e=t._self._c;return t.activeStatus?e("span",{staticClass:"user-status-icon",class:{"user-status-icon--invisible":["invisible","offline"].includes(t.status)},attrs:{role:"img","aria-hidden":t.ariaHidden,"aria-label":t.ariaLabel},domProps:{innerHTML:t._s(t.activeSvg)}}):t._e()},Le=[],Ne=L(Ue,De,Le,!1,null,"86b73d39");const qe=Ne.exports,Be={name:"NcActionLink",mixins:[tt],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}},props:{href:{type:String,required:!0,validator:t=>{try{return new URL(t)}catch{return t.startsWith("#")||t.startsWith("/")}}},download:{type:String,default:null},target:{type:String,default:"_self",validator:t=>t&&(!t.startsWith("_")||["_blank","_self","_parent","_top"].indexOf(t)>-1)},title:{type:String,default:null},ariaHidden:{type:Boolean,default:null}}};var Pe=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("a",{staticClass:"action-link focusable",attrs:{download:t.download,href:t.href,"aria-label":t.ariaLabel,target:t.target,title:t.title,rel:"nofollow noreferrer noopener",role:t.isInSemanticMenu&&"menuitem"},on:{click:t.onClick}},[t._t("icon",function(){return[e("span",{staticClass:"action-link__icon",class:[t.isIconUrl?"action-link__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?`url(${t.icon})`:null},attrs:{"aria-hidden":"true"}})]}),t.name?e("span",{staticClass:"action-link__longtext-wrapper"},[e("strong",{staticClass:"action-link__name"},[t._v(" "+t._s(t.name)+" ")]),e("br"),e("span",{staticClass:"action-link__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-link__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-link__text"},[t._v(t._s(t.text))]),t._e()],2)])},Ee=[],Oe=L(Be,Pe,Ee,!1,null,"86e09254");const ze=Oe.exports,$e={name:"NcActionRouter",mixins:[tt],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}},props:{to:{type:[String,Object],required:!0},exact:{type:Boolean,default:!1}}};var He=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("RouterLink",{staticClass:"action-router focusable",attrs:{to:t.to,"aria-label":t.ariaLabel,exact:t.exact,title:t.title,rel:"nofollow noreferrer noopener",role:t.isInSemanticMenu&&"menuitem"},nativeOn:{click:function(s){return t.onClick.apply(null,arguments)}}},[t._t("icon",function(){return[e("span",{staticClass:"action-router__icon",class:[t.isIconUrl?"action-router__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?`url(${t.icon})`:null},attrs:{"aria-hidden":"true"}})]}),t.name?e("span",{staticClass:"action-router__longtext-wrapper"},[e("strong",{staticClass:"action-router__name"},[t._v(" "+t._s(t.name)+" ")]),e("br"),e("span",{staticClass:"action-router__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-router__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-router__text"},[t._v(t._s(t.text))]),t._e()],2)],1)},We=[],Ge=L($e,He,We,!1,null,"4dae1ff7");const Xe=Ge.exports,je={name:"NcActionText",mixins:[tt],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}}};var Fe=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("span",{staticClass:"action-text",on:{click:t.onClick}},[t._t("icon",function(){return[t.icon!==""?e("span",{staticClass:"action-text__icon",class:[t.isIconUrl?"action-text__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?`url(${t.icon})`:null},attrs:{"aria-hidden":"true"}}):t._e()]}),t.name?e("span",{staticClass:"action-text__longtext-wrapper"},[e("strong",{staticClass:"action-text__name"},[t._v(" "+t._s(t.name)+" ")]),e("span",{staticClass:"action-text__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-text__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-text__text"},[t._v(t._s(t.text))]),t._e()],2)])},Ze=[],Ve=L(je,Fe,Ze,!1,null,"2fe7eb92");const Re=Ve.exports;q(Ft);const Ye={data(){return{hasStatus:!1,userStatus:{status:null,message:null,icon:null}}},methods:{async fetchUserStatus(t){if(!t)return;const e=St();if(!(!Object.hasOwn(e,"user_status")||!e.user_status.enabled)&&X())try{const{data:s}=await K.get(yt("apps/user_status/api/v1/statuses/{userId}",{userId:t})),{status:a,message:u,icon:p}=s.ocs.data;this.userStatus.status=a,this.userStatus.message=u||"",this.userStatus.icon=p||"",this.hasStatus=!0}catch(s){if(s.response.status===404&&s.response.data.ocs?.data?.length===0)return;j.error("Could not fetch user status",{error:s})}}}},It=Ot("nextcloud").persist().build();function Qe(t){const e=It.getItem("user-has-avatar."+t);return typeof e=="string"?!!e:null}function mt(t,e){t&&It.setItem("user-has-avatar."+t,e)}const Je={name:"NcAvatar",directives:{ClickOutside:ue},components:{IconDotsHorizontal:Qt,NcActions:Yt,NcButton:Rt,NcIconSvgWrapper:Vt,NcLoadingIcon:Zt,NcUserStatusIcon:qe},mixins:[Ye],props:{url:{type:String,default:void 0},iconClass:{type:String,default:void 0},user:{type:String,default:void 0},hideStatus:{type:Boolean,default:!1},showUserStatus:{type:Boolean,default:!0},verboseStatus:{type:Boolean,default:!1},showUserStatusCompact:{type:Boolean,default:!0},preloadedUserStatus:{type:Object,default:void 0},isGuest:{type:Boolean,default:!1},displayName:{type:String,default:void 0},size:{type:Number,default:32},noPlaceholder:{type:Boolean,default:!1},allowPlaceholder:{type:Boolean,default:!0},disableTooltip:{type:Boolean,default:!1},disableMenu:{type:Boolean,default:!1},tooltipMessage:{type:String,default:null},isNoUser:{type:Boolean,default:!1},menuContainer:{type:[Boolean,String,Object,Element],default:"body"}},setup(){return{isDarkTheme:ae()}},data(){return{avatarUrlLoaded:null,avatarSrcSetLoaded:null,userDoesNotExist:!1,isAvatarLoaded:!1,isMenuLoaded:!1,contactsMenuLoading:!1,contactsMenuData:{},contactsMenuActions:[],contactsMenuOpenState:!1}},computed:{avatarAriaLabel(){if(this.hasMenu)return this.canDisplayUserStatus||this.showUserStatusIconOnAvatar?w("Avatar of {displayName}, {status}",{displayName:this.displayName??this.user,status:At(this.userStatus.status)}):w("Avatar of {displayName}",{displayName:this.displayName??this.user})},canDisplayUserStatus(){return!this.hideStatus&&this.showUserStatus&&this.hasStatus&&["online","away","busy","dnd"].includes(this.userStatus.status)},showUserStatusIconOnAvatar(){return!this.hideStatus&&this.showUserStatus&&!this.verboseStatus&&this.showUserStatusCompact&&this.hasStatus&&this.userStatus.status!=="dnd"&&this.userStatus.icon},userIdentifier(){return this.isDisplayNameDefined?this.displayName:this.isUserDefined?this.user:""},isUserDefined(){return typeof this.user<"u"},isDisplayNameDefined(){return typeof this.displayName<"u"},isUrlDefined(){return typeof this.url<"u"},hasMenu(){return this.disableMenu?!1:this.isMenuLoaded?this.menu.length>0:!(this.user===X()?.uid||this.userDoesNotExist||this.url)},showInitials(){return!this.noPlaceholder&&this.allowPlaceholder&&this.userDoesNotExist&&!(this.iconClass||this.$slots.icon)},avatarStyle(){return{"--avatar-size":this.size+"px",lineHeight:this.showInitials?this.size+"px":0,fontSize:Math.round(this.size*.45)+"px"}},initialsWrapperStyle(){const{r:t,g:e,b:s}=pt(this.userIdentifier);return{backgroundColor:`rgba(${t}, ${e}, ${s}, 0.1)`}},initialsStyle(){const{r:t,g:e,b:s}=pt(this.userIdentifier);return{color:`rgb(${t}, ${e}, ${s})`}},tooltip(){return this.disableTooltip?!1:this.tooltipMessage?this.tooltipMessage:this.displayName},initials(){let t="?";if(this.showInitials){const e=this.userIdentifier.trim();if(e==="")return t;const s=e.match(/[\p{L}\p{N}\s]/gu);if(!s)return t;const a=s.join(""),u=a.lastIndexOf(" ");t=String.fromCodePoint(a.codePointAt(0)),u!==-1&&(t=t.concat(String.fromCodePoint(a.codePointAt(u+1))))}return t.toLocaleUpperCase()},menu(){const t=this.contactsMenuActions.map(s=>{const a=pe(this.$router,s.hyperlink);return{ncActionComponent:a?Xe:ze,ncActionComponentProps:a?{to:a,icon:s.icon}:{href:s.hyperlink,icon:s.icon},text:s.title}});for(const s of fe(this.contactsMenuData))try{t.push({ncActionComponent:Jt,ncActionComponentProps:{},ncActionComponentHandlers:{click:()=>s.callback(this.contactsMenuData)},text:s.displayName(this.contactsMenuData),iconSvg:s.iconSvg(this.contactsMenuData)})}catch(a){j.error(`Failed to render ContactsMenu action ${s.id}`,{error:a,action:s})}function e(s){const a=document.createTextNode(s),u=document.createElement("p");return u.appendChild(a),u.innerHTML}if(!this.hideStatus&&this.showUserStatus&&(this.userStatus.icon||this.userStatus.message)){const s=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
					<text x="50%" y="50%" text-anchor="middle" style="dominant-baseline: central; font-size: 85%">${e(this.userStatus.icon)}</text>
				</svg>`;return[{ncActionComponent:Re,ncActionComponentProps:{},iconSvg:this.userStatus.icon?s:void 0,text:`${this.userStatus.message}`}].concat(t)}return t}},watch:{url(){this.userDoesNotExist=!1,this.loadAvatarUrl()},user(){this.userDoesNotExist=!1,this.isMenuLoaded=!1,this.loadAvatarUrl()}},mounted(){this.loadAvatarUrl(),O("settings:avatar:updated",this.loadAvatarUrl),O("settings:display-name:updated",this.loadAvatarUrl),!this.hideStatus&&this.showUserStatus&&this.user&&!this.isNoUser&&(this.preloadedUserStatus?(this.userStatus.status=this.preloadedUserStatus.status||"",this.userStatus.message=this.preloadedUserStatus.message||"",this.userStatus.icon=this.preloadedUserStatus.icon||"",this.hasStatus=this.preloadedUserStatus.status!==null):this.fetchUserStatus(this.user),O("user_status:status.updated",this.handleUserStatusUpdated))},beforeDestroy(){E("settings:avatar:updated",this.loadAvatarUrl),E("settings:display-name:updated",this.loadAvatarUrl),E("user_status:status.updated",this.handleUserStatusUpdated)},methods:{t:w,handleUserStatusUpdated(t){this.user===t.userId&&(this.userStatus={status:t.status,icon:t.icon,message:t.message},this.hasStatus=t.status!==null)},async toggleMenu(t){t.type==="keydown"&&t.key!=="Enter"||(this.contactsMenuOpenState||await this.fetchContactsMenu(),this.contactsMenuOpenState=!this.contactsMenuOpenState)},closeMenu(){this.contactsMenuOpenState=!1},async fetchContactsMenu(){this.contactsMenuLoading=!0;try{const t=encodeURIComponent(this.user),{data:e}=await K.post(wt("contactsmenu/findOne"),`shareType=0&shareWith=${t}`);this.contactsMenuData=e,this.contactsMenuActions=e.topAction?[e.topAction].concat(e.actions):e.actions}catch{this.contactsMenuOpenState=!1}this.contactsMenuLoading=!1,this.isMenuLoaded=!0},loadAvatarUrl(){if(this.isAvatarLoaded=!1,!this.isUrlDefined&&(!this.isUserDefined||this.isNoUser||this.iconClass)){this.isAvatarLoaded=!0,this.userDoesNotExist=!0;return}if(this.isUrlDefined){this.updateImageIfValid(this.url);return}if(this.size<=64){const t=this.avatarUrlGenerator(this.user,64),e=[t+" 1x",this.avatarUrlGenerator(this.user,512)+" 8x"].join(", ");this.updateImageIfValid(t,e)}else{const t=this.avatarUrlGenerator(this.user,512);this.updateImageIfValid(t)}},avatarUrlGenerator(t,e){let s=xe(t,{size:e,isDarkTheme:this.isDarkTheme,isGuest:this.isGuest});return t===X()?.uid&&typeof window.oc_userconfig<"u"&&(s+="?v="+window.oc_userconfig.avatar.version),s},updateImageIfValid(t,e=null){const s=Qe(this.user);if(this.isUserDefined&&typeof s=="boolean"){this.isAvatarLoaded=!0,this.avatarUrlLoaded=t,e&&(this.avatarSrcSetLoaded=e),s===!1&&(this.userDoesNotExist=!0);return}const a=new Image;a.onload=()=>{this.avatarUrlLoaded=t,e&&(this.avatarSrcSetLoaded=e),this.isAvatarLoaded=!0,mt(this.user,!0)},a.onerror=u=>{j.debug("Invalid avatar url",{error:u,url:t}),this.avatarUrlLoaded=null,this.avatarSrcSetLoaded=null,this.userDoesNotExist=!0,this.isAvatarLoaded=!1,mt(this.user,!1)},e&&(a.srcset=e),a.src=t}}};var Ke=function(){var t=this,e=t._self._c;return e("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],staticClass:"avatardiv popovermenu-wrapper",class:{"avatardiv--unknown":t.userDoesNotExist,"avatardiv--with-menu":t.hasMenu,"avatardiv--with-menu-loading":t.contactsMenuLoading},style:t.avatarStyle,attrs:{title:t.tooltip}},[t._t("icon",function(){return[t.iconClass?e("span",{staticClass:"avatar-class-icon",class:t.iconClass}):t.isAvatarLoaded&&!t.userDoesNotExist?e("img",{attrs:{src:t.avatarUrlLoaded,srcset:t.avatarSrcSetLoaded,alt:""}}):t._e()]}),t.hasMenu&&t.menu.length===0?e("NcButton",{staticClass:"action-item action-item__menutoggle",attrs:{"aria-label":t.avatarAriaLabel,variant:"tertiary-no-background"},on:{click:t.toggleMenu},scopedSlots:t._u([{key:"icon",fn:function(){return[t.contactsMenuLoading?e("NcLoadingIcon"):e("IconDotsHorizontal",{attrs:{size:20}})]},proxy:!0}],null,!1,1269954734)}):t.hasMenu?e("NcActions",{attrs:{"aria-label":t.avatarAriaLabel,container:t.menuContainer,"force-menu":"","manual-open":"",open:t.contactsMenuOpenState,variant:"tertiary-no-background"},on:{"update:open":function(s){t.contactsMenuOpenState=s},click:t.toggleMenu},scopedSlots:t._u([t.contactsMenuLoading?{key:"icon",fn:function(){return[e("NcLoadingIcon")]},proxy:!0}:null],null,!0)},t._l(t.menu,function(s,a){return e(s.ncActionComponent,t._g(t._b({key:a,tag:"component",scopedSlots:t._u([s.iconSvg?{key:"icon",fn:function(){return[e("NcIconSvgWrapper",{attrs:{svg:s.iconSvg}})]},proxy:!0}:null],null,!0)},"component",s.ncActionComponentProps,!1),s.ncActionComponentHandlers),[t._v(" "+t._s(s.text)+" ")])}),1):t._e(),t.showUserStatusIconOnAvatar?e("span",{staticClass:"avatardiv__user-status avatardiv__user-status--icon"},[t._v(" "+t._s(t.userStatus.icon)+" ")]):t.canDisplayUserStatus?e("NcUserStatusIcon",{staticClass:"avatardiv__user-status",attrs:{status:t.userStatus.status,"aria-hidden":String(t.hasMenu)}}):t._e(),t.showInitials?e("span",{staticClass:"avatardiv__initials-wrapper",style:t.initialsWrapperStyle},[e("span",{staticClass:"avatardiv__initials",style:t.initialsStyle},[t._v(" "+t._s(t.initials)+" ")])]):t._e()],2)},ts=[],es=L(Je,Ke,ts,!1,null,"936fbce2");const ls=es.exports;export{os as C,ls as N,ze as a,Xe as b,cs as c,us as d,S as e,Ye as u};
//# sourceMappingURL=NcAvatar-D5nljVEA-BYg5Fe2z.chunk.mjs.map

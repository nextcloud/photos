import{g as q,n as mt,e as J,y as Ut,G as U,V as kt,S as tt,ad as Dt,q as Lt,k as yt,B as wt,ab as Nt,p as G,u as E,s as O}from"./vue.runtime.esm-DRcchs4r.chunk.mjs";import{ak as Bt,m as C,al as qt,am as Pt,an as et,ao as D,ap as j,aq as Et,ar as Ot,as as St,a6 as zt,r as N,at as $t,k as y,au as Ht,av as Wt,n as k,O as K,i as T,aw as Xt,w as Gt,C as jt,h as Ft,x as Zt,ax as Vt,H as F}from"./index-B3UZzq2i.chunk.mjs";import"./video-C3gyQg67.chunk.mjs";import{b as _t}from"./index-prnSPa6R.chunk.mjs";import{a as Q,N as Rt}from"./NcActionButton-1gSJfFUC-D1Ur_Sy0.chunk.mjs";const xt=q(bt());window.addEventListener("resize",()=>{xt.value=bt()});function bt(){return window.outerHeight===window.screen.height}mt(xt);var Z={exports:{}},Yt=Z.exports,st;function Jt(){return st||(st=1,(function(t){(function(e){if(typeof s!="function"){var s=function(d){return d};s.nonNative=!0}const r=s("plaintext"),l=s("html"),p=s("comment"),f=/<(\w*)>/g,i=/<\/?([^\s\/>]+)/;function g(d,h,v){d=d||"",h=h||[],v=v||"";let m=a(h,v);return o(d,m)}function n(d,h){d=d||[],h=h||"";let v=a(d,h);return function(m){return o(m||"",v)}}g.init_streaming_mode=n;function a(d,h){return d=c(d),{allowable_tags:d,tag_replacement:h,state:r,tag_buffer:"",depth:0,in_quote_char:""}}function o(d,h){if(typeof d!="string")throw new TypeError("'html' parameter must be a string");let v=h.allowable_tags,m=h.tag_replacement,_=h.state,w=h.tag_buffer,M=h.depth,b=h.in_quote_char,I="";for(let P=0,At=d.length;P<At;P++){let x=d[P];if(_===r)x==="<"?(_=l,w+=x):I+=x;else if(_===l)switch(x){case"<":if(b)break;M++;break;case">":if(b)break;if(M){M--;break}b="",_=r,w+=">",v.has(u(w))?I+=w:I+=m,w="";break;case'"':case"'":x===b?b="":b=b||x,w+=x;break;case"-":w==="<!-"&&(_=p),w+=x;break;case" ":case`
`:if(w==="<"){_=r,I+="< ",w="";break}w+=x;break;default:w+=x;break}else _===p&&(x===">"?(w.slice(-2)=="--"&&(_=r),w=""):w+=x)}return h.state=_,h.tag_buffer=w,h.depth=M,h.in_quote_char=b,I}function c(d){let h=new Set;if(typeof d=="string"){let v;for(;v=f.exec(d);)h.add(v[1])}else!s.nonNative&&typeof d[s.iterator]=="function"?h=new Set(d):typeof d.forEach=="function"&&d.forEach(h.add,h);return h}function u(d){let h=i.exec(d);return h?h[1].toLowerCase():null}t.exports?t.exports=g:e.striptags=g})(Yt)})(Z)),Z.exports}Jt();function B(t=document.body){const e=window.getComputedStyle(t).getPropertyValue("--background-invert-if-dark");return e!==void 0?e==="invert(100%)":!1}B();const Kt=Symbol.for("nc:theme:enforced");function Qt(t){const e=J(()=>C(t)??document.body),s=q(B(e.value)),r=qt();function l(){s.value=B(e.value)}return Pt(e,l,{attributes:!0}),U(e,l),U(r,l,{immediate:!0}),mt(s)}const te=Bt(()=>Qt());function ee(){const t=te(),e=Ut(Kt,void 0);return J(()=>e?.value?e.value==="dark":t.value)}kt.util.warn;const Ct=Et?window:void 0;function A(t){var e;const s=C(t);return(e=s?.$el)!=null?e:s}function L(...t){let e,s,r,l;if(typeof t[0]=="string"||Array.isArray(t[0])?([s,r,l]=t,e=Ct):[e,s,r,l]=t,!e)return D;Array.isArray(s)||(s=[s]),Array.isArray(r)||(r=[r]);const p=[],f=()=>{p.forEach(a=>a()),p.length=0},i=(a,o,c,u)=>(a.addEventListener(o,c,u),()=>a.removeEventListener(o,c,u)),g=U(()=>[A(e),C(l)],([a,o])=>{if(f(),!a)return;const c=Ot(o)?{...o}:o;p.push(...s.flatMap(u=>r.map(d=>i(a,u,d,c))))},{immediate:!0,flush:"post"}),n=()=>{g(),f()};return St(n),n}let nt=!1;function at(t,e,s={}){const{window:r=Ct,ignore:l=[],capture:p=!0,detectIframe:f=!1}=s;if(!r)return D;j&&!nt&&(nt=!0,Array.from(r.document.body.children).forEach(d=>d.addEventListener("click",D)),r.document.documentElement.addEventListener("click",D));let i=!0;const g=d=>C(l).some(h=>{if(typeof h=="string")return Array.from(r.document.querySelectorAll(h)).some(v=>v===d.target||d.composedPath().includes(v));{const v=A(h);return v&&(d.target===v||d.composedPath().includes(v))}});function n(d){const h=C(d);return h&&h.$.subTree.shapeFlag===16}function a(d,h){const v=C(d),m=v.$.subTree&&v.$.subTree.children;return m==null||!Array.isArray(m)?!1:m.some(_=>_.el===h.target||h.composedPath().includes(_.el))}const o=d=>{const h=A(t);if(d.target!=null&&!(!(h instanceof Element)&&n(t)&&a(t,d))&&!(!h||h===d.target||d.composedPath().includes(h))){if(d.detail===0&&(i=!g(d)),!i){i=!0;return}e(d)}};let c=!1;const u=[L(r,"click",d=>{c||(c=!0,setTimeout(()=>{c=!1},0),o(d))},{passive:!0,capture:p}),L(r,"pointerdown",d=>{const h=A(t);i=!g(d)&&!!(h&&!d.composedPath().includes(h))},{passive:!0}),f&&L(r,"blur",d=>{setTimeout(()=>{var h;const v=A(t);((h=r.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!v?.contains(r.document.activeElement)&&e(d)},0)})].filter(Boolean);return()=>u.forEach(d=>d())}const se={[et.mounted](t,e){const s=!e.modifiers.bubble;if(typeof e.value=="function")t.__onClickOutside_stop=at(t,e.value,{capture:s});else{const[r,l]=e.value;t.__onClickOutside_stop=at(t,r,Object.assign({capture:s},l))}},[et.unmounted](t){t.__onClickOutside_stop()}};function z(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function Mt(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const s=t.parentNode;return!s||s.tagName==="BODY"?!1:Mt(s)}}function ne(t){const e=t||window.event,s=e.target;return Mt(s)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const $=new WeakMap;function ae(t,e=!1){const s=q(e);let r=null,l="";U(zt(t),i=>{const g=z(C(i));if(g){const n=g;if($.get(n)||$.set(n,n.style.overflow),n.style.overflow!=="hidden"&&(l=n.style.overflow),n.style.overflow==="hidden")return s.value=!0;if(s.value)return n.style.overflow="hidden"}},{immediate:!0});const p=()=>{const i=z(C(t));!i||s.value||(j&&(r=L(i,"touchmove",g=>{ne(g)},{passive:!1})),i.style.overflow="hidden",s.value=!0)},f=()=>{const i=z(C(t));!i||!s.value||(j&&r?.(),i.style.overflow=l,$.delete(i),s.value=!1)};return St(f),J({get(){return s.value},set(i){i?p():f()}})}function re(){let t=!1;const e=q(!1);return(s,r)=>{if(e.value=r.value,t)return;t=!0;const l=ae(s,r.value);U(e,p=>l.value=p)}}re();function ie(t,e){const s=(a,o)=>a.startsWith(o)?a.slice(o.length):a,r=(a,...o)=>o.reduce((c,u)=>s(c,u),a);if(!t)return null;const l=/^https?:\/\//.test(e),p=/^[a-z][a-z0-9+.-]*:.+/.test(e);if(!l&&p||l&&!e.startsWith(tt())||!l&&!e.startsWith("/"))return null;const f=l?r(e,tt(),"/index.php"):e,i=r(t.history.base,Dt(),"/index.php"),g=r(f,i)||"/",n=t.resolve(g).route;return n.matched.length?n.fullPath:null}function oe(t){return window._nc_contacts_menu_hooks?Object.values(window._nc_contacts_menu_hooks).filter(e=>e.enabled(t)):[]}var rt={exports:{}},it={exports:{}},ot;function ce(){return ot||(ot=1,(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(s,r){return s<<r|s>>>32-r},rotr:function(s,r){return s<<32-r|s>>>r},endian:function(s){if(s.constructor==Number)return e.rotl(s,8)&16711935|e.rotl(s,24)&4278255360;for(var r=0;r<s.length;r++)s[r]=e.endian(s[r]);return s},randomBytes:function(s){for(var r=[];s>0;s--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(s){for(var r=[],l=0,p=0;l<s.length;l++,p+=8)r[p>>>5]|=s[l]<<24-p%32;return r},wordsToBytes:function(s){for(var r=[],l=0;l<s.length*32;l+=8)r.push(s[l>>>5]>>>24-l%32&255);return r},bytesToHex:function(s){for(var r=[],l=0;l<s.length;l++)r.push((s[l]>>>4).toString(16)),r.push((s[l]&15).toString(16));return r.join("")},hexToBytes:function(s){for(var r=[],l=0;l<s.length;l+=2)r.push(parseInt(s.substr(l,2),16));return r},bytesToBase64:function(s){for(var r=[],l=0;l<s.length;l+=3)for(var p=s[l]<<16|s[l+1]<<8|s[l+2],f=0;f<4;f++)l*8+f*6<=s.length*8?r.push(t.charAt(p>>>6*(3-f)&63)):r.push("=");return r.join("")},base64ToBytes:function(s){s=s.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],l=0,p=0;l<s.length;p=++l%4)p!=0&&r.push((t.indexOf(s.charAt(l-1))&Math.pow(2,-2*p+8)-1)<<p*2|t.indexOf(s.charAt(l))>>>6-p*2);return r}};it.exports=e})()),it.exports}var H,ct;function lt(){if(ct)return H;ct=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var s=[],r=0;r<e.length;r++)s.push(e.charCodeAt(r)&255);return s},bytesToString:function(e){for(var s=[],r=0;r<e.length;r++)s.push(String.fromCharCode(e[r]));return s.join("")}}};return H=t,H}var W,ut;function le(){if(ut)return W;ut=1,W=function(s){return s!=null&&(t(s)||e(s)||!!s._isBuffer)};function t(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function e(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&t(s.slice(0,0))}return W}var dt;function ue(){return dt||(dt=1,(function(){var t=ce(),e=lt().utf8,s=le(),r=lt().bin,l=function(p,f){p.constructor==String?f&&f.encoding==="binary"?p=r.stringToBytes(p):p=e.stringToBytes(p):s(p)?p=Array.prototype.slice.call(p,0):!Array.isArray(p)&&p.constructor!==Uint8Array&&(p=p.toString());for(var i=t.bytesToWords(p),g=p.length*8,n=1732584193,a=-271733879,o=-1732584194,c=271733878,u=0;u<i.length;u++)i[u]=(i[u]<<8|i[u]>>>24)&16711935|(i[u]<<24|i[u]>>>8)&4278255360;i[g>>>5]|=128<<g%32,i[(g+64>>>9<<4)+14]=g;for(var d=l._ff,h=l._gg,v=l._hh,m=l._ii,u=0;u<i.length;u+=16){var _=n,w=a,M=o,b=c;n=d(n,a,o,c,i[u+0],7,-680876936),c=d(c,n,a,o,i[u+1],12,-389564586),o=d(o,c,n,a,i[u+2],17,606105819),a=d(a,o,c,n,i[u+3],22,-1044525330),n=d(n,a,o,c,i[u+4],7,-176418897),c=d(c,n,a,o,i[u+5],12,1200080426),o=d(o,c,n,a,i[u+6],17,-1473231341),a=d(a,o,c,n,i[u+7],22,-45705983),n=d(n,a,o,c,i[u+8],7,1770035416),c=d(c,n,a,o,i[u+9],12,-1958414417),o=d(o,c,n,a,i[u+10],17,-42063),a=d(a,o,c,n,i[u+11],22,-1990404162),n=d(n,a,o,c,i[u+12],7,1804603682),c=d(c,n,a,o,i[u+13],12,-40341101),o=d(o,c,n,a,i[u+14],17,-1502002290),a=d(a,o,c,n,i[u+15],22,1236535329),n=h(n,a,o,c,i[u+1],5,-165796510),c=h(c,n,a,o,i[u+6],9,-1069501632),o=h(o,c,n,a,i[u+11],14,643717713),a=h(a,o,c,n,i[u+0],20,-373897302),n=h(n,a,o,c,i[u+5],5,-701558691),c=h(c,n,a,o,i[u+10],9,38016083),o=h(o,c,n,a,i[u+15],14,-660478335),a=h(a,o,c,n,i[u+4],20,-405537848),n=h(n,a,o,c,i[u+9],5,568446438),c=h(c,n,a,o,i[u+14],9,-1019803690),o=h(o,c,n,a,i[u+3],14,-187363961),a=h(a,o,c,n,i[u+8],20,1163531501),n=h(n,a,o,c,i[u+13],5,-1444681467),c=h(c,n,a,o,i[u+2],9,-51403784),o=h(o,c,n,a,i[u+7],14,1735328473),a=h(a,o,c,n,i[u+12],20,-1926607734),n=v(n,a,o,c,i[u+5],4,-378558),c=v(c,n,a,o,i[u+8],11,-2022574463),o=v(o,c,n,a,i[u+11],16,1839030562),a=v(a,o,c,n,i[u+14],23,-35309556),n=v(n,a,o,c,i[u+1],4,-1530992060),c=v(c,n,a,o,i[u+4],11,1272893353),o=v(o,c,n,a,i[u+7],16,-155497632),a=v(a,o,c,n,i[u+10],23,-1094730640),n=v(n,a,o,c,i[u+13],4,681279174),c=v(c,n,a,o,i[u+0],11,-358537222),o=v(o,c,n,a,i[u+3],16,-722521979),a=v(a,o,c,n,i[u+6],23,76029189),n=v(n,a,o,c,i[u+9],4,-640364487),c=v(c,n,a,o,i[u+12],11,-421815835),o=v(o,c,n,a,i[u+15],16,530742520),a=v(a,o,c,n,i[u+2],23,-995338651),n=m(n,a,o,c,i[u+0],6,-198630844),c=m(c,n,a,o,i[u+7],10,1126891415),o=m(o,c,n,a,i[u+14],15,-1416354905),a=m(a,o,c,n,i[u+5],21,-57434055),n=m(n,a,o,c,i[u+12],6,1700485571),c=m(c,n,a,o,i[u+3],10,-1894986606),o=m(o,c,n,a,i[u+10],15,-1051523),a=m(a,o,c,n,i[u+1],21,-2054922799),n=m(n,a,o,c,i[u+8],6,1873313359),c=m(c,n,a,o,i[u+15],10,-30611744),o=m(o,c,n,a,i[u+6],15,-1560198380),a=m(a,o,c,n,i[u+13],21,1309151649),n=m(n,a,o,c,i[u+4],6,-145523070),c=m(c,n,a,o,i[u+11],10,-1120210379),o=m(o,c,n,a,i[u+2],15,718787259),a=m(a,o,c,n,i[u+9],21,-343485551),n=n+_>>>0,a=a+w>>>0,o=o+M>>>0,c=c+b>>>0}return t.endian([n,a,o,c])};l._ff=function(p,f,i,g,n,a,o){var c=p+(f&i|~f&g)+(n>>>0)+o;return(c<<a|c>>>32-a)+f},l._gg=function(p,f,i,g,n,a,o){var c=p+(f&g|i&~g)+(n>>>0)+o;return(c<<a|c>>>32-a)+f},l._hh=function(p,f,i,g,n,a,o){var c=p+(f^i^g)+(n>>>0)+o;return(c<<a|c>>>32-a)+f},l._ii=function(p,f,i,g,n,a,o){var c=p+(i^(f|~g))+(n>>>0)+o;return(c<<a|c>>>32-a)+f},l._blocksize=16,l._digestsize=16,rt.exports=function(p,f){if(p==null)throw new Error("Illegal argument "+p);var i=t.wordsToBytes(l(p,f));return f&&f.asBytes?i:f&&f.asString?r.bytesToString(i):t.bytesToHex(i)}})()),rt.exports}var de=ue();const he=Lt(de);N($t);class S{constructor(e,s,r,l){this.r=e,this.g=s,this.b=r,this.name=l,this.r=Math.min(e,255),this.g=Math.min(s,255),this.b=Math.min(r,255),this.name=l}get color(){const e=s=>`00${s.toString(16)}`.slice(-2);return`#${e(this.r)}${e(this.g)}${e(this.b)}`}}function pe(t,e,s){return{r:(s.r-e.r)/t,g:(s.g-e.g)/t,b:(s.b-e.b)/t}}function X(t,e,s){const r=[];r.push(e);const l=pe(t,e,s);for(let p=1;p<t;p++){const f=Math.floor(e.r+l.r*p),i=Math.floor(e.g+l.g*p),g=Math.floor(e.b+l.b*p);r.push(new S(f,i,g))}return r}const V=new S(182,70,157,y("Purple")),R=new S(221,203,85,y("Gold")),Y=new S(0,130,201,y("Nextcloud blue")),ts=new S(0,0,0,y("Black")),es=new S(255,255,255,y("White")),ss=[V,new S(191,103,139,y("Rosy brown")),new S(201,136,121,y("Feldspar")),new S(211,169,103,y("Whiskey")),R,new S(165,184,114,y("Olivine")),new S(110,166,143,y("Acapulco")),new S(55,148,172,y("Boston Blue")),Y,new S(45,115,190,y("Mariner")),new S(91,100,179,y("Blue Violet")),new S(136,85,168,y("Deluge"))];function fe(t){const e=X(t,V,R),s=X(t,R,Y),r=X(t,Y,V);return e.concat(s).concat(r)}function ht(t){let e=t.toLowerCase();e.match(/^([0-9a-f]{4}-?){8}$/)===null&&(e=he(e)),e=e.replace(/[^0-9a-f]/g,"");const s=6,r=fe(s);function l(p,f){let i=0;const g=[];for(let n=0;n<p.length;n++)g.push(parseInt(p.charAt(n),16)%16);for(const n in g)i+=g[n];return parseInt(parseInt(i,10)%f,10)}return r[l(e,s*3)]}function ve(t,e){const s=(e?.size||64)<=64?64:512,r=e?.isGuest?"/guest":"",l=e?.isDarkTheme??B(document.body)?"/dark":"";return yt(`/avatar${r}/{user}/{size}${l}`,{user:t,size:s})}const pt=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
	<path fill="none" d="M-4-4h24v24H-4z" />
	<path fill="var(--color-warning)" d="M6.9.1C3 .6-.1 4-.1 8c0 4.4 3.6 8 8 8 4 0 7.4-3 8-6.9-1.2 1.3-2.9 2.1-4.7 2.1-3.5 0-6.4-2.9-6.4-6.4 0-1.9.8-3.6 2.1-4.7z" />
</svg>
`,ge=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-away, var(--color-warning, #C88800))"
		d="m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`,me=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-busy, var(--color-error, #DB0606))"
		d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`,ye=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
	<path fill="none" d="M-4-4h24v24H-4V-4z" />
	<path fill="var(--color-border-error, var(--color-error))" d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z" />
	<path fill="#fdffff" d="M5 6.5h6c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5H5c-.8 0-1.5-.7-1.5-1.5S4.2 6.5 5 6.5z" />
</svg>
`,we=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-busy, var(--color-error, #DB0606))"
		d="M280-440h400v-80H280v80ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`,ft=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
	<path fill="none" d="M-4-4h24v24H-4V-4z" />
	<path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 3.2c2.7 0 4.8 2.1 4.8 4.8s-2.1 4.8-4.8 4.8S3.2 10.7 3.2 8 5.3 3.2 8 3.2z" />
</svg>
`,vt=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-offline, var(--color-text-maxcontrast, #6B6B6B))"
		d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
</svg>
`,Se=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">
	<path fill="var(--color-success)" d="M4.8 11.2h6.4V4.8H4.8v6.4zM8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z" />
</svg>
`,_e=`<!--
  - SPDX-FileCopyrightText: 2020 Google Inc.
  - SPDX-License-Identifier: Apache-2.0
-->
<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">
	<path
		fill="var(--user-status-color-online, var(--color-success, #2D7B41))"
		d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>
</svg>
`;N(Ht),N(Wt);function Tt(t){switch(t){case"away":return y("away");case"busy":return y("busy");case"dnd":return y("do not disturb");case"online":return y("online");case"invisible":return y("invisible");case"offline":return y("offline");default:return t}}const xe={online:T?Se:_e,away:T?pt:ge,busy:T?pt:me,dnd:T?ye:we,invisible:T?ft:vt,offline:T?ft:vt},be={name:"NcUserStatusIcon",props:{user:{type:String,default:null},status:{type:String,default:null,validator:t=>["online","away","busy","dnd","invisible","offline"].includes(t)},ariaHidden:{type:String,default:null,validator:t=>["true","false"].includes(t)}},data(){return{fetchedUserStatus:null}},computed:{activeStatus(){return this.status??this.fetchedUserStatus},activeSvg(){return xe[this.activeStatus]??null},ariaLabel(){return this.ariaHidden==="true"?null:y("User status: {status}",{status:Tt(this.activeStatus)})}},watch:{user:{immediate:!0,async handler(t){if(!t||!_t()?.user_status?.enabled){this.fetchedUserStatus=null;return}try{const{data:e}=await K.get(wt("/apps/user_status/api/v1/statuses/{user}",{user:t}));this.fetchedUserStatus=e.ocs?.data?.status}catch{this.fetchedUserStatus=null}}}}};var Ce=function(){var t=this,e=t._self._c;return t.activeStatus?e("span",{staticClass:"user-status-icon",class:{"user-status-icon--invisible":["invisible","offline"].includes(t.status)},attrs:{role:"img","aria-hidden":t.ariaHidden,"aria-label":t.ariaLabel},domProps:{innerHTML:t._s(t.activeSvg)}}):t._e()},Me=[],Te=k(be,Ce,Me,!1,null,"86b73d39");const Ie=Te.exports,Ae={name:"NcActionLink",mixins:[Q],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}},props:{href:{type:String,required:!0,validator:t=>{try{return new URL(t)}catch{return t.startsWith("#")||t.startsWith("/")}}},download:{type:String,default:null},target:{type:String,default:"_self",validator:t=>t&&(!t.startsWith("_")||["_blank","_self","_parent","_top"].indexOf(t)>-1)},title:{type:String,default:null},ariaHidden:{type:Boolean,default:null}}};var Ue=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("a",{staticClass:"action-link focusable",attrs:{download:t.download,href:t.href,"aria-label":t.ariaLabel,target:t.target,title:t.title,rel:"nofollow noreferrer noopener",role:t.isInSemanticMenu&&"menuitem"},on:{click:t.onClick}},[t._t("icon",function(){return[e("span",{staticClass:"action-link__icon",class:[t.isIconUrl?"action-link__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?`url(${t.icon})`:null},attrs:{"aria-hidden":"true"}})]}),t.name?e("span",{staticClass:"action-link__longtext-wrapper"},[e("strong",{staticClass:"action-link__name"},[t._v(" "+t._s(t.name)+" ")]),e("br"),e("span",{staticClass:"action-link__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-link__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-link__text"},[t._v(t._s(t.text))]),t._e()],2)])},ke=[],De=k(Ae,Ue,ke,!1,null,"86e09254");const Le=De.exports,Ne={name:"NcActionRouter",mixins:[Q],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}},props:{to:{type:[String,Object],required:!0},exact:{type:Boolean,default:!1}}};var Be=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("RouterLink",{staticClass:"action-router focusable",attrs:{to:t.to,"aria-label":t.ariaLabel,exact:t.exact,title:t.title,rel:"nofollow noreferrer noopener",role:t.isInSemanticMenu&&"menuitem"},nativeOn:{click:function(s){return t.onClick.apply(null,arguments)}}},[t._t("icon",function(){return[e("span",{staticClass:"action-router__icon",class:[t.isIconUrl?"action-router__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?`url(${t.icon})`:null},attrs:{"aria-hidden":"true"}})]}),t.name?e("span",{staticClass:"action-router__longtext-wrapper"},[e("strong",{staticClass:"action-router__name"},[t._v(" "+t._s(t.name)+" ")]),e("br"),e("span",{staticClass:"action-router__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-router__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-router__text"},[t._v(t._s(t.text))]),t._e()],2)],1)},qe=[],Pe=k(Ne,Be,qe,!1,null,"4dae1ff7");const Ee=Pe.exports,Oe={name:"NcActionText",mixins:[Q],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}}};var ze=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("span",{staticClass:"action-text",on:{click:t.onClick}},[t._t("icon",function(){return[t.icon!==""?e("span",{staticClass:"action-text__icon",class:[t.isIconUrl?"action-text__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?`url(${t.icon})`:null},attrs:{"aria-hidden":"true"}}):t._e()]}),t.name?e("span",{staticClass:"action-text__longtext-wrapper"},[e("strong",{staticClass:"action-text__name"},[t._v(" "+t._s(t.name)+" ")]),e("span",{staticClass:"action-text__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-text__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-text__text"},[t._v(t._s(t.text))]),t._e()],2)])},$e=[],He=k(Oe,ze,$e,!1,null,"2fe7eb92");const We=He.exports;N(Xt);const Xe={data(){return{hasStatus:!1,userStatus:{status:null,message:null,icon:null}}},methods:{async fetchUserStatus(t){if(!t)return;const e=_t();if(!(!Object.hasOwn(e,"user_status")||!e.user_status.enabled)&&G())try{const{data:s}=await K.get(wt("apps/user_status/api/v1/statuses/{userId}",{userId:t}));this.setUserStatus(s.ocs.data)}catch(s){if(s.response.status===404&&s.response.data.ocs?.data?.length===0)return;F.error("Could not fetch user status",{error:s})}},setUserStatus({status:t,message:e,icon:s}){this.userStatus.status=t||"",this.userStatus.message=e||"",this.userStatus.icon=s||"",this.hasStatus=!!t}}},It=Nt("nextcloud").persist().build();function Ge(t){const e=It.getItem("user-has-avatar."+t);return typeof e=="string"?!!e:null}function gt(t,e){t&&It.setItem("user-has-avatar."+t,e)}const je={name:"NcAvatar",directives:{ClickOutside:se},components:{IconDotsHorizontal:Vt,NcActions:Zt,NcButton:Ft,NcIconSvgWrapper:jt,NcLoadingIcon:Gt,NcUserStatusIcon:Ie},mixins:[Xe],props:{url:{type:String,default:void 0},iconClass:{type:String,default:void 0},user:{type:String,default:void 0},hideStatus:{type:Boolean,default:!1},showUserStatus:{type:Boolean,default:!0},verboseStatus:{type:Boolean,default:!1},showUserStatusCompact:{type:Boolean,default:!0},preloadedUserStatus:{type:Object,default:void 0},isGuest:{type:Boolean,default:!1},displayName:{type:String,default:void 0},size:{type:Number,default:32},noPlaceholder:{type:Boolean,default:!1},allowPlaceholder:{type:Boolean,default:!0},disableTooltip:{type:Boolean,default:!1},disableMenu:{type:Boolean,default:!1},tooltipMessage:{type:String,default:null},isNoUser:{type:Boolean,default:!1},menuContainer:{type:[Boolean,String,Object,Element],default:"body"}},setup(){return{isDarkTheme:ee()}},data(){return{avatarUrlLoaded:null,avatarSrcSetLoaded:null,userDoesNotExist:!1,isAvatarLoaded:!1,isMenuLoaded:!1,contactsMenuLoading:!1,contactsMenuData:{},contactsMenuActions:[],contactsMenuOpenState:!1}},computed:{avatarAriaLabel(){if(this.hasMenu)return this.canDisplayUserStatus||this.showUserStatusIconOnAvatar?y("Avatar of {displayName}, {status}",{displayName:this.displayName??this.user,status:Tt(this.userStatus.status)}):y("Avatar of {displayName}",{displayName:this.displayName??this.user})},canDisplayUserStatus(){return!this.hideStatus&&this.showUserStatus&&this.hasStatus&&["online","away","busy","dnd"].includes(this.userStatus.status)},showUserStatusIconOnAvatar(){return!this.hideStatus&&this.showUserStatus&&!this.verboseStatus&&this.showUserStatusCompact&&this.hasStatus&&this.userStatus.status!=="dnd"&&this.userStatus.icon},userIdentifier(){return this.isDisplayNameDefined?this.displayName:this.isUserDefined?this.user:""},isUserDefined(){return typeof this.user<"u"},isDisplayNameDefined(){return typeof this.displayName<"u"},isUrlDefined(){return typeof this.url<"u"},hasMenu(){return this.disableMenu?!1:this.isMenuLoaded?this.menu.length>0:!(this.user===G()?.uid||this.userDoesNotExist||this.url)},showInitials(){return!this.noPlaceholder&&this.allowPlaceholder&&this.userDoesNotExist&&!(this.iconClass||this.$scopedSlots.icon)},avatarStyle(){return{"--avatar-size":this.size+"px",lineHeight:this.showInitials?this.size+"px":0,fontSize:Math.round(this.size*.45)+"px"}},initialsWrapperStyle(){const{r:t,g:e,b:s}=ht(this.userIdentifier);return{backgroundColor:`rgba(${t}, ${e}, ${s}, 0.1)`}},initialsStyle(){const{r:t,g:e,b:s}=ht(this.userIdentifier);return{color:`rgb(${t}, ${e}, ${s})`}},tooltip(){return this.disableTooltip?!1:this.tooltipMessage?this.tooltipMessage:this.displayName},initials(){let t="?";if(this.showInitials){const e=this.userIdentifier.trim();if(e==="")return t;const s=e.match(/[\p{L}\p{N}\s]/gu);if(!s)return t;const r=s.join(""),l=r.lastIndexOf(" ");t=String.fromCodePoint(r.codePointAt(0)),l!==-1&&(t=t.concat(String.fromCodePoint(r.codePointAt(l+1))))}return t.toLocaleUpperCase()},menu(){const t=this.contactsMenuActions.map(s=>{const r=ie(this.$router,s.hyperlink);return{ncActionComponent:r?Ee:Le,ncActionComponentProps:r?{to:r,icon:s.icon}:{href:s.hyperlink,icon:s.icon},text:s.title}});for(const s of oe(this.contactsMenuData))try{t.push({ncActionComponent:Rt,ncActionComponentProps:{},ncActionComponentHandlers:{click:()=>s.callback(this.contactsMenuData)},text:s.displayName(this.contactsMenuData),iconSvg:s.iconSvg(this.contactsMenuData)})}catch(r){F.error(`Failed to render ContactsMenu action ${s.id}`,{error:r,action:s})}function e(s){const r=document.createTextNode(s),l=document.createElement("p");return l.appendChild(r),l.innerHTML}if(!this.hideStatus&&this.showUserStatus&&(this.userStatus.icon||this.userStatus.message)){const s=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
					<text x="50%" y="50%" text-anchor="middle" style="dominant-baseline: central; font-size: 85%">${e(this.userStatus.icon)}</text>
				</svg>`;return[{ncActionComponent:We,ncActionComponentProps:{},iconSvg:this.userStatus.icon?s:void 0,text:`${this.userStatus.message}`}].concat(t)}return t}},watch:{url(){this.userDoesNotExist=!1,this.loadAvatarUrl()},user(){this.userDoesNotExist=!1,this.isMenuLoaded=!1,this.loadAvatarUrl()}},mounted(){this.loadAvatarUrl(),O("settings:avatar:updated",this.loadAvatarUrl),O("settings:display-name:updated",this.loadAvatarUrl),!this.hideStatus&&this.showUserStatus&&this.user&&!this.isNoUser?(this.preloadedUserStatus?this.setUserStatus(this.preloadedUserStatus):this.fetchUserStatus(this.user),O("user_status:status.updated",this.handleUserStatusUpdated)):!this.hideStatus&&this.preloadedUserStatus&&this.setUserStatus(this.preloadedUserStatus)},beforeDestroy(){E("settings:avatar:updated",this.loadAvatarUrl),E("settings:display-name:updated",this.loadAvatarUrl),E("user_status:status.updated",this.handleUserStatusUpdated)},methods:{t:y,handleUserStatusUpdated(t){this.user===t.userId&&(this.userStatus={status:t.status,icon:t.icon,message:t.message},this.hasStatus=t.status!==null)},async toggleMenu(t){t.type==="keydown"&&t.key!=="Enter"||(this.contactsMenuOpenState||await this.fetchContactsMenu(),this.contactsMenuOpenState=!this.contactsMenuOpenState)},closeMenu(){this.contactsMenuOpenState=!1},async fetchContactsMenu(){this.contactsMenuLoading=!0;try{const t=encodeURIComponent(this.user),{data:e}=await K.post(yt("contactsmenu/findOne"),`shareType=0&shareWith=${t}`);this.contactsMenuData=e,this.contactsMenuActions=e.topAction?[e.topAction].concat(e.actions):e.actions}catch{this.contactsMenuOpenState=!1}this.contactsMenuLoading=!1,this.isMenuLoaded=!0},loadAvatarUrl(){if(this.isAvatarLoaded=!1,!this.isUrlDefined&&(!this.isUserDefined||this.isNoUser||this.iconClass||this.$scopedSlots.icon)){this.isAvatarLoaded=!0,this.userDoesNotExist=!0;return}if(this.isUrlDefined){this.updateImageIfValid(this.url);return}if(this.size<=64){const t=this.avatarUrlGenerator(this.user,64),e=[t+" 1x",this.avatarUrlGenerator(this.user,512)+" 8x"].join(", ");this.updateImageIfValid(t,e)}else{const t=this.avatarUrlGenerator(this.user,512);this.updateImageIfValid(t)}},avatarUrlGenerator(t,e){let s=ve(t,{size:e,isDarkTheme:this.isDarkTheme,isGuest:this.isGuest});return t===G()?.uid&&typeof window.oc_userconfig<"u"&&(s+="?v="+window.oc_userconfig.avatar.version),s},updateImageIfValid(t,e=null){const s=Ge(this.user);if(this.isUserDefined&&typeof s=="boolean"){this.isAvatarLoaded=!0,this.avatarUrlLoaded=t,e&&(this.avatarSrcSetLoaded=e),s===!1&&(this.userDoesNotExist=!0);return}const r=new Image;r.onload=()=>{this.avatarUrlLoaded=t,e&&(this.avatarSrcSetLoaded=e),this.isAvatarLoaded=!0,gt(this.user,!0)},r.onerror=l=>{F.debug("Invalid avatar url",{error:l,url:t}),this.avatarUrlLoaded=null,this.avatarSrcSetLoaded=null,this.userDoesNotExist=!0,this.isAvatarLoaded=!1,gt(this.user,!1)},e&&(r.srcset=e),r.src=t}}};var Fe=function(){var t=this,e=t._self._c;return e("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],staticClass:"avatardiv popovermenu-wrapper",class:{"avatardiv--unknown":t.userDoesNotExist,"avatardiv--with-menu":t.hasMenu,"avatardiv--with-menu-loading":t.contactsMenuLoading},style:t.avatarStyle,attrs:{title:t.tooltip}},[t._t("icon",function(){return[t.iconClass?e("span",{staticClass:"avatar-class-icon",class:t.iconClass}):t.isAvatarLoaded&&!t.userDoesNotExist?e("img",{attrs:{src:t.avatarUrlLoaded,srcset:t.avatarSrcSetLoaded,alt:""}}):t._e()]}),t.hasMenu&&t.menu.length===0?e("NcButton",{staticClass:"action-item action-item__menutoggle",attrs:{"aria-label":t.avatarAriaLabel,variant:"tertiary-no-background"},on:{click:t.toggleMenu},scopedSlots:t._u([{key:"icon",fn:function(){return[t.contactsMenuLoading?e("NcLoadingIcon"):e("IconDotsHorizontal",{attrs:{size:20}})]},proxy:!0}],null,!1,1269954734)}):t.hasMenu?e("NcActions",{attrs:{"aria-label":t.avatarAriaLabel,container:t.menuContainer,"force-menu":"","manual-open":"",open:t.contactsMenuOpenState,variant:"tertiary-no-background"},on:{"update:open":function(s){t.contactsMenuOpenState=s},click:t.toggleMenu},scopedSlots:t._u([t.contactsMenuLoading?{key:"icon",fn:function(){return[e("NcLoadingIcon")]},proxy:!0}:null],null,!0)},t._l(t.menu,function(s,r){return e(s.ncActionComponent,t._g(t._b({key:r,tag:"component",scopedSlots:t._u([s.iconSvg?{key:"icon",fn:function(){return[e("NcIconSvgWrapper",{attrs:{svg:s.iconSvg}})]},proxy:!0}:null],null,!0)},"component",s.ncActionComponentProps,!1),s.ncActionComponentHandlers),[t._v(" "+t._s(s.text)+" ")])}),1):t._e(),t.showUserStatusIconOnAvatar?e("span",{staticClass:"avatardiv__user-status avatardiv__user-status--icon"},[t._v(" "+t._s(t.userStatus.icon)+" ")]):t.canDisplayUserStatus?e("NcUserStatusIcon",{staticClass:"avatardiv__user-status",attrs:{status:t.userStatus.status,"aria-hidden":String(t.hasMenu)}}):t._e(),t.showInitials?e("span",{staticClass:"avatardiv__initials-wrapper",style:t.initialsWrapperStyle},[e("span",{staticClass:"avatardiv__initials",style:t.initialsStyle},[t._v(" "+t._s(t.initials)+" ")])]):t._e()],2)},Ze=[],Ve=k(je,Fe,Ze,!1,null,"a4de1e87");const ns=Ve.exports;export{ts as C,ns as N,Le as a,Ee as b,es as c,ss as d,S as e,Xe as u};
//# sourceMappingURL=NcAvatar-OCD_HmOb-7eWmy1iz.chunk.mjs.map

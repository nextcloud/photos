var Nt=Object.defineProperty;var et=Object.getOwnPropertySymbols;var Bt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable;var st=(t,e,s)=>e in t?Nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,nt=(t,e)=>{for(var s in e||(e={}))Bt.call(e,s)&&st(t,s,e[s]);if(et)for(var s of et(e))qt.call(e,s)&&st(t,s,e[s]);return t};import{g as D,n as J,e as K,y as Pt,H as k,E as Et,a2 as Ot,a3 as zt,f as $t,ad as Ht,T as at,ae as Wt,q as Gt,k as _t,B as xt,ab as Xt,p as X,u as E,s as O}from"./vue.runtime.esm-OiydnxB-.chunk.mjs";import{al as jt,m as Ft,am as Zt,an as Vt,r as B,ao as Rt,k as w,ap as Yt,aq as Jt,n as L,O as Q,i as M,ar as Kt,w as Qt,C as te,h as ee,x as se,as as ne,H as j}from"./index-ycziVi-9.chunk.mjs";import"./video-BDfR9rZh.chunk.mjs";import{b as bt}from"./index-Dt0wq4bO.chunk.mjs";import{a as tt,N as ae}from"./NcActionButton-1gSJfFUC-DtAb5qOU.chunk.mjs";const Ct=D(Tt());window.addEventListener("resize",()=>{Ct.value=Tt()});function Tt(){return window.outerHeight===window.screen.height}J(Ct);var F={exports:{}},re=F.exports,rt;function ie(){return rt||(rt=1,function(t){(function(e){if(typeof s!="function"){var s=function(d){return d};s.nonNative=!0}const n=s("plaintext"),u=s("html"),h=s("comment"),f=/<(\w*)>/g,i=/<\/?([^\s\/>]+)/;function v(d,p,g){d=d||"",p=p||[],g=g||"";let m=r(p,g);return o(d,m)}function a(d,p){d=d||[],p=p||"";let g=r(d,p);return function(m){return o(m||"",g)}}v.init_streaming_mode=a;function r(d,p){return d=c(d),{allowable_tags:d,tag_replacement:p,state:n,tag_buffer:"",depth:0,in_quote_char:""}}function o(d,p){if(typeof d!="string")throw new TypeError("'html' parameter must be a string");let g=p.allowable_tags,m=p.tag_replacement,_=p.state,y=p.tag_buffer,T=p.depth,b=p.in_quote_char,A="";for(let P=0,Lt=d.length;P<Lt;P++){let x=d[P];if(_===n)switch(x){case"<":_=u,y+=x;break;default:A+=x;break}else if(_===u)switch(x){case"<":if(b)break;T++;break;case">":if(b)break;if(T){T--;break}b="",_=n,y+=">",g.has(l(y))?A+=y:A+=m,y="";break;case'"':case"'":x===b?b="":b=b||x,y+=x;break;case"-":y==="<!-"&&(_=h),y+=x;break;case" ":case"\n":if(y==="<"){_=n,A+="< ",y="";break}y+=x;break;default:y+=x;break}else if(_===h)switch(x){case">":y.slice(-2)=="--"&&(_=n),y="";break;default:y+=x;break}}return p.state=_,p.tag_buffer=y,p.depth=T,p.in_quote_char=b,A}function c(d){let p=new Set;if(typeof d=="string"){let g;for(;g=f.exec(d);)p.add(g[1])}else!s.nonNative&&typeof d[s.iterator]=="function"?p=new Set(d):typeof d.forEach=="function"&&d.forEach(p.add,p);return p}function l(d){let p=i.exec(d);return p?p[1].toLowerCase():null}t.exports?t.exports=v:e.striptags=v})(re)}(F)),F.exports}ie();function q(t=document.body){const e=window.getComputedStyle(t).getPropertyValue("--background-invert-if-dark");return e!==void 0?e==="invert(100%)":!1}q();const oe=Symbol.for("nc:theme:enforced");function ce(t){const e=K(()=>{var h;return(h=Ft(t))!=null?h:document.body}),s=D(q(e.value)),n=Zt();function u(){s.value=q(e.value)}return Vt(e,u,{attributes:!0}),k(e,u),k(n,u,{immediate:!0}),J(s)}const ue=jt(()=>ce());function le(){const t=ue(),e=Pt(oe,void 0);return K(()=>e!=null&&e.value?e.value==="dark":t.value)}function Mt(t){return Ot()?(zt(t),!0):!1}function C(t){return typeof t=="function"?t():Et(t)}const it={mounted:"inserted",unmounted:"unbind"},At=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const de=Object.prototype.toString,he=t=>de.call(t)==="[object Object]",U=()=>{},Z=pe();function pe(){var t,e;return At&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function fe(...t){if(t.length!==1)return $t(...t);const e=t[0];return typeof e=="function"?J(Ht(()=>({get:e,set:U}))):D(e)}const It=At?window:void 0;function I(t){var e;const s=C(t);return(e=s==null?void 0:s.$el)!=null?e:s}function N(...t){let e,s,n,u;if(typeof t[0]=="string"||Array.isArray(t[0])?([s,n,u]=t,e=It):[e,s,n,u]=t,!e)return U;Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]);const h=[],f=()=>{h.forEach(r=>r()),h.length=0},i=(r,o,c,l)=>(r.addEventListener(o,c,l),()=>r.removeEventListener(o,c,l)),v=k(()=>[I(e),C(u)],([r,o])=>{if(f(),!r)return;const c=he(o)?nt({},o):o;h.push(...s.flatMap(l=>n.map(d=>i(r,l,d,c))))},{immediate:!0,flush:"post"}),a=()=>{v(),f()};return Mt(a),a}let ot=!1;function ct(t,e,s={}){const{window:n=It,ignore:u=[],capture:h=!0,detectIframe:f=!1}=s;if(!n)return U;Z&&!ot&&(ot=!0,Array.from(n.document.body.children).forEach(d=>d.addEventListener("click",U)),n.document.documentElement.addEventListener("click",U));let i=!0;const v=d=>C(u).some(p=>{if(typeof p=="string")return Array.from(n.document.querySelectorAll(p)).some(g=>g===d.target||d.composedPath().includes(g));{const g=I(p);return g&&(d.target===g||d.composedPath().includes(g))}});function a(d){const p=C(d);return p&&p.$.subTree.shapeFlag===16}function r(d,p){const g=C(d),m=g.$.subTree&&g.$.subTree.children;return m==null||!Array.isArray(m)?!1:m.some(_=>_.el===p.target||p.composedPath().includes(_.el))}const o=d=>{const p=I(t);if(d.target!=null&&!(!(p instanceof Element)&&a(t)&&r(t,d))&&!(!p||p===d.target||d.composedPath().includes(p))){if(d.detail===0&&(i=!v(d)),!i){i=!0;return}e(d)}};let c=!1;const l=[N(n,"click",d=>{c||(c=!0,setTimeout(()=>{c=!1},0),o(d))},{passive:!0,capture:h}),N(n,"pointerdown",d=>{const p=I(t);i=!v(d)&&!!(p&&!d.composedPath().includes(p))},{passive:!0}),f&&N(n,"blur",d=>{setTimeout(()=>{var p;const g=I(t);((p=n.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(g!=null&&g.contains(n.document.activeElement))&&e(d)},0)})].filter(Boolean);return()=>l.forEach(d=>d())}const ge={[it.mounted](t,e){const s=!e.modifiers.bubble;if(typeof e.value=="function")t.__onClickOutside_stop=ct(t,e.value,{capture:s});else{const[n,u]=e.value;t.__onClickOutside_stop=ct(t,n,Object.assign({capture:s},u))}},[it.unmounted](t){t.__onClickOutside_stop()}};function z(t){return typeof Window<"u"&&t instanceof Window?t.document.documentElement:typeof Document<"u"&&t instanceof Document?t.documentElement:t}function Ut(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const s=t.parentNode;return!s||s.tagName==="BODY"?!1:Ut(s)}}function ve(t){const e=t||window.event,s=e.target;return Ut(s)?!1:e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)}const $=new WeakMap;function me(t,e=!1){const s=D(e);let n=null,u="";k(fe(t),i=>{const v=z(C(i));if(v){const a=v;if($.get(a)||$.set(a,a.style.overflow),a.style.overflow!=="hidden"&&(u=a.style.overflow),a.style.overflow==="hidden")return s.value=!0;if(s.value)return a.style.overflow="hidden"}},{immediate:!0});const h=()=>{const i=z(C(t));!i||s.value||(Z&&(n=N(i,"touchmove",v=>{ve(v)},{passive:!1})),i.style.overflow="hidden",s.value=!0)},f=()=>{const i=z(C(t));!i||!s.value||(Z&&(n==null||n()),i.style.overflow=u,$.delete(i),s.value=!1)};return Mt(f),K({get(){return s.value},set(i){i?h():f()}})}function we(){let t=!1;const e=D(!1);return(s,n)=>{if(e.value=n.value,t)return;t=!0;const u=me(s,n.value);k(e,h=>u.value=h)}}we();function ye(t,e){const s=(r,o)=>r.startsWith(o)?r.slice(o.length):r,n=(r,...o)=>o.reduce((c,l)=>s(c,l),r);if(!t)return null;const u=/^https?:\/\//.test(e),h=/^[a-z][a-z0-9+.-]*:.+/.test(e);if(!u&&h||u&&!e.startsWith(at())||!u&&!e.startsWith("/"))return null;const f=u?n(e,at(),"/index.php"):e,i=n(t.history.base,Wt(),"/index.php"),v=n(f,i)||"/",a=t.resolve(v).route;return a.matched.length?a.fullPath:null}function Se(t){return window._nc_contacts_menu_hooks?Object.values(window._nc_contacts_menu_hooks).filter(e=>e.enabled(t)):[]}var ut={exports:{}},lt={exports:{}},dt;function _e(){return dt||(dt=1,function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(s,n){return s<<n|s>>>32-n},rotr:function(s,n){return s<<32-n|s>>>n},endian:function(s){if(s.constructor==Number)return e.rotl(s,8)&16711935|e.rotl(s,24)&4278255360;for(var n=0;n<s.length;n++)s[n]=e.endian(s[n]);return s},randomBytes:function(s){for(var n=[];s>0;s--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(s){for(var n=[],u=0,h=0;u<s.length;u++,h+=8)n[h>>>5]|=s[u]<<24-h%32;return n},wordsToBytes:function(s){for(var n=[],u=0;u<s.length*32;u+=8)n.push(s[u>>>5]>>>24-u%32&255);return n},bytesToHex:function(s){for(var n=[],u=0;u<s.length;u++)n.push((s[u]>>>4).toString(16)),n.push((s[u]&15).toString(16));return n.join("")},hexToBytes:function(s){for(var n=[],u=0;u<s.length;u+=2)n.push(parseInt(s.substr(u,2),16));return n},bytesToBase64:function(s){for(var n=[],u=0;u<s.length;u+=3)for(var h=s[u]<<16|s[u+1]<<8|s[u+2],f=0;f<4;f++)u*8+f*6<=s.length*8?n.push(t.charAt(h>>>6*(3-f)&63)):n.push("=");return n.join("")},base64ToBytes:function(s){s=s.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],u=0,h=0;u<s.length;h=++u%4)h!=0&&n.push((t.indexOf(s.charAt(u-1))&Math.pow(2,-2*h+8)-1)<<h*2|t.indexOf(s.charAt(u))>>>6-h*2);return n}};lt.exports=e}()),lt.exports}var H,ht;function pt(){if(ht)return H;ht=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var s=[],n=0;n<e.length;n++)s.push(e.charCodeAt(n)&255);return s},bytesToString:function(e){for(var s=[],n=0;n<e.length;n++)s.push(String.fromCharCode(e[n]));return s.join("")}}};return H=t,H}var W,ft;function xe(){if(ft)return W;ft=1,W=function(s){return s!=null&&(t(s)||e(s)||!!s._isBuffer)};function t(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function e(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&t(s.slice(0,0))}return W}var gt;function be(){return gt||(gt=1,function(){var t=_e(),e=pt().utf8,s=xe(),n=pt().bin,u=function(h,f){h.constructor==String?f&&f.encoding==="binary"?h=n.stringToBytes(h):h=e.stringToBytes(h):s(h)?h=Array.prototype.slice.call(h,0):!Array.isArray(h)&&h.constructor!==Uint8Array&&(h=h.toString());for(var i=t.bytesToWords(h),v=h.length*8,a=1732584193,r=-271733879,o=-1732584194,c=271733878,l=0;l<i.length;l++)i[l]=(i[l]<<8|i[l]>>>24)&16711935|(i[l]<<24|i[l]>>>8)&4278255360;i[v>>>5]|=128<<v%32,i[(v+64>>>9<<4)+14]=v;for(var d=u._ff,p=u._gg,g=u._hh,m=u._ii,l=0;l<i.length;l+=16){var _=a,y=r,T=o,b=c;a=d(a,r,o,c,i[l+0],7,-680876936),c=d(c,a,r,o,i[l+1],12,-389564586),o=d(o,c,a,r,i[l+2],17,606105819),r=d(r,o,c,a,i[l+3],22,-1044525330),a=d(a,r,o,c,i[l+4],7,-176418897),c=d(c,a,r,o,i[l+5],12,1200080426),o=d(o,c,a,r,i[l+6],17,-1473231341),r=d(r,o,c,a,i[l+7],22,-45705983),a=d(a,r,o,c,i[l+8],7,1770035416),c=d(c,a,r,o,i[l+9],12,-1958414417),o=d(o,c,a,r,i[l+10],17,-42063),r=d(r,o,c,a,i[l+11],22,-1990404162),a=d(a,r,o,c,i[l+12],7,1804603682),c=d(c,a,r,o,i[l+13],12,-40341101),o=d(o,c,a,r,i[l+14],17,-1502002290),r=d(r,o,c,a,i[l+15],22,1236535329),a=p(a,r,o,c,i[l+1],5,-165796510),c=p(c,a,r,o,i[l+6],9,-1069501632),o=p(o,c,a,r,i[l+11],14,643717713),r=p(r,o,c,a,i[l+0],20,-373897302),a=p(a,r,o,c,i[l+5],5,-701558691),c=p(c,a,r,o,i[l+10],9,38016083),o=p(o,c,a,r,i[l+15],14,-660478335),r=p(r,o,c,a,i[l+4],20,-405537848),a=p(a,r,o,c,i[l+9],5,568446438),c=p(c,a,r,o,i[l+14],9,-1019803690),o=p(o,c,a,r,i[l+3],14,-187363961),r=p(r,o,c,a,i[l+8],20,1163531501),a=p(a,r,o,c,i[l+13],5,-1444681467),c=p(c,a,r,o,i[l+2],9,-51403784),o=p(o,c,a,r,i[l+7],14,1735328473),r=p(r,o,c,a,i[l+12],20,-1926607734),a=g(a,r,o,c,i[l+5],4,-378558),c=g(c,a,r,o,i[l+8],11,-2022574463),o=g(o,c,a,r,i[l+11],16,1839030562),r=g(r,o,c,a,i[l+14],23,-35309556),a=g(a,r,o,c,i[l+1],4,-1530992060),c=g(c,a,r,o,i[l+4],11,1272893353),o=g(o,c,a,r,i[l+7],16,-155497632),r=g(r,o,c,a,i[l+10],23,-1094730640),a=g(a,r,o,c,i[l+13],4,681279174),c=g(c,a,r,o,i[l+0],11,-358537222),o=g(o,c,a,r,i[l+3],16,-722521979),r=g(r,o,c,a,i[l+6],23,76029189),a=g(a,r,o,c,i[l+9],4,-640364487),c=g(c,a,r,o,i[l+12],11,-421815835),o=g(o,c,a,r,i[l+15],16,530742520),r=g(r,o,c,a,i[l+2],23,-995338651),a=m(a,r,o,c,i[l+0],6,-198630844),c=m(c,a,r,o,i[l+7],10,1126891415),o=m(o,c,a,r,i[l+14],15,-1416354905),r=m(r,o,c,a,i[l+5],21,-57434055),a=m(a,r,o,c,i[l+12],6,1700485571),c=m(c,a,r,o,i[l+3],10,-1894986606),o=m(o,c,a,r,i[l+10],15,-1051523),r=m(r,o,c,a,i[l+1],21,-2054922799),a=m(a,r,o,c,i[l+8],6,1873313359),c=m(c,a,r,o,i[l+15],10,-30611744),o=m(o,c,a,r,i[l+6],15,-1560198380),r=m(r,o,c,a,i[l+13],21,1309151649),a=m(a,r,o,c,i[l+4],6,-145523070),c=m(c,a,r,o,i[l+11],10,-1120210379),o=m(o,c,a,r,i[l+2],15,718787259),r=m(r,o,c,a,i[l+9],21,-343485551),a=a+_>>>0,r=r+y>>>0,o=o+T>>>0,c=c+b>>>0}return t.endian([a,r,o,c])};u._ff=function(h,f,i,v,a,r,o){var c=h+(f&i|~f&v)+(a>>>0)+o;return(c<<r|c>>>32-r)+f},u._gg=function(h,f,i,v,a,r,o){var c=h+(f&v|i&~v)+(a>>>0)+o;return(c<<r|c>>>32-r)+f},u._hh=function(h,f,i,v,a,r,o){var c=h+(f^i^v)+(a>>>0)+o;return(c<<r|c>>>32-r)+f},u._ii=function(h,f,i,v,a,r,o){var c=h+(i^(f|~v))+(a>>>0)+o;return(c<<r|c>>>32-r)+f},u._blocksize=16,u._digestsize=16,ut.exports=function(h,f){if(h==null)throw new Error("Illegal argument "+h);var i=t.wordsToBytes(u(h,f));return f&&f.asBytes?i:f&&f.asString?n.bytesToString(i):t.bytesToHex(i)}}()),ut.exports}var Ce=be();const Te=Gt(Ce);B(Rt);class S{constructor(e,s,n,u){this.r=e,this.g=s,this.b=n,this.name=u,this.r=Math.min(e,255),this.g=Math.min(s,255),this.b=Math.min(n,255),this.name=u}get color(){const e=s=>"00".concat(s.toString(16)).slice(-2);return"#".concat(e(this.r)).concat(e(this.g)).concat(e(this.b))}}function Me(t,e,s){return{r:(s.r-e.r)/t,g:(s.g-e.g)/t,b:(s.b-e.b)/t}}function G(t,e,s){const n=[];n.push(e);const u=Me(t,e,s);for(let h=1;h<t;h++){const f=Math.floor(e.r+u.r*h),i=Math.floor(e.g+u.g*h),v=Math.floor(e.b+u.b*h);n.push(new S(f,i,v))}return n}const V=new S(182,70,157,w("Purple")),R=new S(221,203,85,w("Gold")),Y=new S(0,130,201,w("Nextcloud blue")),fs=new S(0,0,0,w("Black")),gs=new S(255,255,255,w("White")),vs=[V,new S(191,103,139,w("Rosy brown")),new S(201,136,121,w("Feldspar")),new S(211,169,103,w("Whiskey")),R,new S(165,184,114,w("Olivine")),new S(110,166,143,w("Acapulco")),new S(55,148,172,w("Boston Blue")),Y,new S(45,115,190,w("Mariner")),new S(91,100,179,w("Blue Violet")),new S(136,85,168,w("Deluge"))];function Ae(t){const e=G(t,V,R),s=G(t,R,Y),n=G(t,Y,V);return e.concat(s).concat(n)}function vt(t){let e=t.toLowerCase();e.match(/^([0-9a-f]{4}-?){8}$/)===null&&(e=Te(e)),e=e.replace(/[^0-9a-f]/g,"");const s=6,n=Ae(s);function u(h,f){let i=0;const v=[];for(let a=0;a<h.length;a++)v.push(parseInt(h.charAt(a),16)%16);for(const a in v)i+=v[a];return parseInt(parseInt(i,10)%f,10)}return n[u(e,s*3)]}function Ie(t,e){var h;const s=((e==null?void 0:e.size)||64)<=64?64:512,n=e!=null&&e.isGuest?"/guest":"",u=((h=e==null?void 0:e.isDarkTheme)!=null?h:q(document.body))?"/dark":"";return _t("/avatar".concat(n,"/{user}/{size}").concat(u),{user:t,size:s})}const mt='<!--\n  - SPDX-FileCopyrightText: 2020 Google Inc.\n  - SPDX-License-Identifier: Apache-2.0\n-->\n<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n	<path fill="none" d="M-4-4h24v24H-4z" />\n	<path fill="var(--color-warning)" d="M6.9.1C3 .6-.1 4-.1 8c0 4.4 3.6 8 8 8 4 0 7.4-3 8-6.9-1.2 1.3-2.9 2.1-4.7 2.1-3.5 0-6.4-2.9-6.4-6.4 0-1.9.8-3.6 2.1-4.7z" />\n</svg>\n',Ue='<!--\n  - SPDX-FileCopyrightText: 2020 Google Inc.\n  - SPDX-License-Identifier: Apache-2.0\n-->\n<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">\n	<path\n		fill="var(--user-status-color-away, var(--color-warning, #C88800))"\n		d="m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>\n</svg>\n',ke='<!--\n  - SPDX-FileCopyrightText: 2020 Google Inc.\n  - SPDX-License-Identifier: Apache-2.0\n-->\n<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">\n	<path\n		fill="var(--user-status-color-busy, var(--color-error, #DB0606))"\n		d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>\n</svg>\n',De='<!--\n  - SPDX-FileCopyrightText: 2020 Google Inc.\n  - SPDX-License-Identifier: Apache-2.0\n-->\n<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n	<path fill="none" d="M-4-4h24v24H-4V-4z" />\n	<path fill="var(--color-border-error, var(--color-error))" d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z" />\n	<path fill="#fdffff" d="M5 6.5h6c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5H5c-.8 0-1.5-.7-1.5-1.5S4.2 6.5 5 6.5z" />\n</svg>\n',Le='<!--\n  - SPDX-FileCopyrightText: 2020 Google Inc.\n  - SPDX-License-Identifier: Apache-2.0\n-->\n<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">\n	<path\n		fill="var(--user-status-color-busy, var(--color-error, #DB0606))"\n		d="M280-440h400v-80H280v80ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>\n</svg>\n',wt='<!--\n  - SPDX-FileCopyrightText: 2020 Google Inc.\n  - SPDX-License-Identifier: Apache-2.0\n-->\n<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n	<path fill="none" d="M-4-4h24v24H-4V-4z" />\n	<path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 3.2c2.7 0 4.8 2.1 4.8 4.8s-2.1 4.8-4.8 4.8S3.2 10.7 3.2 8 5.3 3.2 8 3.2z" />\n</svg>\n',yt='<!--\n  - SPDX-FileCopyrightText: 2020 Google Inc.\n  - SPDX-License-Identifier: Apache-2.0\n-->\n<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">\n	<path\n		fill="var(--user-status-color-offline, var(--color-text-maxcontrast, #6B6B6B))"\n		d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>\n</svg>\n',Ne='<!--\n  - SPDX-FileCopyrightText: 2020 Google Inc.\n  - SPDX-License-Identifier: Apache-2.0\n-->\n<svg viewBox="-1 -1 18 18" width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n	<path fill="var(--color-success)" d="M4.8 11.2h6.4V4.8H4.8v6.4zM8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z" />\n</svg>\n',Be='<!--\n  - SPDX-FileCopyrightText: 2020 Google Inc.\n  - SPDX-License-Identifier: Apache-2.0\n-->\n<svg viewBox="0 -960 960 960" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg">\n	<path\n		fill="var(--user-status-color-online, var(--color-success, #2D7B41))"\n		d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"/>\n</svg>\n';B(Yt),B(Jt);function kt(t){switch(t){case"away":return w("away");case"busy":return w("busy");case"dnd":return w("do not disturb");case"online":return w("online");case"invisible":return w("invisible");case"offline":return w("offline");default:return t}}const qe={online:M?Ne:Be,away:M?mt:Ue,busy:M?mt:ke,dnd:M?De:Le,invisible:M?wt:yt,offline:M?wt:yt},Pe={name:"NcUserStatusIcon",props:{user:{type:String,default:null},status:{type:String,default:null,validator:t=>["online","away","busy","dnd","invisible","offline"].includes(t)},ariaHidden:{type:String,default:null,validator:t=>["true","false"].includes(t)}},data(){return{fetchedUserStatus:null}},computed:{activeStatus(){var t;return(t=this.status)!=null?t:this.fetchedUserStatus},activeSvg(){var t;return(t=qe[this.activeStatus])!=null?t:null},ariaLabel(){return this.ariaHidden==="true"?null:w("User status: {status}",{status:kt(this.activeStatus)})}},watch:{user:{immediate:!0,async handler(t){var e,s,n,u;if(!t||!((s=(e=bt())==null?void 0:e.user_status)!=null&&s.enabled)){this.fetchedUserStatus=null;return}try{const{data:h}=await Q.get(xt("/apps/user_status/api/v1/statuses/{user}",{user:t}));this.fetchedUserStatus=(u=(n=h.ocs)==null?void 0:n.data)==null?void 0:u.status}catch(h){this.fetchedUserStatus=null}}}}};var Ee=function(){var t=this,e=t._self._c;return t.activeStatus?e("span",{staticClass:"user-status-icon",class:{"user-status-icon--invisible":["invisible","offline"].includes(t.status)},attrs:{role:"img","aria-hidden":t.ariaHidden,"aria-label":t.ariaLabel},domProps:{innerHTML:t._s(t.activeSvg)}}):t._e()},Oe=[],ze=L(Pe,Ee,Oe,!1,null,"86b73d39");const $e=ze.exports,He={name:"NcActionLink",mixins:[tt],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}},props:{href:{type:String,required:!0,validator:t=>{try{return new URL(t)}catch(e){return t.startsWith("#")||t.startsWith("/")}}},download:{type:String,default:null},target:{type:String,default:"_self",validator:t=>t&&(!t.startsWith("_")||["_blank","_self","_parent","_top"].indexOf(t)>-1)},title:{type:String,default:null},ariaHidden:{type:Boolean,default:null}}};var We=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("a",{staticClass:"action-link focusable",attrs:{download:t.download,href:t.href,"aria-label":t.ariaLabel,target:t.target,title:t.title,rel:"nofollow noreferrer noopener",role:t.isInSemanticMenu&&"menuitem"},on:{click:t.onClick}},[t._t("icon",function(){return[e("span",{staticClass:"action-link__icon",class:[t.isIconUrl?"action-link__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?"url(".concat(t.icon,")"):null},attrs:{"aria-hidden":"true"}})]}),t.name?e("span",{staticClass:"action-link__longtext-wrapper"},[e("strong",{staticClass:"action-link__name"},[t._v(" "+t._s(t.name)+" ")]),e("br"),e("span",{staticClass:"action-link__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-link__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-link__text"},[t._v(t._s(t.text))]),t._e()],2)])},Ge=[],Xe=L(He,We,Ge,!1,null,"86e09254");const je=Xe.exports,Fe={name:"NcActionRouter",mixins:[tt],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}},props:{to:{type:[String,Object],required:!0},exact:{type:Boolean,default:!1}}};var Ze=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("RouterLink",{staticClass:"action-router focusable",attrs:{to:t.to,"aria-label":t.ariaLabel,exact:t.exact,title:t.title,rel:"nofollow noreferrer noopener",role:t.isInSemanticMenu&&"menuitem"},nativeOn:{click:function(s){return t.onClick.apply(null,arguments)}}},[t._t("icon",function(){return[e("span",{staticClass:"action-router__icon",class:[t.isIconUrl?"action-router__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?"url(".concat(t.icon,")"):null},attrs:{"aria-hidden":"true"}})]}),t.name?e("span",{staticClass:"action-router__longtext-wrapper"},[e("strong",{staticClass:"action-router__name"},[t._v(" "+t._s(t.name)+" ")]),e("br"),e("span",{staticClass:"action-router__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-router__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-router__text"},[t._v(t._s(t.text))]),t._e()],2)],1)},Ve=[],Re=L(Fe,Ze,Ve,!1,null,"4dae1ff7");const Ye=Re.exports,Je={name:"NcActionText",mixins:[tt],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}}};var Ke=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("span",{staticClass:"action-text",on:{click:t.onClick}},[t._t("icon",function(){return[t.icon!==""?e("span",{staticClass:"action-text__icon",class:[t.isIconUrl?"action-text__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?"url(".concat(t.icon,")"):null},attrs:{"aria-hidden":"true"}}):t._e()]}),t.name?e("span",{staticClass:"action-text__longtext-wrapper"},[e("strong",{staticClass:"action-text__name"},[t._v(" "+t._s(t.name)+" ")]),e("span",{staticClass:"action-text__longtext",domProps:{textContent:t._s(t.text)}})]):t.isLongText?e("span",{staticClass:"action-text__longtext",domProps:{textContent:t._s(t.text)}}):e("span",{staticClass:"action-text__text"},[t._v(t._s(t.text))]),t._e()],2)])},Qe=[],ts=L(Je,Ke,Qe,!1,null,"2fe7eb92");const es=ts.exports;B(Kt);const ss={data(){return{hasStatus:!1,userStatus:{status:null,message:null,icon:null}}},methods:{async fetchUserStatus(t){var s,n;if(!t)return;const e=bt();if(!(!Object.hasOwn(e,"user_status")||!e.user_status.enabled)&&X())try{const{data:u}=await Q.get(xt("apps/user_status/api/v1/statuses/{userId}",{userId:t}));this.setUserStatus(u.ocs.data)}catch(u){if(u.response.status===404&&((n=(s=u.response.data.ocs)==null?void 0:s.data)==null?void 0:n.length)===0)return;j.error("Could not fetch user status",{error:u})}},setUserStatus({status:t,message:e,icon:s}){this.userStatus.status=t||"",this.userStatus.message=e||"",this.userStatus.icon=s||"",this.hasStatus=!!t}}},Dt=Xt("nextcloud").persist().build();function ns(t){const e=Dt.getItem("user-has-avatar."+t);return typeof e=="string"?!!e:null}function St(t,e){t&&Dt.setItem("user-has-avatar."+t,e)}const as={name:"NcAvatar",directives:{ClickOutside:ge},components:{IconDotsHorizontal:ne,NcActions:se,NcButton:ee,NcIconSvgWrapper:te,NcLoadingIcon:Qt,NcUserStatusIcon:$e},mixins:[ss],props:{url:{type:String,default:void 0},iconClass:{type:String,default:void 0},user:{type:String,default:void 0},hideStatus:{type:Boolean,default:!1},showUserStatus:{type:Boolean,default:!0},verboseStatus:{type:Boolean,default:!1},showUserStatusCompact:{type:Boolean,default:!0},preloadedUserStatus:{type:Object,default:void 0},isGuest:{type:Boolean,default:!1},displayName:{type:String,default:void 0},size:{type:Number,default:32},noPlaceholder:{type:Boolean,default:!1},allowPlaceholder:{type:Boolean,default:!0},disableTooltip:{type:Boolean,default:!1},disableMenu:{type:Boolean,default:!1},tooltipMessage:{type:String,default:null},isNoUser:{type:Boolean,default:!1},menuContainer:{type:[Boolean,String,Object,Element],default:"body"}},setup(){return{isDarkTheme:le()}},data(){return{avatarUrlLoaded:null,avatarSrcSetLoaded:null,userDoesNotExist:!1,isAvatarLoaded:!1,isMenuLoaded:!1,contactsMenuLoading:!1,contactsMenuData:{},contactsMenuActions:[],contactsMenuOpenState:!1}},computed:{avatarAriaLabel(){var t,e;if(this.hasMenu)return this.canDisplayUserStatus||this.showUserStatusIconOnAvatar?w("Avatar of {displayName}, {status}",{displayName:(t=this.displayName)!=null?t:this.user,status:kt(this.userStatus.status)}):w("Avatar of {displayName}",{displayName:(e=this.displayName)!=null?e:this.user})},canDisplayUserStatus(){return!this.hideStatus&&this.showUserStatus&&this.hasStatus&&["online","away","busy","dnd"].includes(this.userStatus.status)},showUserStatusIconOnAvatar(){return!this.hideStatus&&this.showUserStatus&&!this.verboseStatus&&this.showUserStatusCompact&&this.hasStatus&&this.userStatus.status!=="dnd"&&this.userStatus.icon},userIdentifier(){return this.isDisplayNameDefined?this.displayName:this.isUserDefined?this.user:""},isUserDefined(){return typeof this.user<"u"},isDisplayNameDefined(){return typeof this.displayName<"u"},isUrlDefined(){return typeof this.url<"u"},hasMenu(){var t;return this.disableMenu?!1:this.isMenuLoaded?this.menu.length>0:!(this.user===((t=X())==null?void 0:t.uid)||this.userDoesNotExist||this.url)},showInitials(){return!this.noPlaceholder&&this.allowPlaceholder&&this.userDoesNotExist&&!(this.iconClass||this.$scopedSlots.icon)},avatarStyle(){return{"--avatar-size":this.size+"px",lineHeight:this.showInitials?this.size+"px":0,fontSize:Math.round(this.size*.45)+"px"}},initialsWrapperStyle(){const{r:t,g:e,b:s}=vt(this.userIdentifier);return{backgroundColor:"rgba(".concat(t,", ").concat(e,", ").concat(s,", 0.1)")}},initialsStyle(){const{r:t,g:e,b:s}=vt(this.userIdentifier);return{color:"rgb(".concat(t,", ").concat(e,", ").concat(s,")")}},tooltip(){return this.disableTooltip?!1:this.tooltipMessage?this.tooltipMessage:this.displayName},initials(){let t="?";if(this.showInitials){const e=this.userIdentifier.trim();if(e==="")return t;const s=e.match(new RegExp("[\\p{L}\\p{N}\\s]","gu"));if(!s)return t;const n=s.join(""),u=n.lastIndexOf(" ");t=String.fromCodePoint(n.codePointAt(0)),u!==-1&&(t=t.concat(String.fromCodePoint(n.codePointAt(u+1))))}return t.toLocaleUpperCase()},menu(){const t=this.contactsMenuActions.map(s=>{const n=ye(this.$router,s.hyperlink);return{ncActionComponent:n?Ye:je,ncActionComponentProps:n?{to:n,icon:s.icon}:{href:s.hyperlink,icon:s.icon},text:s.title}});for(const s of Se(this.contactsMenuData))try{t.push({ncActionComponent:ae,ncActionComponentProps:{},ncActionComponentHandlers:{click:()=>s.callback(this.contactsMenuData)},text:s.displayName(this.contactsMenuData),iconSvg:s.iconSvg(this.contactsMenuData)})}catch(n){j.error("Failed to render ContactsMenu action ".concat(s.id),{error:n,action:s})}function e(s){const n=document.createTextNode(s),u=document.createElement("p");return u.appendChild(n),u.innerHTML}if(!this.hideStatus&&this.showUserStatus&&(this.userStatus.icon||this.userStatus.message)){const s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n					<text x="50%" y="50%" text-anchor="middle" style="dominant-baseline: central; font-size: 85%">'.concat(e(this.userStatus.icon),"</text>\n				</svg>");return[{ncActionComponent:es,ncActionComponentProps:{},iconSvg:this.userStatus.icon?s:void 0,text:"".concat(this.userStatus.message)}].concat(t)}return t}},watch:{url(){this.userDoesNotExist=!1,this.loadAvatarUrl()},user(){this.userDoesNotExist=!1,this.isMenuLoaded=!1,this.loadAvatarUrl()}},mounted(){this.loadAvatarUrl(),O("settings:avatar:updated",this.loadAvatarUrl),O("settings:display-name:updated",this.loadAvatarUrl),!this.hideStatus&&this.showUserStatus&&this.user&&!this.isNoUser?(this.preloadedUserStatus?this.setUserStatus(this.preloadedUserStatus):this.fetchUserStatus(this.user),O("user_status:status.updated",this.handleUserStatusUpdated)):!this.hideStatus&&this.preloadedUserStatus&&this.setUserStatus(this.preloadedUserStatus)},beforeDestroy(){E("settings:avatar:updated",this.loadAvatarUrl),E("settings:display-name:updated",this.loadAvatarUrl),E("user_status:status.updated",this.handleUserStatusUpdated)},methods:{t:w,handleUserStatusUpdated(t){this.user===t.userId&&(this.userStatus={status:t.status,icon:t.icon,message:t.message},this.hasStatus=t.status!==null)},async toggleMenu(t){t.type==="keydown"&&t.key!=="Enter"||(this.contactsMenuOpenState||await this.fetchContactsMenu(),this.contactsMenuOpenState=!this.contactsMenuOpenState)},closeMenu(){this.contactsMenuOpenState=!1},async fetchContactsMenu(){this.contactsMenuLoading=!0;try{const t=encodeURIComponent(this.user),{data:e}=await Q.post(_t("contactsmenu/findOne"),"shareType=0&shareWith=".concat(t));this.contactsMenuData=e,this.contactsMenuActions=e.topAction?[e.topAction].concat(e.actions):e.actions}catch(t){this.contactsMenuOpenState=!1}this.contactsMenuLoading=!1,this.isMenuLoaded=!0},loadAvatarUrl(){if(this.isAvatarLoaded=!1,!this.isUrlDefined&&(!this.isUserDefined||this.isNoUser||this.iconClass||this.$scopedSlots.icon)){this.isAvatarLoaded=!0,this.userDoesNotExist=!0;return}if(this.isUrlDefined){this.updateImageIfValid(this.url);return}if(this.size<=64){const t=this.avatarUrlGenerator(this.user,64),e=[t+" 1x",this.avatarUrlGenerator(this.user,512)+" 8x"].join(", ");this.updateImageIfValid(t,e)}else{const t=this.avatarUrlGenerator(this.user,512);this.updateImageIfValid(t)}},avatarUrlGenerator(t,e){var n;let s=Ie(t,{size:e,isDarkTheme:this.isDarkTheme,isGuest:this.isGuest});return t===((n=X())==null?void 0:n.uid)&&typeof window.oc_userconfig<"u"&&(s+="?v="+window.oc_userconfig.avatar.version),s},updateImageIfValid(t,e=null){const s=ns(this.user);if(this.isUserDefined&&typeof s=="boolean"){this.isAvatarLoaded=!0,this.avatarUrlLoaded=t,e&&(this.avatarSrcSetLoaded=e),s===!1&&(this.userDoesNotExist=!0);return}const n=new Image;n.onload=()=>{this.avatarUrlLoaded=t,e&&(this.avatarSrcSetLoaded=e),this.isAvatarLoaded=!0,St(this.user,!0)},n.onerror=u=>{j.debug("Invalid avatar url",{error:u,url:t}),this.avatarUrlLoaded=null,this.avatarSrcSetLoaded=null,this.userDoesNotExist=!0,this.isAvatarLoaded=!1,St(this.user,!1)},e&&(n.srcset=e),n.src=t}}};var rs=function(){var t=this,e=t._self._c;return e("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],staticClass:"avatardiv popovermenu-wrapper",class:{"avatardiv--unknown":t.userDoesNotExist,"avatardiv--with-menu":t.hasMenu,"avatardiv--with-menu-loading":t.contactsMenuLoading},style:t.avatarStyle,attrs:{title:t.tooltip}},[t._t("icon",function(){return[t.iconClass?e("span",{staticClass:"avatar-class-icon",class:t.iconClass}):t.isAvatarLoaded&&!t.userDoesNotExist?e("img",{attrs:{src:t.avatarUrlLoaded,srcset:t.avatarSrcSetLoaded,alt:""}}):t._e()]}),t.hasMenu&&t.menu.length===0?e("NcButton",{staticClass:"action-item action-item__menutoggle",attrs:{"aria-label":t.avatarAriaLabel,variant:"tertiary-no-background"},on:{click:t.toggleMenu},scopedSlots:t._u([{key:"icon",fn:function(){return[t.contactsMenuLoading?e("NcLoadingIcon"):e("IconDotsHorizontal",{attrs:{size:20}})]},proxy:!0}],null,!1,1269954734)}):t.hasMenu?e("NcActions",{attrs:{"aria-label":t.avatarAriaLabel,container:t.menuContainer,"force-menu":"","manual-open":"",open:t.contactsMenuOpenState,variant:"tertiary-no-background"},on:{"update:open":function(s){t.contactsMenuOpenState=s},click:t.toggleMenu},scopedSlots:t._u([t.contactsMenuLoading?{key:"icon",fn:function(){return[e("NcLoadingIcon")]},proxy:!0}:null],null,!0)},t._l(t.menu,function(s,n){return e(s.ncActionComponent,t._g(t._b({key:n,tag:"component",scopedSlots:t._u([s.iconSvg?{key:"icon",fn:function(){return[e("NcIconSvgWrapper",{attrs:{svg:s.iconSvg}})]},proxy:!0}:null],null,!0)},"component",s.ncActionComponentProps,!1),s.ncActionComponentHandlers),[t._v(" "+t._s(s.text)+" ")])}),1):t._e(),t.showUserStatusIconOnAvatar?e("span",{staticClass:"avatardiv__user-status avatardiv__user-status--icon"},[t._v(" "+t._s(t.userStatus.icon)+" ")]):t.canDisplayUserStatus?e("NcUserStatusIcon",{staticClass:"avatardiv__user-status",attrs:{status:t.userStatus.status,"aria-hidden":String(t.hasMenu)}}):t._e(),t.showInitials?e("span",{staticClass:"avatardiv__initials-wrapper",style:t.initialsWrapperStyle},[e("span",{staticClass:"avatardiv__initials",style:t.initialsStyle},[t._v(" "+t._s(t.initials)+" ")])]):t._e()],2)},is=[],os=L(as,rs,is,!1,null,"a4de1e87");const ms=os.exports;export{fs as C,ms as N,je as a,Ye as b,gs as c,vs as d,S as e,ss as u};
//# sourceMappingURL=NcAvatar-OCD_HmOb-BPLtBYgo.chunk.mjs.map

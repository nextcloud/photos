import{N as y,b as g}from"./NcDateTimePicker-D6nzA0aq.chunk.mjs";import{u as d}from"./useModelMigration-EhAWvqDD-k0RoVAnp.chunk.mjs";import{au as v,n as r,a1 as o,r as p,av as _,k as $,a as n,aw as w,a2 as k}from"./index-mp1XnZYt.chunk.mjs";import{l as C,a4 as S}from"./vue.runtime.esm-CgV0NZOD.chunk.mjs";import{d as N}from"./index-gTg4B8UE.chunk.mjs";import{N as u,a as x}from"./NcTextField-Cd_RjGj6-DxVLOJDt.chunk.mjs";import{l as T}from"./index-DetBNuUF.chunk.mjs";import{A as D}from"./NcActionButton-CpGK6gSX-BnfngIri.chunk.mjs";const P=["date","datetime-local","month","time","week"],M={name:"NcDateTimePickerNative",inheritAttrs:!1,model:{prop:"modelValue",event:"update:modelValue"},props:{value:{type:Date,default:void 0},modelValue:{type:Date,default:null},id:{type:String,default:()=>"date-time-picker-"+o(),validator:t=>t.trim()!==""},type:{type:String,default:"date",validate:t=>P.includes(t)},label:{type:String,default:"Please choose a date"},min:{type:[Date,Boolean],default:null},max:{type:[Date,Boolean],default:null},hideLabel:{type:Boolean,default:!1},inputClass:{type:[Object,String],default:""}},emits:["input","update:modelValue","update:model-value"],setup(){return{model:d("value","input")}},computed:{formattedValue(){return this.formatValue(this.model)},formattedMin(){return this.min?this.formatValue(this.min):!1},formattedMax(){return this.max?this.formatValue(this.max):!1},listeners(){return{...this.$listeners,input:t=>{if(isNaN(t.target.valueAsNumber))this.model=null;else if(this.type==="time"){const e=t.target.value;if(this.model===""){const{yyyy:i,MM:a,dd:s}=this.getReadableDate(new Date);this.model=new Date(`${i}-${a}-${s}T${e}`)}else{const{yyyy:i,MM:a,dd:s}=this.getReadableDate(this.model);this.model=new Date(`${i}-${a}-${s}T${e}`)}}else if(this.type==="month"){const e=(new Date(t.target.value).getMonth()+1).toString().padStart(2,"0");if(this.model===""){const{yyyy:i,dd:a,hh:s,mm:l}=this.getReadableDate(new Date);this.model=new Date(`${i}-${e}-${a}T${s}:${l}`)}else{const{yyyy:i,dd:a,hh:s,mm:l}=this.getReadableDate(this.model);this.model=new Date(`${i}-${e}-${a}T${s}:${l}`)}}else{const e=new Date(t.target.valueAsNumber).getTimezoneOffset()*1e3*60,i=t.target.valueAsNumber+e;this.model=new Date(i)}}}}},methods:{getReadableDate(t){if(t instanceof Date){const e=t.getFullYear().toString().padStart(4,"0"),i=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getDate().toString().padStart(2,"0"),s=t.getHours().toString().padStart(2,"0"),l=t.getMinutes().toString().padStart(2,"0");return{yyyy:e,MM:i,dd:a,hh:s,mm:l}}},formatValue(t){if(t instanceof Date){const{yyyy:e,MM:i,dd:a,hh:s,mm:l}=this.getReadableDate(t);if(this.type==="datetime-local")return`${e}-${i}-${a}T${s}:${l}`;if(this.type==="date")return`${e}-${i}-${a}`;if(this.type==="month")return`${e}-${i}`;if(this.type==="time")return`${s}:${l}`;if(this.type==="week"){const h=new Date(e,0,1),f=Math.floor((t-h)/(24*60*60*1e3)),b=Math.ceil(f/7);return`${e}-W${b}`}}else return""}}};var I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"native-datetime-picker"},[e("label",{staticClass:"native-datetime-picker--label",class:{"hidden-visually":t.hideLabel},attrs:{for:t.id}},[t._v(" "+t._s(t.label)+" ")]),e("input",t._g(t._b({staticClass:"native-datetime-picker--input",class:t.inputClass,attrs:{id:t.id,type:t.type,min:t.formattedMin,max:t.formattedMax},domProps:{value:t.formattedValue}},"input",t.$attrs,!1),t.listeners))])},A=[],B=r(M,I,A,!1,null,"9e776556");const m=B.exports;v(m);const F={name:"EyeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var L=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon eye-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(i){return t.$emit("click",i)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},V=[],O=r(F,L,V,!1,null,null);const z=O.exports,E={name:"EyeOffIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var H=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon eye-off-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(i){return t.$emit("click",i)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},R=[],j=r(E,H,R,!1,null,null);const U=j.exports;p(_);const c=C("core","capabilities",{}).password_policy||null,q=new Set(Object.keys(u.props)),Z={name:"NcPasswordField",components:{NcInputField:u,IconEye:z,IconEyeOff:U},inheritAttrs:!1,model:{prop:"modelValue",event:"update:modelValue"},props:{" ":{},...u.props,showTrailingButton:{type:Boolean,default:!0},trailingButtonLabel:void 0,checkPasswordStrength:{type:Boolean,default:!1},minlength:{type:Number,default:0},maxlength:{type:Number,default:null},asText:{type:Boolean,default:!1},visible:{type:Boolean,default:!1}},emits:["valid","invalid","update:value","update:modelValue","update:model-value","update:visible"],setup(t,{emit:e}){const i=d("value","update:value"),a=w(t,"visible",e,{passive:!0});return{t:n,model:i,visibility:a}},data(){return{internalHelpMessage:"",isValid:null}},computed:{computedError(){return this.error||this.isValid===!1},computedSuccess(){return this.success||this.isValid===!0},computedHelperText(){return this.helperText.length>0?this.helperText:this.internalHelpMessage},rules(){const{minlength:t}=this;return{minlength:t??c?.minLength}},trailingButtonLabelPassword(){return this.visibility?n("Hide password"):n("Show password")},propsAndAttrsToForward(){return{...this.$attrs,...Object.fromEntries(Object.entries(this.$props).filter(([t])=>q.has(t)))}}},watch:{model(t){if(this.checkPasswordStrength){if(c===null)return;this.checkPassword(t)}}},methods:{focus(){this.$refs.inputField.focus()},select(){this.$refs.inputField.select()},handleInput(t){this.model=t.target.value},toggleVisibility(){this.visibility=!this.visibility},checkPassword:N(async function(t){try{const{data:e}=await $.post(S("apps/password_policy/api/v1/validate"),{password:t});if(this.isValid=e.ocs.data.passed,e.ocs.data.passed){this.internalHelpMessage=n("Password is secure"),this.$emit("valid");return}this.internalHelpMessage=e.ocs.data.reason,this.$emit("invalid")}catch(e){T.error("Password policy returned an error",e)}},500)}};var W=function(){var t=this,e=t._self._c;return e("NcInputField",t._g(t._b({ref:"inputField",attrs:{type:t.visibility||t.asText?"text":"password","trailing-button-label":t.trailingButtonLabelPassword,"helper-text":t.computedHelperText,error:t.computedError,success:t.computedSuccess,minlength:t.rules.minlength,"input-class":{"password-field__input--secure-text":!t.visibility&&t.asText}},on:{"trailing-button-click":t.toggleVisibility,input:t.handleInput},scopedSlots:t._u([t.$scopedSlots.icon||t.$slots.default||t.$scopedSlots.default?{key:"icon",fn:function(){return[t._t("icon",function(){return[t._t("default")]})]},proxy:!0}:null,{key:"trailing-button-icon",fn:function(){return[t.visibility?e("IconEyeOff",{attrs:{size:18}}):e("IconEye",{attrs:{size:18}})]},proxy:!0}],null,!0)},"NcInputField",t.propsAndAttrsToForward,!1),t.$listeners))},Y=[],G=r(Z,W,Y,!1,null,"e7f7c9e3");const J=G.exports;p(k);const K={name:"NcActionInput",components:{NcDateTimePicker:g,NcDateTimePickerNative:m,NcPasswordField:J,NcSelect:y,NcTextField:x},mixins:[D],model:{prop:"modelValue",event:"update:modelValue"},props:{id:{type:String,default:()=>"action-"+o(),validator:t=>t.trim()!==""},inputId:{type:String,default:()=>"action-input-"+o(),validator:t=>t.trim()!==""},icon:{type:String,default:""},type:{type:String,default:"text",validator(t){return["date","datetime-local","month","multiselect","number","password","search","tel","text","time","url","week","color","email"].indexOf(t)>-1}},idNativeDateTimePicker:{type:String,default:"date-time-picker_id"},isNativePicker:{type:Boolean,default:!1},label:{type:String,default:null},labelOutside:{type:Boolean,default:!0},value:{type:[String,Date,Number,Array],default:void 0},modelValue:{type:[String,Date,Number,Array],default:""},disabled:{type:Boolean,default:!1},ariaLabel:{type:String,default:""},ariaHidden:{type:Boolean,default:null},showTrailingButton:{type:Boolean,default:!0},trailingButtonLabel:{type:String,default:n("Submit")}},emits:["input","submit","change","update:value","update:modelValue","update:model-value"],setup(){return{model:d("value","update:value")}},computed:{isIconUrl(){try{return new URL(this.icon)}catch{return!1}},isMultiselectType(){return this.type==="multiselect"},nativeDatePickerType(){switch(this.type){case"date":case"month":case"time":case"week":case"datetime-local":return this.type}return!1},datePickerType(){if(!this.isNativePicker)switch(this.type){case"date":case"month":case"time":return this.type;case"datetime-local":return"datetime"}return!1},isFocusable(){return!this.disabled}},methods:{onLeave(){this.$refs.datetimepicker&&this.$refs.datetimepicker.$refs.datepicker&&this.$refs.datetimepicker.$refs.datepicker.closePopup()},onInput(t){this.$emit("input",t),this.model=t.target?t.target.value:t},onSubmit(t){if(t.preventDefault(),t.stopPropagation(),!this.disabled)this.$emit("submit",t);else return!1},onChange(t){this.$emit("change",t)}}};var Q=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",class:{"action--disabled":t.disabled}},[e("span",{staticClass:"action-input",class:{"action-input-picker--disabled":t.disabled,"action-input--visible-label":t.labelOutside&&t.label},on:{mouseleave:t.onLeave}},[e("span",{staticClass:"action-input__icon-wrapper"},[t._t("icon",function(){return[e("span",{staticClass:"action-input__icon",class:[t.isIconUrl?"action-input__icon--url":t.icon],style:{backgroundImage:t.isIconUrl?`url(${t.icon})`:null},attrs:{"aria-hidden":"true"}})]})],2),e("form",{ref:"form",staticClass:"action-input__form",attrs:{disabled:t.disabled},on:{submit:function(i){return i.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"action-input__container"},[t.label&&t.labelOutside?e("label",{staticClass:"action-input__text-label",class:{"action-input__text-label--hidden":!t.labelOutside},attrs:{for:t.inputId}},[t._v(" "+t._s(t.label)+" ")]):t._e(),e("div",{staticClass:"action-input__input-container"},[t.datePickerType?e("NcDateTimePicker",t._b({ref:"datetimepicker",staticClass:"action-input__datetimepicker",staticStyle:{"z-index":"99999999999"},attrs:{value:t.model,placeholder:t.text,disabled:t.disabled,type:t.datePickerType,"input-class":["mx-input",{focusable:t.isFocusable}]},on:{input:t.onInput,change:t.onChange}},"NcDateTimePicker",t.$attrs,!1)):t.isNativePicker?e("NcDateTimePickerNative",t._b({staticClass:"action-input__datetimepicker",attrs:{id:t.idNativeDateTimePicker,value:t.model,type:t.nativeDatePickerType,"input-class":{focusable:t.isFocusable}},on:{"update:model-value":function(i){t.model=i},change:function(i){return t.$emit("change",i)}}},"NcDateTimePickerNative",t.$attrs,!1)):t.isMultiselectType?e("NcSelect",t._g(t._b({staticClass:"action-input__multi",attrs:{value:t.model,placeholder:t.text,disabled:t.disabled,"append-to-body":t.$attrs.appendToBody||t.$attrs["append-to-body"]||!1,"input-class":{focusable:t.isFocusable}}},"NcSelect",t.$attrs,!1),t.$listeners)):t.type==="password"?e("NcPasswordField",t._g(t._b({attrs:{id:t.inputId,value:t.model,label:t.label,"label-outside":!t.label||t.labelOutside,placeholder:t.text,disabled:t.disabled,"input-class":{focusable:t.isFocusable},"show-trailing-button":t.showTrailingButton&&!t.disabled},on:{input:t.onInput,change:t.onChange}},"NcPasswordField",t.$attrs,!1),t.$listeners)):t.type==="color"?e("div",{staticClass:"action-input__container"},[t.label&&t.type==="color"?e("label",{staticClass:"action-input__text-label",class:{"action-input__text-label--hidden":!t.labelOutside},attrs:{for:t.inputId}},[t._v(" "+t._s(t.label)+" ")]):t._e(),e("div",{staticClass:"action-input__input-container"},[e("NcColorPicker",t._g(t._b({staticClass:"colorpicker__trigger",attrs:{id:"inputId",value:t.model},on:{"update:model-value":t.onInput,submit:function(i){return t.$refs.form.requestSubmit()}}},"NcColorPicker",t.$attrs,!1),t.$listeners),[e("button",{staticClass:"colorpicker__preview",class:{focusable:t.isFocusable},style:{"background-color":t.model}})])],1)]):e("NcTextField",t._g(t._b({attrs:{id:t.inputId,value:t.model,label:t.label,"label-outside":!t.label||t.labelOutside,placeholder:t.text,disabled:t.disabled,"input-class":{focusable:t.isFocusable},type:t.type,"trailing-button-icon":"arrowRight","trailing-button-label":t.trailingButtonLabel,"show-trailing-button":t.showTrailingButton&&!t.disabled},on:{"trailing-button-click":function(i){return t.$refs.form.requestSubmit()},input:t.onInput,change:t.onChange}},"NcTextField",t.$attrs,!1),t.$listeners))],1)])])])])},X=[],tt=r(K,Q,X,!1,null,"d174eb12");const ut=tt.exports;export{ut as N};
//# sourceMappingURL=NcBreadcrumbs-CFRjXqRg-B2bGiWLX.chunk.mjs.map

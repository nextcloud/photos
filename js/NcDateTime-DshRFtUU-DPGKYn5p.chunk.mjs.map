{"version":3,"file":"NcDateTime-DshRFtUU-DPGKYn5p.chunk.mjs","sources":["../node_modules/@nextcloud/vue/dist/chunks/NcDateTime-DshRFtUU.mjs"],"sourcesContent":["import { ref, unref, computed, watch, onMounted, onUnmounted } from \"vue\";\nimport { getCanonicalLocale, getLanguage } from \"@nextcloud/l10n\";\nimport { r as register, l as t2, a as t } from \"./_l10n-DQgzdF9S.mjs\";\nimport { n as normalizeComponent } from \"./_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nregister(t2);\nconst FEW_SECONDS_AGO = {\n  long: t(\"a few seconds ago\"),\n  short: t(\"seconds ago\"),\n  // FOR TRANSLATORS: Shorter version of 'a few seconds ago'\n  narrow: t(\"sec. ago\")\n  // FOR TRANSLATORS: If possible in your language an even shorter version of 'a few seconds ago'\n};\nfunction useFormatDateTime(timestamp = Date.now(), opts = {}) {\n  const currentTime = ref(Date.now());\n  let intervalId;\n  const options = ref({\n    format: {\n      timeStyle: \"medium\",\n      dateStyle: \"short\"\n    },\n    relativeTime: \"long\",\n    ignoreSeconds: false,\n    ...unref(opts)\n  });\n  const wrappedOptions = computed(() => ({ ...unref(opts), ...options.value }));\n  const date = computed(() => new Date(unref(timestamp)));\n  const formattedFullTime = computed(() => {\n    const formatter = new Intl.DateTimeFormat(getCanonicalLocale(), wrappedOptions.value.format);\n    return formatter.format(date.value);\n  });\n  const formattedTime = computed(() => {\n    if (wrappedOptions.value.relativeTime !== false) {\n      const formatter = new Intl.RelativeTimeFormat(getLanguage(), { numeric: \"auto\", style: wrappedOptions.value.relativeTime });\n      const diff = date.value.getTime() - currentTime.value;\n      const seconds = diff / 1e3;\n      if (Math.abs(seconds) < 59.5) {\n        if (wrappedOptions.value.ignoreSeconds) {\n          return FEW_SECONDS_AGO[wrappedOptions.value.relativeTime];\n        } else {\n          return formatter.format(Math.round(seconds), \"second\");\n        }\n      }\n      const minutes = seconds / 60;\n      if (Math.abs(minutes) <= 59) {\n        return formatter.format(Math.round(minutes), \"minute\");\n      }\n      const hours = minutes / 60;\n      if (Math.abs(hours) < 23.5) {\n        return formatter.format(Math.round(hours), \"hour\");\n      }\n      const days = hours / 24;\n      if (Math.abs(days) < 6.5) {\n        return formatter.format(Math.round(days), \"day\");\n      }\n      if (Math.abs(days) < 27.5) {\n        const weeks = days / 7;\n        return formatter.format(Math.round(weeks), \"week\");\n      }\n      const months = days / 30;\n      if (Math.abs(months) < 11.5) {\n        return formatter.format(Math.round(months), \"month\");\n      }\n      return formatter.format(Math.round(days / 365), \"year\");\n    }\n    return formattedFullTime.value;\n  });\n  watch([wrappedOptions], () => {\n    window.clearInterval(intervalId);\n    intervalId = void 0;\n    if (wrappedOptions.value.relativeTime) {\n      intervalId = window.setInterval(() => {\n        currentTime.value = Date.now();\n      }, 1e3);\n    }\n  });\n  onMounted(() => {\n    if (wrappedOptions.value.relativeTime !== false) {\n      intervalId = window.setInterval(() => {\n        currentTime.value = Date.now();\n      }, 1e3);\n    }\n  });\n  onUnmounted(() => {\n    window.clearInterval(intervalId);\n  });\n  return {\n    formattedTime,\n    formattedFullTime,\n    options\n  };\n}\nconst _sfc_main = {\n  name: \"NcDateTime\",\n  props: {\n    /**\n     * The timestamp to display, either an unix timestamp (in milliseconds) or a Date object\n     */\n    timestamp: {\n      type: [Date, Number],\n      required: true\n    },\n    /**\n     * The format used for displaying, or if relative time is used the format used for the title (optional)\n     *\n     * @type {Intl.DateTimeFormatOptions}\n     */\n    format: {\n      type: Object,\n      default: () => ({ timeStyle: \"medium\", dateStyle: \"short\" })\n    },\n    /**\n     * Wether to display the timestamp as time from now (optional)\n     *\n     * - `false`: Disable relative time\n     * - `'long'`: Long text, like *2 seconds ago* (default)\n     * - `'short'`: Short text, like *2 sec. ago*\n     * - `'narrow'`: Even shorter text (same as `'short'` on some languages)\n     */\n    relativeTime: {\n      type: [Boolean, String],\n      default: \"long\",\n      validator: (v) => v === false || [\"long\", \"short\", \"narrow\"].includes(v)\n    },\n    /**\n     * Ignore seconds when displaying the relative time and just show `a few seconds ago`\n     */\n    ignoreSeconds: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const timestamp = computed(() => props.timestamp);\n    const { formattedTime, formattedFullTime } = useFormatDateTime(timestamp, props);\n    return {\n      formattedTime,\n      formattedFullTime\n    };\n  }\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"span\", { staticClass: \"nc-datetime\", attrs: { \"data-timestamp\": _vm.timestamp, \"title\": _vm.formattedFullTime }, domProps: { \"textContent\": _vm._s(_vm.formattedTime) } });\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  null\n);\nconst NcDateTime = __component__.exports;\nexport {\n  NcDateTime as N,\n  useFormatDateTime as u\n};\n//# sourceMappingURL=NcDateTime-DshRFtUU.mjs.map\n"],"names":["register","t2","FEW_SECONDS_AGO","t","useFormatDateTime","timestamp","opts","currentTime","ref","intervalId","options","unref","wrappedOptions","computed","date","formattedFullTime","getCanonicalLocale","formattedTime","formatter","getLanguage","seconds","minutes","hours","days","weeks","months","watch","onMounted","onUnmounted","_sfc_main","v","props","_sfc_render","_vm","_c","_sfc_staticRenderFns","__component__","normalizeComponent","NcDateTime"],"mappings":"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","x_google_ignoreList":[0]}
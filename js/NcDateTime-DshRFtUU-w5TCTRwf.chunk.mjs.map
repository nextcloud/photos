{"version":3,"file":"NcDateTime-DshRFtUU-w5TCTRwf.chunk.mjs","sources":["../node_modules/@nextcloud/vue/dist/chunks/NcDateTime-DshRFtUU.mjs"],"sourcesContent":["import { ref, unref, computed, watch, onMounted, onUnmounted } from \"vue\";\nimport { getCanonicalLocale, getLanguage } from \"@nextcloud/l10n\";\nimport { r as register, l as t2, a as t } from \"./_l10n-DQgzdF9S.mjs\";\nimport { n as normalizeComponent } from \"./_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nregister(t2);\nconst FEW_SECONDS_AGO = {\n  long: t(\"a few seconds ago\"),\n  short: t(\"seconds ago\"),\n  // FOR TRANSLATORS: Shorter version of 'a few seconds ago'\n  narrow: t(\"sec. ago\")\n  // FOR TRANSLATORS: If possible in your language an even shorter version of 'a few seconds ago'\n};\nfunction useFormatDateTime(timestamp = Date.now(), opts = {}) {\n  const currentTime = ref(Date.now());\n  let intervalId;\n  const options = ref({\n    format: {\n      timeStyle: \"medium\",\n      dateStyle: \"short\"\n    },\n    relativeTime: \"long\",\n    ignoreSeconds: false,\n    ...unref(opts)\n  });\n  const wrappedOptions = computed(() => ({ ...unref(opts), ...options.value }));\n  const date = computed(() => new Date(unref(timestamp)));\n  const formattedFullTime = computed(() => {\n    const formatter = new Intl.DateTimeFormat(getCanonicalLocale(), wrappedOptions.value.format);\n    return formatter.format(date.value);\n  });\n  const formattedTime = computed(() => {\n    if (wrappedOptions.value.relativeTime !== false) {\n      const formatter = new Intl.RelativeTimeFormat(getLanguage(), { numeric: \"auto\", style: wrappedOptions.value.relativeTime });\n      const diff = date.value.getTime() - currentTime.value;\n      const seconds = diff / 1e3;\n      if (Math.abs(seconds) < 59.5) {\n        if (wrappedOptions.value.ignoreSeconds) {\n          return FEW_SECONDS_AGO[wrappedOptions.value.relativeTime];\n        } else {\n          return formatter.format(Math.round(seconds), \"second\");\n        }\n      }\n      const minutes = seconds / 60;\n      if (Math.abs(minutes) <= 59) {\n        return formatter.format(Math.round(minutes), \"minute\");\n      }\n      const hours = minutes / 60;\n      if (Math.abs(hours) < 23.5) {\n        return formatter.format(Math.round(hours), \"hour\");\n      }\n      const days = hours / 24;\n      if (Math.abs(days) < 6.5) {\n        return formatter.format(Math.round(days), \"day\");\n      }\n      if (Math.abs(days) < 27.5) {\n        const weeks = days / 7;\n        return formatter.format(Math.round(weeks), \"week\");\n      }\n      const months = days / 30;\n      if (Math.abs(months) < 11.5) {\n        return formatter.format(Math.round(months), \"month\");\n      }\n      return formatter.format(Math.round(days / 365), \"year\");\n    }\n    return formattedFullTime.value;\n  });\n  watch([wrappedOptions], () => {\n    window.clearInterval(intervalId);\n    intervalId = void 0;\n    if (wrappedOptions.value.relativeTime) {\n      intervalId = window.setInterval(() => {\n        currentTime.value = Date.now();\n      }, 1e3);\n    }\n  });\n  onMounted(() => {\n    if (wrappedOptions.value.relativeTime !== false) {\n      intervalId = window.setInterval(() => {\n        currentTime.value = Date.now();\n      }, 1e3);\n    }\n  });\n  onUnmounted(() => {\n    window.clearInterval(intervalId);\n  });\n  return {\n    formattedTime,\n    formattedFullTime,\n    options\n  };\n}\nconst _sfc_main = {\n  name: \"NcDateTime\",\n  props: {\n    /**\n     * The timestamp to display, either an unix timestamp (in milliseconds) or a Date object\n     */\n    timestamp: {\n      type: [Date, Number],\n      required: true\n    },\n    /**\n     * The format used for displaying, or if relative time is used the format used for the title (optional)\n     *\n     * @type {Intl.DateTimeFormatOptions}\n     */\n    format: {\n      type: Object,\n      default: () => ({ timeStyle: \"medium\", dateStyle: \"short\" })\n    },\n    /**\n     * Wether to display the timestamp as time from now (optional)\n     *\n     * - `false`: Disable relative time\n     * - `'long'`: Long text, like *2 seconds ago* (default)\n     * - `'short'`: Short text, like *2 sec. ago*\n     * - `'narrow'`: Even shorter text (same as `'short'` on some languages)\n     */\n    relativeTime: {\n      type: [Boolean, String],\n      default: \"long\",\n      validator: (v) => v === false || [\"long\", \"short\", \"narrow\"].includes(v)\n    },\n    /**\n     * Ignore seconds when displaying the relative time and just show `a few seconds ago`\n     */\n    ignoreSeconds: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const timestamp = computed(() => props.timestamp);\n    const { formattedTime, formattedFullTime } = useFormatDateTime(timestamp, props);\n    return {\n      formattedTime,\n      formattedFullTime\n    };\n  }\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"span\", { staticClass: \"nc-datetime\", attrs: { \"data-timestamp\": _vm.timestamp, \"title\": _vm.formattedFullTime }, domProps: { \"textContent\": _vm._s(_vm.formattedTime) } });\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  null\n);\nconst NcDateTime = __component__.exports;\nexport {\n  NcDateTime as N,\n  useFormatDateTime as u\n};\n//# sourceMappingURL=NcDateTime-DshRFtUU.mjs.map\n"],"names":["ref"],"mappings":"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","x_google_ignoreList":[0]}
{"version":3,"file":"PhotosFiltersInput-C83ZrtRE.chunk.mjs","sources":["../node_modules/@mdi/svg/svg/calendar-month.svg?raw","../src/components/PhotosFilters/CustomDateRangePickerDialog.vue","../node_modules/@nextcloud/vue/dist/Components/NcChip.mjs","../src/services/PhotosFilters/dateRangeFilter.ts","../node_modules/@mdi/svg/svg/map-marker.svg?raw","../src/mixins/useAbortController.ts","../src/mixins/useFetchCollections.ts","../src/components/PhotosFilters/PlaceOption.vue","../src/services/PhotosFilters/placesFilter.ts","../src/services/PhotosFilters/index.ts","../src/components/PhotosFilters/PhotosFiltersDisplay.vue","../src/components/PhotosFilters/PhotosFiltersInput.vue"],"sourcesContent":["export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"mdi-calendar-month\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M9,10V12H7V10H9M13,10V12H11V10H13M17,10V12H15V10H17M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H6V1H8V3H16V1H18V3H19M19,19V8H5V19H19M9,14V16H7V14H9M13,14V16H11V14H13M17,14V16H15V14H17Z\\\" /></svg>\"","<!--\n  - SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<NcDialog\n\t\t:name=\"t('photos', 'Select a custom date range')\"\n\t\tsize=\"normal\"\n\t\t@closing=\"emit('close', undefined)\">\n\t\t<div\n\t\t\tclass=\"date-range-picker-dialog\"\n\t\t\tdata-cy-photos-filters-input=\"custom-date-range\">\n\t\t\t<NcDateTimePicker\n\t\t\t\tv-model=\"dateRange\"\n\t\t\t\tclass=\"date-range-picker-dialog__picker\"\n\t\t\t\t:clearable=\"true\"\n\t\t\t\ttype=\"date-range\"\n\t\t\t\t:placeholder=\"t('photos', 'Select a date range')\">\n\t\t\t\t<template #default>\n\t\t\t\t\t{{ t('photos', 'Date range') }}\n\t\t\t\t</template>\n\t\t\t</NcDateTimePicker>\n\t\t</div>\n\t</NcDialog>\n</template>\n\n<script lang=\"ts\" setup>\nimport type { DateRangeValueType } from '../../services/PhotosFilters/dateRangeFilter.ts'\n\nimport { t } from '@nextcloud/l10n'\nimport { ref, watch } from 'vue'\nimport NcDateTimePicker from '@nextcloud/vue/components/NcDateTimePicker'\nimport NcDialog from '@nextcloud/vue/components/NcDialog'\n\nconst emit = defineEmits<{\n\t(event: 'close', value: DateRangeValueType | undefined): void\n}>()\n\nconst dateRange = ref<[Date, Date] | [null, null]>([null, null])\n\nwatch(dateRange, (newDateRangeValue) => {\n\tif (newDateRangeValue[0] !== null || newDateRangeValue[1] !== null) {\n\t\temit('close', {\n\t\t\tstart: newDateRangeValue[0].getTime(),\n\t\t\tend: newDateRangeValue[1].getTime(),\n\t\t})\n\t}\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.date-range-picker-dialog {\n\theight: 400px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: flex-start;\n\n\t&__picker {\n\t\tflex-grow: 1;\n\t}\n}\n</style>\n","import '../assets/NcChip-CF4Q149V.css';\nimport { c as mdiClose } from \"../chunks/mdi-VRLMiqbd.mjs\";\nimport { useSlots, computed } from \"vue\";\nimport { r as register, n as t17, a as t } from \"../chunks/_l10n-DQgzdF9S.mjs\";\nimport { N as NcActions } from \"../chunks/NcActions-B4VZCD8B.mjs\";\nimport { N as NcActionButton } from \"../chunks/NcActionButton-CuVNJJtW.mjs\";\nimport { N as NcIconSvgWrapper } from \"../chunks/NcIconSvgWrapper-Cb-cPj1R.mjs\";\nimport { n as normalizeComponent } from \"../chunks/_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nregister(t17);\nconst _sfc_main = {\n  __name: \"NcChip\",\n  props: {\n    /**\n     * aria label to set on the close button\n     * @default 'Close'\n     */\n    ariaLabelClose: {\n      type: String,\n      default: t(\"Close\")\n    },\n    /**\n     * Container for the actions\n     */\n    actionsContainer: {\n      type: String,\n      default: \"body\"\n    },\n    /**\n     * Main text of the chip.\n     */\n    text: {\n      type: String,\n      default: \"\"\n    },\n    /**\n     * Set the chips design variant-\n     *\n     * This sets the background style of the chip, similar to NcButton's `variant`.\n     * @deprecated will be removed with v9 - use `variant` instead.\n     */\n    type: {\n      type: String,\n      default: \"secondary\",\n      validator: (value) => [\"primary\", \"secondary\", \"tertiary\"].includes(value)\n    },\n    /**\n     * SVG path of the icon to use, this takes precedence over `iconSVG`.\n     * For example icon paths from `@mdi/js` can be used.\n     */\n    iconPath: {\n      type: String,\n      default: null\n    },\n    /**\n     * Inline SVG to use as the icon\n     */\n    iconSvg: {\n      type: String,\n      default: null\n    },\n    /**\n     * Set to true to prevent the close button to be shown\n     */\n    noClose: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Set the chips design variant-\n     *\n     * This sets the background style of the chip, similar to NcButton's `variant`.\n     * @since 8.24.0\n     */\n    variant: {\n      type: String,\n      default: \"secondary\",\n      validator: (value) => [\"primary\", \"secondary\", \"tertiary\"].includes(value)\n    }\n  },\n  emits: [\"close\"],\n  setup(__props, { emit }) {\n    const props = __props;\n    const slots = useSlots();\n    const realVariant = computed(() => props.type !== \"secondary\" ? props.type : props.variant);\n    const canClose = computed(() => !props.noClose);\n    const hasActions = () => Boolean(slots.actions?.());\n    const hasIcon = () => Boolean(props.iconPath || props.iconSvg || !!slots.icon?.());\n    const onClose = () => {\n      emit(\"close\");\n    };\n    return { __sfc: true, props, emit, slots, realVariant, canClose, hasActions, hasIcon, onClose, mdiClose, NcActions, NcActionButton, NcIconSvgWrapper };\n  }\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c, _setup = _vm._self._setupProxy;\n  return _c(\"div\", { staticClass: \"nc-chip\", class: {\n    [`nc-chip--${_setup.realVariant}`]: true,\n    \"nc-chip--no-actions\": _vm.noClose && !_setup.hasActions(),\n    \"nc-chip--no-icon\": !_setup.hasIcon()\n  } }, [_setup.hasIcon() ? _c(\"span\", { staticClass: \"nc-chip__icon\" }, [_vm._t(\"icon\", function() {\n    return [_vm.iconPath || _vm.iconSvg ? _c(_setup.NcIconSvgWrapper, { attrs: { \"inline\": \"\", \"path\": _vm.iconPath, \"svg\": _vm.iconPath ? void 0 : _vm.iconSvg, \"size\": 18 } }) : _vm._e()];\n  })], 2) : _vm._e(), _c(\"span\", { staticClass: \"nc-chip__text\" }, [_vm._t(\"default\", function() {\n    return [_vm._v(_vm._s(_vm.text))];\n  })], 2), _setup.canClose || _setup.hasActions() ? _c(_setup.NcActions, { staticClass: \"nc-chip__actions\", attrs: { \"container\": _vm.actionsContainer, \"force-menu\": !_setup.canClose, \"variant\": \"tertiary-no-background\" } }, [_setup.canClose ? _c(_setup.NcActionButton, { attrs: { \"close-after-click\": \"\" }, on: { \"click\": _setup.onClose }, scopedSlots: _vm._u([{ key: \"icon\", fn: function() {\n    return [_c(_setup.NcIconSvgWrapper, { attrs: { \"path\": _setup.mdiClose, \"size\": 20 } })];\n  }, proxy: true }], null, false, 2547223506) }, [_vm._v(\" \" + _vm._s(_vm.ariaLabelClose) + \" \")]) : _vm._e(), _vm._t(\"actions\")], 2) : _vm._e()], 1);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"a7b8715a\"\n);\nconst NcChip = __component__.exports;\nexport {\n  NcChip as default\n};\n//# sourceMappingURL=NcChip.mjs.map\n","/*!\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport type { PhotosFilter } from './PhotosFilter.ts'\n\nimport calendarMonthSvg from '@mdi/svg/svg/calendar-month.svg?raw'\nimport { t } from '@nextcloud/l10n'\nimport { spawnDialog } from '@nextcloud/vue/functions/dialog'\nimport CustomDateRangePickerDialog from '../../components/PhotosFilters/CustomDateRangePickerDialog.vue'\nimport DateRangeOption from '../../components/PhotosFilters/DateRangeOption.vue'\n\nexport type DateRangeValueType = { start: number, end: number }\n\nexport const dateRangeFilterId = 'date-range'\n\nexport const dateRangeFilter: PhotosFilter<DateRangeValueType> = {\n\tid: dateRangeFilterId,\n\ticon: calendarMonthSvg,\n\trenderOptionComponent: DateRangeOption,\n\tasync getOptions() {\n\t\tconst now = new Date()\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tfilterId: dateRangeFilterId,\n\t\t\t\tlabel: t('photos', 'Last week'),\n\t\t\t\tvalue: {\n\t\t\t\t\tstart: new Date(now.getFullYear(), now.getMonth(), now.getDate() - now.getDay() - 7).getTime(),\n\t\t\t\t\tend: new Date(now.getFullYear(), now.getMonth(), now.getDate() - now.getDay() - 1).getTime(),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfilterId: dateRangeFilterId,\n\t\t\t\tlabel: t('photos', 'Last Month'),\n\t\t\t\tvalue: {\n\t\t\t\t\tstart: new Date(now.getFullYear(), now.getMonth() - 1, 1).getTime(),\n\t\t\t\t\tend: new Date(now.getFullYear(), now.getMonth(), 0).getTime(),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfilterId: dateRangeFilterId,\n\t\t\t\tlabel: t('photos', 'Customâ€¦'),\n\t\t\t\tvalue: undefined,\n\t\t\t\tasync getValue() {\n\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\tspawnDialog(CustomDateRangePickerDialog, undefined, resolve)\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t]\n\t},\n\tgetQuery(dateRangeOptions: DateRangeValueType[]): string {\n\t\t// Add one day to the end date to include the whole day.\n\t\tconst dav = dateRangeOptions.map((option) => `\n\t\t\t<d:and>\n\t\t\t\t<d:gt>\n\t\t\t\t\t<d:prop><nc:metadata-photos-original_date_time/></d:prop>\n\t\t\t\t\t<d:literal>${option.start / 1000}</d:literal>\n\t\t\t\t</d:gt>\n\t\t\t\t<d:lt>\n\t\t\t\t\t<d:prop><nc:metadata-photos-original_date_time/></d:prop>\n\t\t\t\t\t<d:literal>${option.end / 1000 + 24 * 60 * 60}</d:literal>\n\t\t\t\t</d:lt>\n\t\t\t</d:and>`)\n\n\t\treturn `<d:or>${dav.join('')}</d:or>`\n\t},\n}\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"mdi-map-marker\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z\\\" /></svg>\"","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { computed, onUnmounted, ref } from 'vue'\nimport router from '../router/index.ts'\n\n/**\n *\n */\nexport default function() {\n\tconst abortController = ref(new AbortController())\n\n\tconst abortSignal = computed(() => abortController.value.signal)\n\n\t/**\n\t *\n\t */\n\tfunction abortPendingRequest() {\n\t\tabortController.value.abort()\n\t\tabortController.value = new AbortController()\n\t}\n\n\tonUnmounted(() => {\n\t\tabortController.value.abort()\n\t})\n\n\trouter.beforeEach((from, to, next) => {\n\t\tabortPendingRequest()\n\t\tnext()\n\t})\n\n\treturn {\n\t\tabortSignal,\n\t\tabortPendingRequest,\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport type { WebDAVClient } from 'webdav'\n\nimport { ref } from 'vue'\nimport {\n\ttype Collection,\n\n\tfetchCollections,\n} from '../services/collectionFetcher.js'\nimport { davClient } from '../services/DavClient.ts'\nimport logger from '../services/logger.js'\nimport store from '../store/index.ts'\nimport useAbortController from './useAbortController.ts'\n\nexport default function() {\n\tconst errorFetchingCollections = ref(null as null | number | Error | unknown)\n\tconst loadingCollections = ref(false)\n\tconst { abortSignal } = useAbortController()\n\n\t/**\n\t *\n\t * @param collectionHome\n\t * @param extraProps\n\t * @param client\n\t */\n\tasync function _fetchCollections(collectionHome: string, extraProps: string[] = [], client: WebDAVClient = davClient): Promise<Collection[]> {\n\t\tif (loadingCollections.value) {\n\t\t\treturn []\n\t\t}\n\n\t\ttry {\n\t\t\tloadingCollections.value = true\n\t\t\terrorFetchingCollections.value = null\n\n\t\t\tconst collections = await fetchCollections(collectionHome, { signal: abortSignal.value }, extraProps, client)\n\n\t\t\tstore.dispatch('addCollections', { collections })\n\n\t\t\treturn collections\n\t\t} catch (error) {\n\t\t\tif (error.response?.status === 404) {\n\t\t\t\terrorFetchingCollections.value = 404\n\t\t\t} else {\n\t\t\t\terrorFetchingCollections.value = error\n\t\t\t}\n\t\t\tlogger.error('Error fetching collections:', { error })\n\t\t} finally {\n\t\t\tloadingCollections.value = false\n\t\t}\n\n\t\treturn []\n\t}\n\n\treturn { fetchCollections: _fetchCollections, errorFetchingCollections, loadingCollections }\n}\n","<!--\n  - SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<NcChip\n\t\tdata-cy-photos-filters-option=\"place\"\n\t\t@close=\"emit('deselect')\">\n\t\t<template v-if=\"value !== undefined\" #icon>\n\t\t\t<img :src=\"placeImageSource\" class=\"place__preview\">\n\t\t</template>\n\t\t<template #default>\n\t\t\t{{ value }}\n\t\t</template>\n\t</NcChip>\n</template>\n\n<script lang=\"ts\" setup>\nimport type { PlacesValueType } from '../../services/PhotosFilters/placesFilter.ts'\n\nimport { generateUrl } from '@nextcloud/router'\nimport { computed } from 'vue'\nimport NcChip from '@nextcloud/vue/components/NcChip'\nimport useFetchCollections from '../../mixins/useFetchCollections.ts'\nimport store from '../../store/index.ts'\nimport { placesPrefix } from '../../store/places.ts'\n\nconst props = defineProps<{\n\tvalue: PlacesValueType\n}>()\n\nconst { fetchCollections } = useFetchCollections()\n\nconst placeImageSource = computed<string>(() => {\n\tconst place = store.getters.getPlace(props.value)\n\n\tif (!place) {\n\t\treturn ''\n\t}\n\n\treturn generateUrl(`/apps/photos/api/v1/preview/${place.attributes['last-photo']}?x=${64}&y=${64}`)\n})\n\nif (Object.values(store.getters.places).length === 0) {\n\tfetchCollections(placesPrefix)\n}\n\nconst emit = defineEmits(['deselect'])\n</script>\n\n<style lang=\"scss\" scoped>\n.place__preview {\n\twidth: 20px;\n\theight: 20px;\n\tborder-radius: 100%;\n}\n</style>\n","/*!\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport type { PhotosFilter } from './PhotosFilter.ts'\n\nimport mapMarkerSvg from '@mdi/svg/svg/map-marker.svg?raw'\nimport { generateUrl } from '@nextcloud/router'\nimport PlacesOption from '../../components/PhotosFilters/PlaceOption.vue'\nimport store from '../../store/index.ts'\nimport { placesPrefix } from '../../store/places.ts'\nimport { fetchCollections } from '../collectionFetcher.ts'\n\nexport type PlacesValueType = string\n\nexport const placesFilterId = 'places'\n\nexport const placesFilter: PhotosFilter<PlacesValueType> = {\n\tid: placesFilterId,\n\ticon: mapMarkerSvg,\n\trenderOptionComponent: PlacesOption,\n\tasync getOptions() {\n\t\tif (Object.values(store.getters.places).length === 0) {\n\t\t\tconst collections = await fetchCollections(placesPrefix)\n\t\t\tstore.dispatch('addCollections', { collections })\n\t\t}\n\n\t\treturn Object.values(Object.values(store.getters.places)).map((place) => {\n\t\t\treturn {\n\t\t\t\tfilterId: placesFilterId,\n\t\t\t\tlabel: place.displayname,\n\t\t\t\tvalue: place.displayname,\n\t\t\t\timgSrc: generateUrl(`/apps/photos/api/v1/preview/${place.attributes['last-photo']}?x=${64}&y=${64}`),\n\t\t\t}\n\t\t})\n\t},\n\tgetQuery(placesId: PlacesValueType[]): string {\n\t\tconst dav = placesId.map((placeId) => `\n\t\t\t<d:eq>\n\t\t\t\t<d:prop><nc:metadata-photos-place/></d:prop>\n\t\t\t\t<d:literal>${placeId}</d:literal>\n\t\t\t</d:eq>\n\t\t`)\n\n\t\treturn `<d:or>${dav.join('')}</d:or>`\n\t},\n}\n","/*!\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { dateRangeFilter } from './dateRangeFilter.ts'\nimport { placesFilter } from './placesFilter.ts'\n\nexport default [\n\tdateRangeFilter,\n\tplacesFilter,\n]\n","<!--\n  - SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"photos-filters-display\">\n\t\t<div\n\t\t\tv-for=\"filter in availableFilters\"\n\t\t\t:key=\"filter.id\"\n\t\t\tclass=\"photos-filters-display__filter\">\n\t\t\t<NcIconSvgWrapper :svg=\"filter.icon\" />\n\n\t\t\t<div class=\"photos-filters-display__filter__options-container\">\n\t\t\t\t<component\n\t\t\t\t\t:is=\"filter.renderOptionComponent\"\n\t\t\t\t\tv-for=\"(value, i) in selectedFilters[filter.id]\"\n\t\t\t\t\t:key=\"`${filter.id}_${i}`\"\n\t\t\t\t\tclass=\"photos-filters-display__filter__options-container__option\"\n\t\t\t\t\t:value=\"value\"\n\t\t\t\t\t@deselect=\"emit('deselect-filter', { filterId: filter.id, value })\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed } from 'vue'\nimport NcIconSvgWrapper from '@nextcloud/vue/components/NcIconSvgWrapper'\nimport filters from '../../services/PhotosFilters/index.ts'\n\nconst props = defineProps<{\n\tselectedFilters: Record<string, unknown[]>\n}>()\n\nconst emit = defineEmits<{\n\t(e: 'deselect-filter', option: { filterId: string, value: unknown }): void\n}>()\n\nconst availableFilters = computed(() => {\n\treturn filters.filter((filter) => {\n\t\tconst filterOptions = props.selectedFilters[filter.id]\n\t\treturn filterOptions !== undefined && filterOptions.length !== 0\n\t})\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.photos-filters-display {\n\t&__filter {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\n\t\t&__options-container {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\t\t\tgap: 4px;\n\n\t\t\t&__option {\n\t\t\t\tmargin: calc((32px - 24px) / 2) 0; // 32 is the size of the icon, 24 is the size of the option. We want to match the size of the icon.\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div\n\t\tclass=\"photos-filters-input\"\n\t\tdata-cy-photos-filters-input>\n\t\t<NcSelect\n\t\t\tclass=\"places-select\"\n\t\t\t:options=\"availableOptionsWithSelection\"\n\t\t\t:aria-label-combobox=\"t('photos', 'Select filters')\"\n\t\t\t:placeholder=\"t('photos', 'Select filters')\"\n\t\t\t:loading=\"loading\"\n\t\t\t:multiple=\"true\"\n\t\t\t@option:selected=\"handleSelectOptions\">\n\t\t\t<template #option=\"option\">\n\t\t\t\t<NcListItemIcon\n\t\t\t\t\t:name=\"option.label\"\n\t\t\t\t\t:is-no-user=\"true\"\n\t\t\t\t\t:url=\"option.imgSrc\" />\n\t\t\t</template>\n\t\t</NcSelect>\n\t</div>\n</template>\n\n<script lang=\"ts\" setup>\nimport type { FilterOption } from '../../services/PhotosFilters/PhotosFilter.ts'\n\nimport { t } from '@nextcloud/l10n'\nimport { computed, ref } from 'vue'\nimport NcListItemIcon from '@nextcloud/vue/components/NcListItemIcon'\nimport NcSelect from '@nextcloud/vue/components/NcSelect'\nimport filters from '../../services/PhotosFilters/index.ts'\n\nconst props = defineProps<{\n\tselectedFilters: Record<string, unknown[]>\n}>()\n\nconst emit = defineEmits<{\n\t(e: 'select-filter', option: FilterOption<unknown>): void\n}>()\n\nconst availableOptions = ref<FilterOption<unknown>[]>([])\nconst availableOptionsWithSelection = computed(() => availableOptions.value.filter((option) => !optionIsSelected(option)))\nconst loading = ref<boolean>(true)\n\nconst getOptionsPromises = filters.map(async (filter) => {\n\tconst options = await filter.getOptions()\n\tavailableOptions.value.push(...options)\n})\n\nPromise.all(getOptionsPromises).then(() => {\n\tloading.value = false\n})\n\nfunction handleSelectOptions(options: FilterOption<unknown>[]): void {\n\toptions.forEach(async (option) => {\n\t\tif (option.getValue !== undefined) {\n\t\t\toption.value = await option.getValue()\n\t\t}\n\n\t\tif (option.value === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\temit('select-filter', option)\n\t})\n}\n\nfunction optionIsSelected(option: FilterOption<unknown>): boolean {\n\treturn props.selectedFilters[option.filterId]?.includes(option.value)\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.photos-filters-input {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tpadding: 8px 8px 0 8px;\n}\n\n:deep(.vs__dropdown-toggle) {\n\tbackground-color: var(--color-main-background);\n}\n</style>\n"],"names":["ref","_sfc_main","_sfc_render","render","_sfc_staticRenderFns","__component__","normalizeComponent","t","store","fetchCollections","generateUrl"],"mappings":"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","x_google_ignoreList":[0,2,4]}
import{g as n}from"./index-D4aMb6Rr.chunk.mjs";import{d as s,t}from"./vue.runtime.esm-DE8Vf-Sj.chunk.mjs";import{d}from"./index-CRBSYXMv.chunk.mjs";import{N as l,l as c}from"./index-DiDFXBG0.chunk.mjs";import{z as u,F as p,n as i,P as h,O as m}from"./icons-I1kUiwaa.chunk.mjs";const f=s({name:"PhotosFolder",components:{NcButton:l,FolderOutline:p,Close:u},props:{path:{type:String,required:!0},canDelete:{type:Boolean,default:!1},rootFolderLabel:{type:String,required:!0},rootFolderIcon:{type:Object,required:!0}},emits:["remove-folder"],computed:{folderName(){return this.path==="/"?this.rootFolderLabel:this.path.split("/").pop()},subname(){switch((this.path.match(/\//g)??[]).length){case 1:return"";case 2:return this.path.split("/").splice(0,2).join("/");default:return this.path.split("/").splice(0,3).join("/")}}},methods:{emitRemoveSourceFolder(){this.$emit("remove-folder")},t}});var F=function(){var e=this,o=e._self._c;return e._self._setupProxy,o("div",{staticClass:"folder"},[e.path==="/"?o(e.rootFolderIcon,{tag:"component"}):o("FolderOutline"),o("span",{staticClass:"folder__info"},[o("div",{staticClass:"folder__path"},[e._v(e._s(e.folderName))]),e.subname!==""?o("div",[e._v(" "+e._s(e.subname)+" ")]):e._e()]),e.canDelete?o("NcButton",{attrs:{type:"tertiary","aria-label":e.t("photos","Delete source directory")},on:{click:e.emitRemoveSourceFolder},scopedSlots:e._u([{key:"icon",fn:function(){return[o("Close",{attrs:{size:20}})]},proxy:!0}],null,!1,2121748766)}):e._e()],1)},S=[],_=i(f,F,S,!1,null,"17787691");const v=_.exports,y=s({name:"PhotosSourceLocationsSettings",components:{NcButton:l,PhotosFolder:v,Plus:h},data(){return{FolderMultipleOutline:m}},computed:{photosSourceFolders(){return this.$store.state.userConfig.photosSourceFolders}},methods:{debounceAddSourceFolder:d(function(...e){this.addSourceFolder(...e)},200,{immediate:!1}),async openFilePicker(e){return n(e).setMultiSelect(!1).addMimeTypeFilter("httpd/unix-directory").allowDirectories().addButton({label:t("photos","Pick folder"),callback:o=>c.debug("Picked",{nodes:o})}).build().pick()},async addSourceFolder(){const e=await this.openFilePicker(t("photos","Select a source folder for your media"));this.photosSourceFolders.includes(e)||this.$store.dispatch("updateUserConfig",{key:"photosSourceFolders",value:[...this.photosSourceFolders,e]})},removeSourceFolder(e){const o=[...this.photosSourceFolders];o.splice(e,1),this.$store.dispatch("updateUserConfig",{key:"photosSourceFolders",value:o})},t}});var b=function(){var e=this,o=e._self._c;return e._self._setupProxy,o("div",{staticClass:"photos-locations-container"},[o("div",{staticClass:"photos-locations"},e._l(e.photosSourceFolders,function(a,r){return o("li",{key:r},[o("PhotosFolder",{attrs:{path:a,"can-delete":e.photosSourceFolders.length!==1,"root-folder-label":e.t("photos","All folders"),"root-folder-icon":e.FolderMultipleOutline},on:{"remove-folder":function(g){return e.removeSourceFolder(r)}}})],1)}),0),o("NcButton",{attrs:{"aria-label":e.t("photos","Add a Photos source for the timelines")},on:{click:e.debounceAddSourceFolder},scopedSlots:e._u([{key:"icon",fn:function(){return[o("Plus",{attrs:{size:20}})]},proxy:!0}])},[e._v(" "+e._s(e.t("photos","Add folder"))+" ")])],1)},P=[],k=i(y,b,P,!1,null,"1021a57e");const A=k.exports;export{v as P,A as a};
//# sourceMappingURL=PhotosSourceLocationsSettings-1-duP_W0.chunk.mjs.map

{"version":3,"file":"PlaceContent-DzjCP_BX.chunk.mjs","sources":["../src/views/PlaceContent.vue"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div>\n\t\t<CollectionContent\n\t\t\tref=\"collectionContent\"\n\t\t\t:collection=\"place\"\n\t\t\t:collection-file-ids=\"placeFileIds\"\n\t\t\t:allow-selection=\"false\"\n\t\t\t:loading=\"loadingCollection || loadingCollectionFiles\"\n\t\t\t:error=\"errorFetchingCollection || errorFetchingCollectionFiles\">\n\t\t\t<!-- Header -->\n\t\t\t<HeaderNavigation\n\t\t\t\tv-if=\"place !== null\"\n\t\t\t\tkey=\"navigation\"\n\t\t\t\tslot=\"header\"\n\t\t\t\t:loading=\"loadingCollection || loadingCollectionFiles\"\n\t\t\t\t:params=\"{ placeName }\"\n\t\t\t\t:path=\"'/' + placeName\"\n\t\t\t\t:title=\"place.basename\"\n\t\t\t\t@refresh=\"fetchPlaceFiles\" />\n\n\t\t\t<!-- No content -->\n\t\t\t<NcEmptyContent\n\t\t\t\tslot=\"empty-content\"\n\t\t\t\t:name=\"t('photos', 'This place does not have any photos or videos yet!')\"\n\t\t\t\tclass=\"place__empty\">\n\t\t\t\t<ImagePlusOutline slot=\"icon\" />\n\n\t\t\t\t<NcButton\n\t\t\t\t\tslot=\"action\"\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t:aria-label=\"t('photos', 'Add photos to this place')\"\n\t\t\t\t\t@click=\"showAddPhotosModal = true\">\n\t\t\t\t\t<Plus slot=\"icon\" />\n\t\t\t\t\t{{ t('photos', \"Add\") }}\n\t\t\t\t</NcButton>\n\t\t\t</NcEmptyContent>\n\t\t</CollectionContent>\n\t</div>\n</template>\n\n<script lang='ts'>\nimport type { Collection } from '../services/collectionFetcher.js'\n\nimport { translate } from '@nextcloud/l10n'\nimport { useIsMobile } from '@nextcloud/vue/composables/useIsMobile'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcEmptyContent from '@nextcloud/vue/components/NcEmptyContent'\nimport ImagePlusOutline from 'vue-material-design-icons/ImagePlusOutline.vue'\nimport Plus from 'vue-material-design-icons/Plus.vue'\nimport CollectionContent from '../components/Collection/CollectionContent.vue'\nimport HeaderNavigation from '../components/HeaderNavigation.vue'\nimport FetchCollectionContentMixin from '../mixins/FetchCollectionContentMixin.js'\nimport { placesPrefix } from '../store/places.js'\n\nexport default {\n\tname: 'PlaceContent',\n\tcomponents: {\n\t\tPlus,\n\t\tImagePlusOutline,\n\t\tNcEmptyContent,\n\t\tNcButton,\n\t\tCollectionContent,\n\t\tHeaderNavigation,\n\t},\n\n\tmixins: [FetchCollectionContentMixin],\n\n\tprops: {\n\t\tplaceName: {\n\t\t\ttype: String,\n\t\t\tdefault: '/',\n\t\t},\n\t},\n\n\tsetup() {\n\t\tconst isMobile = useIsMobile()\n\t\treturn {\n\t\t\tisMobile,\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tshowAddPhotosModal: false,\n\t\t\tloadingCollection: false,\n\t\t\terrorFetchingCollection: null,\n\t\t\tloadingCount: 0,\n\t\t\tloadingAddFilesToPlace: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tplace(): Collection {\n\t\t\treturn this.$store.getters.getPlace(this.placeName)\n\t\t},\n\n\t\tplaceFileName(): string {\n\t\t\treturn `${placesPrefix}/${this.placeName}`\n\t\t},\n\n\t\tplaceFileIds(): string[] {\n\t\t\treturn this.$store.getters.getPlaceFiles(this.placeName)\n\t\t},\n\t},\n\n\tasync beforeMount() {\n\t\tawait this.fetchPlace()\n\t\tawait this.fetchPlaceFiles()\n\t},\n\n\tmethods: {\n\t\tasync fetchPlace() {\n\t\t\tthis.fetchCollection(this.placeFileName)\n\t\t},\n\n\t\tasync fetchPlaceFiles() {\n\t\t\tthis.fetchCollectionFiles(this.placeFileName)\n\t\t},\n\n\t\tt: translate,\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.place {\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t&__title {\n\t\twidth: 100%;\n\t}\n\n\t&__name {\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\t&__place {\n\t\tmargin-inline-start: -4px;\n\t\tdisplay: flex;\n\t\tcolor: var(--color-text-lighter);\n\t}\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AA0DA,MAAA,YAAA;AAAA,EACA,MAAA;AAAA,EACA,YAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACA;AAAA,EAEA,QAAA,CAAA,2BAAA;AAAA,EAEA,OAAA;AAAA,IACA,WAAA;AAAA,MACA,MAAA;AAAA,MACA,SAAA;AAAA,IAAA;AAAA,EAEA;AAAA,EAEA,QAAA;AACA,UAAA,WAAA,YAAA;AACA,WAAA;AAAA,MACA;AAAA,IACA;AAAA,EACA;AAAA,EAEA,OAAA;AACA,WAAA;AAAA,MACA,oBAAA;AAAA,MACA,mBAAA;AAAA,MACA,yBAAA;AAAA,MACA,cAAA;AAAA,MACA,wBAAA;AAAA,IACA;AAAA,EACA;AAAA,EAEA,UAAA;AAAA,IACA,QAAA;AACA,aAAA,KAAA,OAAA,QAAA,SAAA,KAAA,SAAA;AAAA,IACA;AAAA,IAEA,gBAAA;AACA,aAAA,GAAA,YAAA,IAAA,KAAA,SAAA;AAAA,IACA;AAAA,IAEA,eAAA;AACA,aAAA,KAAA,OAAA,QAAA,cAAA,KAAA,SAAA;AAAA,IAAA;AAAA,EAEA;AAAA,EAEA,MAAA,cAAA;AACA,UAAA,KAAA,WAAA;AACA,UAAA,KAAA,gBAAA;AAAA,EACA;AAAA,EAEA,SAAA;AAAA,IACA,MAAA,aAAA;AACA,WAAA,gBAAA,KAAA,aAAA;AAAA,IACA;AAAA,IAEA,MAAA,kBAAA;AACA,WAAA,qBAAA,KAAA,aAAA;AAAA,IACA;AAAA,IAEA,GAAA;AAAA,EAAA;AAEA;;;;;;;;;;;;;;;;;;;"}
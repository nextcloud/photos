{"version":3,"file":"fileFetcher-BIoD3dZH.chunk.mjs","sources":["../src/services/fileFetcher.ts"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport type { AxiosError } from 'axios'\nimport type { FileStat, ResponseDataDetailed, StatOptions } from 'webdav'\nimport { genFileInfo } from '../utils/fileUtils.js'\nimport { davClient } from './DavClient'\nimport { getPropFind } from './DavRequest'\n\nexport async function fetchFile(fileName: string, options: StatOptions = {}) {\n\ttry {\n\t\tconst response = await davClient.stat(fileName, {\n\t\t\tdata: getPropFind(),\n\t\t\tdetails: true,\n\t\t\t...options,\n\t\t}) as ResponseDataDetailed<FileStat>\n\n\t\treturn genFileInfo(response.data)\n\t} catch (error) {\n\t\tif ((error as AxiosError).code === 'ERR_CANCELED') {\n\t\t\treturn null\n\t\t}\n\n\t\tthrow error\n\t}\n}\n"],"names":["fetchFile","fileName","options","response","davClient","getPropFind","genFileInfo","error"],"mappings":"6DAWA,eAAsBA,EAAUC,EAAkBC,EAAuB,GAAI,CACxE,GAAA,CACH,MAAMC,EAAW,MAAMC,EAAU,KAAKH,EAAU,CAC/C,KAAMI,EAAY,EAClB,QAAS,GACT,GAAGH,CAAA,CACH,EAEM,OAAAI,EAAYH,EAAS,IAAI,QACxBI,EAAO,CACV,GAAAA,EAAqB,OAAS,eAC3B,OAAA,KAGF,MAAAA,CAAA,CAER"}
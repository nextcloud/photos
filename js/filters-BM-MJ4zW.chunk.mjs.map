{"version":3,"mappings":"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","names":["getDevtoolsGlobalHook","getTarget","isProxyAvailable","HOOK_SETUP","HOOK_PLUGIN_SETTINGS_SET","supported","perf","isPerformanceSupported","_a","now","ApiProxy","plugin","hook","defaultSettings","id","item","localSettingsSaveId","currentSettings","raw","data","value","pluginId","_target","prop","args","resolve","target","setupDevtoolsPlugin","pluginDescriptor","setupFn","descriptor","enableProxy","proxy","activePinia","setActivePinia","pinia","piniaSymbol","isPlainObject","o","MutationType","IS_CLIENT","_global","global","bom","blob","autoBom","download","url","name","opts","xhr","saveAs","corsEnabled","click","node","evt","_navigator","isMacOSWebView","downloadSaveAs","msSaveAs","fileSaverSaveAs","a","popup","force","isSafari","isChromeIOS","reader","toastMessage","message","type","piniaMessage","isPinia","checkClipboardAccess","checkNotFocusedError","error","actionGlobalCopyState","actionGlobalPasteState","loadStoresState","actionGlobalSaveState","fileInput","getFileOpener","openFile","reject","files","file","actionGlobalOpenStateFile","result","text","state","key","storeState","formatDisplay","display","PINIA_ROOT_LABEL","PINIA_ROOT_ID","formatStoreForInspectorTree","store","formatStoreForInspectorState","storeNames","storeMap","storeId","getters","getterName","formatEventData","events","event","formatMutationType","isTimelineActive","componentStateTypes","MUTATIONS_LAYER_ID","INSPECTOR_ID","assign$1","getStoreType","registerPiniaDevtools","app","api","nodeId","payload","ctx","piniaStores","toRaw","stores","inspectedStore","path","addStoreToDevtools","after","onError","groupId","runningActionId","activeAction","watch","unref","newValue","oldValue","eventData","hotUpdate","markRaw","newStore","$dispose","patchActionForGrouping","actionNames","wrapWithProxy","actions","storeActions","actionName","_actionId","trackedStore","retValue","devtoolsPlugin","options","originalHotUpdate","createPinia","scope","effectScope","ref","_p","noop","addSubscription","subscriptions","callback","detached","onCleanup","removeSubscription","idx","getCurrentScope","onScopeDispose","triggerSubscriptions","fallbackRunWithContext","fn","ACTION_MARKER","ACTION_NAME","mergeReactiveObjects","patchToApply","subPatch","targetValue","isRef","isReactive","skipHydrateSymbol","shouldHydrate","obj","assign","isComputed","createOptionsStore","hot","initialState","setup","set","localState","toRefs","computedGetters","computed","createSetupStore","$id","isOptionsStore","optionsForPlugin","$subscribeOptions","isListening","isSyncListening","actionSubscriptions","debuggerEvents","hotState","activeListener","$patch","partialStateOrMutator","subscriptionMutation","myListenerId","nextTick","$reset","newState","$state","action","wrappedAction","afterCallbackList","onErrorCallbackList","ret","_hmrPayload","partialStore","stopWatcher","reactive","setupStore","actionValue","nonEnumerable","p","extender","extensions","defineStore","idOrOptions","setupOptions","isSetupStore","useStore","hasContext","hasInjectionContext","inject","storeToRefs","PiniaVuePlugin","_Vue","provideCache","v","basename","extname2","extname","base","index","IconMove","IconCopy","FilePickerClosed","FilePicker","title","multiSelect","mimeTypeFilter","directoriesAllowed","buttons","filter","canPick","container","disabledNavigation","FilePickerVue","__vitePreload","spawnDialog$1","rest","nodes","FilePickerBuilder","ms","button","factory","label","t","n","allow","getFilePickerBuilder","_sfc_main$1","defineComponent","NcButton","FolderOutline","Close","_sfc_main","PhotosFolder","Plus","FolderMultipleOutline","debounce","logger","pickedFolder","folders","useFilterStore","selectedFilters","filters","acc","filtersQuery","values"],"ignoreList":[0,1,2,3,4,5,6,7],"sources":["../node_modules/@vue/devtools-api/lib/esm/env.js","../node_modules/@vue/devtools-api/lib/esm/const.js","../node_modules/@vue/devtools-api/lib/esm/time.js","../node_modules/@vue/devtools-api/lib/esm/proxy.js","../node_modules/@vue/devtools-api/lib/esm/index.js","../node_modules/pinia/dist/pinia.mjs","../node_modules/@nextcloud/dialogs/node_modules/@nextcloud/paths/dist/index.mjs","../node_modules/@nextcloud/dialogs/dist/index.mjs","../src/components/Settings/PhotosFolder.vue","../src/components/Settings/PhotosSourceLocationsSettings.vue","../src/store/filters.ts"],"sourcesContent":["export function getDevtoolsGlobalHook() {\n    return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__;\n}\nexport function getTarget() {\n    // @ts-expect-error navigator and windows are not available in all environments\n    return (typeof navigator !== 'undefined' && typeof window !== 'undefined')\n        ? window\n        : typeof globalThis !== 'undefined'\n            ? globalThis\n            : {};\n}\nexport const isProxyAvailable = typeof Proxy === 'function';\n","export const HOOK_SETUP = 'devtools-plugin:setup';\nexport const HOOK_PLUGIN_SETTINGS_SET = 'plugin:settings:set';\n","let supported;\nlet perf;\nexport function isPerformanceSupported() {\n    var _a;\n    if (supported !== undefined) {\n        return supported;\n    }\n    if (typeof window !== 'undefined' && window.performance) {\n        supported = true;\n        perf = window.performance;\n    }\n    else if (typeof globalThis !== 'undefined' && ((_a = globalThis.perf_hooks) === null || _a === void 0 ? void 0 : _a.performance)) {\n        supported = true;\n        perf = globalThis.perf_hooks.performance;\n    }\n    else {\n        supported = false;\n    }\n    return supported;\n}\nexport function now() {\n    return isPerformanceSupported() ? perf.now() : Date.now();\n}\n","import { HOOK_PLUGIN_SETTINGS_SET } from './const.js';\nimport { now } from './time.js';\nexport class ApiProxy {\n    constructor(plugin, hook) {\n        this.target = null;\n        this.targetQueue = [];\n        this.onQueue = [];\n        this.plugin = plugin;\n        this.hook = hook;\n        const defaultSettings = {};\n        if (plugin.settings) {\n            for (const id in plugin.settings) {\n                const item = plugin.settings[id];\n                defaultSettings[id] = item.defaultValue;\n            }\n        }\n        const localSettingsSaveId = `__vue-devtools-plugin-settings__${plugin.id}`;\n        let currentSettings = Object.assign({}, defaultSettings);\n        try {\n            const raw = localStorage.getItem(localSettingsSaveId);\n            const data = JSON.parse(raw);\n            Object.assign(currentSettings, data);\n        }\n        catch (e) {\n            // noop\n        }\n        this.fallbacks = {\n            getSettings() {\n                return currentSettings;\n            },\n            setSettings(value) {\n                try {\n                    localStorage.setItem(localSettingsSaveId, JSON.stringify(value));\n                }\n                catch (e) {\n                    // noop\n                }\n                currentSettings = value;\n            },\n            now() {\n                return now();\n            },\n        };\n        if (hook) {\n            hook.on(HOOK_PLUGIN_SETTINGS_SET, (pluginId, value) => {\n                if (pluginId === this.plugin.id) {\n                    this.fallbacks.setSettings(value);\n                }\n            });\n        }\n        this.proxiedOn = new Proxy({}, {\n            get: (_target, prop) => {\n                if (this.target) {\n                    return this.target.on[prop];\n                }\n                else {\n                    return (...args) => {\n                        this.onQueue.push({\n                            method: prop,\n                            args,\n                        });\n                    };\n                }\n            },\n        });\n        this.proxiedTarget = new Proxy({}, {\n            get: (_target, prop) => {\n                if (this.target) {\n                    return this.target[prop];\n                }\n                else if (prop === 'on') {\n                    return this.proxiedOn;\n                }\n                else if (Object.keys(this.fallbacks).includes(prop)) {\n                    return (...args) => {\n                        this.targetQueue.push({\n                            method: prop,\n                            args,\n                            resolve: () => { },\n                        });\n                        return this.fallbacks[prop](...args);\n                    };\n                }\n                else {\n                    return (...args) => {\n                        return new Promise((resolve) => {\n                            this.targetQueue.push({\n                                method: prop,\n                                args,\n                                resolve,\n                            });\n                        });\n                    };\n                }\n            },\n        });\n    }\n    async setRealTarget(target) {\n        this.target = target;\n        for (const item of this.onQueue) {\n            this.target.on[item.method](...item.args);\n        }\n        for (const item of this.targetQueue) {\n            item.resolve(await this.target[item.method](...item.args));\n        }\n    }\n}\n","import { getDevtoolsGlobalHook, getTarget, isProxyAvailable } from './env.js';\nimport { HOOK_SETUP } from './const.js';\nimport { ApiProxy } from './proxy.js';\nexport * from './api/index.js';\nexport * from './plugin.js';\nexport * from './time.js';\nexport function setupDevtoolsPlugin(pluginDescriptor, setupFn) {\n    const descriptor = pluginDescriptor;\n    const target = getTarget();\n    const hook = getDevtoolsGlobalHook();\n    const enableProxy = isProxyAvailable && descriptor.enableEarlyProxy;\n    if (hook && (target.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !enableProxy)) {\n        hook.emit(HOOK_SETUP, pluginDescriptor, setupFn);\n    }\n    else {\n        const proxy = enableProxy ? new ApiProxy(descriptor, hook) : null;\n        const list = target.__VUE_DEVTOOLS_PLUGINS__ = target.__VUE_DEVTOOLS_PLUGINS__ || [];\n        list.push({\n            pluginDescriptor: descriptor,\n            setupFn,\n            proxy,\n        });\n        if (proxy) {\n            setupFn(proxy.proxiedTarget);\n        }\n    }\n}\n","/*!\n * pinia v2.3.1\n * (c) 2025 Eduardo San Martin Morote\n * @license MIT\n */\nimport { hasInjectionContext, inject, toRaw, watch, unref, markRaw, effectScope, ref, isVue2, isRef, isReactive, set, getCurrentScope, onScopeDispose, getCurrentInstance, reactive, toRef, del, nextTick, computed, toRefs } from 'vue-demi';\nimport { setupDevtoolsPlugin } from '@vue/devtools-api';\n\n/**\n * setActivePinia must be called to handle SSR at the top of functions like\n * `fetch`, `setup`, `serverPrefetch` and others\n */\nlet activePinia;\n/**\n * Sets or unsets the active pinia. Used in SSR and internally when calling\n * actions and getters\n *\n * @param pinia - Pinia instance\n */\n// @ts-expect-error: cannot constrain the type of the return\nconst setActivePinia = (pinia) => (activePinia = pinia);\n/**\n * Get the currently active pinia if there is any.\n */\nconst getActivePinia = () => (hasInjectionContext() && inject(piniaSymbol)) || activePinia;\nconst piniaSymbol = ((process.env.NODE_ENV !== 'production') ? Symbol('pinia') : /* istanbul ignore next */ Symbol());\n\nfunction isPlainObject(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\no) {\n    return (o &&\n        typeof o === 'object' &&\n        Object.prototype.toString.call(o) === '[object Object]' &&\n        typeof o.toJSON !== 'function');\n}\n// type DeepReadonly<T> = { readonly [P in keyof T]: DeepReadonly<T[P]> }\n// TODO: can we change these to numbers?\n/**\n * Possible types for SubscriptionCallback\n */\nvar MutationType;\n(function (MutationType) {\n    /**\n     * Direct mutation of the state:\n     *\n     * - `store.name = 'new name'`\n     * - `store.$state.name = 'new name'`\n     * - `store.list.push('new item')`\n     */\n    MutationType[\"direct\"] = \"direct\";\n    /**\n     * Mutated the state with `$patch` and an object\n     *\n     * - `store.$patch({ name: 'newName' })`\n     */\n    MutationType[\"patchObject\"] = \"patch object\";\n    /**\n     * Mutated the state with `$patch` and a function\n     *\n     * - `store.$patch(state => state.name = 'newName')`\n     */\n    MutationType[\"patchFunction\"] = \"patch function\";\n    // maybe reset? for $state = {} and $reset\n})(MutationType || (MutationType = {}));\n\nconst IS_CLIENT = typeof window !== 'undefined';\n\n/*\n * FileSaver.js A saveAs() FileSaver implementation.\n *\n * Originally by Eli Grey, adapted as an ESM module by Eduardo San Martin\n * Morote.\n *\n * License : MIT\n */\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nconst _global = /*#__PURE__*/ (() => typeof window === 'object' && window.window === window\n    ? window\n    : typeof self === 'object' && self.self === self\n        ? self\n        : typeof global === 'object' && global.global === global\n            ? global\n            : typeof globalThis === 'object'\n                ? globalThis\n                : { HTMLElement: null })();\nfunction bom(blob, { autoBom = false } = {}) {\n    // prepend BOM for UTF-8 XML and text/* types (including HTML)\n    // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n    if (autoBom &&\n        /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n        return new Blob([String.fromCharCode(0xfeff), blob], { type: blob.type });\n    }\n    return blob;\n}\nfunction download(url, name, opts) {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.responseType = 'blob';\n    xhr.onload = function () {\n        saveAs(xhr.response, name, opts);\n    };\n    xhr.onerror = function () {\n        console.error('could not download file');\n    };\n    xhr.send();\n}\nfunction corsEnabled(url) {\n    const xhr = new XMLHttpRequest();\n    // use sync to avoid popup blocker\n    xhr.open('HEAD', url, false);\n    try {\n        xhr.send();\n    }\n    catch (e) { }\n    return xhr.status >= 200 && xhr.status <= 299;\n}\n// `a.click()` doesn't work for all browsers (#465)\nfunction click(node) {\n    try {\n        node.dispatchEvent(new MouseEvent('click'));\n    }\n    catch (e) {\n        const evt = document.createEvent('MouseEvents');\n        evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\n        node.dispatchEvent(evt);\n    }\n}\nconst _navigator = typeof navigator === 'object' ? navigator : { userAgent: '' };\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nconst isMacOSWebView = /*#__PURE__*/ (() => /Macintosh/.test(_navigator.userAgent) &&\n    /AppleWebKit/.test(_navigator.userAgent) &&\n    !/Safari/.test(_navigator.userAgent))();\nconst saveAs = !IS_CLIENT\n    ? () => { } // noop\n    : // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView or mini program\n        typeof HTMLAnchorElement !== 'undefined' &&\n            'download' in HTMLAnchorElement.prototype &&\n            !isMacOSWebView\n            ? downloadSaveAs\n            : // Use msSaveOrOpenBlob as a second approach\n                'msSaveOrOpenBlob' in _navigator\n                    ? msSaveAs\n                    : // Fallback to using FileReader and a popup\n                        fileSaverSaveAs;\nfunction downloadSaveAs(blob, name = 'download', opts) {\n    const a = document.createElement('a');\n    a.download = name;\n    a.rel = 'noopener'; // tabnabbing\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n    if (typeof blob === 'string') {\n        // Support regular links\n        a.href = blob;\n        if (a.origin !== location.origin) {\n            if (corsEnabled(a.href)) {\n                download(blob, name, opts);\n            }\n            else {\n                a.target = '_blank';\n                click(a);\n            }\n        }\n        else {\n            click(a);\n        }\n    }\n    else {\n        // Support blobs\n        a.href = URL.createObjectURL(blob);\n        setTimeout(function () {\n            URL.revokeObjectURL(a.href);\n        }, 4e4); // 40s\n        setTimeout(function () {\n            click(a);\n        }, 0);\n    }\n}\nfunction msSaveAs(blob, name = 'download', opts) {\n    if (typeof blob === 'string') {\n        if (corsEnabled(blob)) {\n            download(blob, name, opts);\n        }\n        else {\n            const a = document.createElement('a');\n            a.href = blob;\n            a.target = '_blank';\n            setTimeout(function () {\n                click(a);\n            });\n        }\n    }\n    else {\n        // @ts-ignore: works on windows\n        navigator.msSaveOrOpenBlob(bom(blob, opts), name);\n    }\n}\nfunction fileSaverSaveAs(blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank');\n    if (popup) {\n        popup.document.title = popup.document.body.innerText = 'downloading...';\n    }\n    if (typeof blob === 'string')\n        return download(blob, name, opts);\n    const force = blob.type === 'application/octet-stream';\n    const isSafari = /constructor/i.test(String(_global.HTMLElement)) || 'safari' in _global;\n    const isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent);\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) &&\n        typeof FileReader !== 'undefined') {\n        // Safari doesn't allow downloading of blob URLs\n        const reader = new FileReader();\n        reader.onloadend = function () {\n            let url = reader.result;\n            if (typeof url !== 'string') {\n                popup = null;\n                throw new Error('Wrong reader.result type');\n            }\n            url = isChromeIOS\n                ? url\n                : url.replace(/^data:[^;]*;/, 'data:attachment/file;');\n            if (popup) {\n                popup.location.href = url;\n            }\n            else {\n                location.assign(url);\n            }\n            popup = null; // reverse-tabnabbing #460\n        };\n        reader.readAsDataURL(blob);\n    }\n    else {\n        const url = URL.createObjectURL(blob);\n        if (popup)\n            popup.location.assign(url);\n        else\n            location.href = url;\n        popup = null; // reverse-tabnabbing #460\n        setTimeout(function () {\n            URL.revokeObjectURL(url);\n        }, 4e4); // 40s\n    }\n}\n\n/**\n * Shows a toast or console.log\n *\n * @param message - message to log\n * @param type - different color of the tooltip\n */\nfunction toastMessage(message, type) {\n    const piniaMessage = 'ðŸ ' + message;\n    if (typeof __VUE_DEVTOOLS_TOAST__ === 'function') {\n        // No longer available :(\n        __VUE_DEVTOOLS_TOAST__(piniaMessage, type);\n    }\n    else if (type === 'error') {\n        console.error(piniaMessage);\n    }\n    else if (type === 'warn') {\n        console.warn(piniaMessage);\n    }\n    else {\n        console.log(piniaMessage);\n    }\n}\nfunction isPinia(o) {\n    return '_a' in o && 'install' in o;\n}\n\n/**\n * This file contain devtools actions, they are not Pinia actions.\n */\n// ---\nfunction checkClipboardAccess() {\n    if (!('clipboard' in navigator)) {\n        toastMessage(`Your browser doesn't support the Clipboard API`, 'error');\n        return true;\n    }\n}\nfunction checkNotFocusedError(error) {\n    if (error instanceof Error &&\n        error.message.toLowerCase().includes('document is not focused')) {\n        toastMessage('You need to activate the \"Emulate a focused page\" setting in the \"Rendering\" panel of devtools.', 'warn');\n        return true;\n    }\n    return false;\n}\nasync function actionGlobalCopyState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        await navigator.clipboard.writeText(JSON.stringify(pinia.state.value));\n        toastMessage('Global state copied to clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to serialize the state. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalPasteState(pinia) {\n    if (checkClipboardAccess())\n        return;\n    try {\n        loadStoresState(pinia, JSON.parse(await navigator.clipboard.readText()));\n        toastMessage('Global state pasted from clipboard.');\n    }\n    catch (error) {\n        if (checkNotFocusedError(error))\n            return;\n        toastMessage(`Failed to deserialize the state from clipboard. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nasync function actionGlobalSaveState(pinia) {\n    try {\n        saveAs(new Blob([JSON.stringify(pinia.state.value)], {\n            type: 'text/plain;charset=utf-8',\n        }), 'pinia-state.json');\n    }\n    catch (error) {\n        toastMessage(`Failed to export the state as JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nlet fileInput;\nfunction getFileOpener() {\n    if (!fileInput) {\n        fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.accept = '.json';\n    }\n    function openFile() {\n        return new Promise((resolve, reject) => {\n            fileInput.onchange = async () => {\n                const files = fileInput.files;\n                if (!files)\n                    return resolve(null);\n                const file = files.item(0);\n                if (!file)\n                    return resolve(null);\n                return resolve({ text: await file.text(), file });\n            };\n            // @ts-ignore: TODO: changed from 4.3 to 4.4\n            fileInput.oncancel = () => resolve(null);\n            fileInput.onerror = reject;\n            fileInput.click();\n        });\n    }\n    return openFile;\n}\nasync function actionGlobalOpenStateFile(pinia) {\n    try {\n        const open = getFileOpener();\n        const result = await open();\n        if (!result)\n            return;\n        const { text, file } = result;\n        loadStoresState(pinia, JSON.parse(text));\n        toastMessage(`Global state imported from \"${file.name}\".`);\n    }\n    catch (error) {\n        toastMessage(`Failed to import the state from JSON. Check the console for more details.`, 'error');\n        console.error(error);\n    }\n}\nfunction loadStoresState(pinia, state) {\n    for (const key in state) {\n        const storeState = pinia.state.value[key];\n        // store is already instantiated, patch it\n        if (storeState) {\n            Object.assign(storeState, state[key]);\n        }\n        else {\n            // store is not instantiated, set the initial state\n            pinia.state.value[key] = state[key];\n        }\n    }\n}\n\nfunction formatDisplay(display) {\n    return {\n        _custom: {\n            display,\n        },\n    };\n}\nconst PINIA_ROOT_LABEL = 'ðŸ Pinia (root)';\nconst PINIA_ROOT_ID = '_root';\nfunction formatStoreForInspectorTree(store) {\n    return isPinia(store)\n        ? {\n            id: PINIA_ROOT_ID,\n            label: PINIA_ROOT_LABEL,\n        }\n        : {\n            id: store.$id,\n            label: store.$id,\n        };\n}\nfunction formatStoreForInspectorState(store) {\n    if (isPinia(store)) {\n        const storeNames = Array.from(store._s.keys());\n        const storeMap = store._s;\n        const state = {\n            state: storeNames.map((storeId) => ({\n                editable: true,\n                key: storeId,\n                value: store.state.value[storeId],\n            })),\n            getters: storeNames\n                .filter((id) => storeMap.get(id)._getters)\n                .map((id) => {\n                const store = storeMap.get(id);\n                return {\n                    editable: false,\n                    key: id,\n                    value: store._getters.reduce((getters, key) => {\n                        getters[key] = store[key];\n                        return getters;\n                    }, {}),\n                };\n            }),\n        };\n        return state;\n    }\n    const state = {\n        state: Object.keys(store.$state).map((key) => ({\n            editable: true,\n            key,\n            value: store.$state[key],\n        })),\n    };\n    // avoid adding empty getters\n    if (store._getters && store._getters.length) {\n        state.getters = store._getters.map((getterName) => ({\n            editable: false,\n            key: getterName,\n            value: store[getterName],\n        }));\n    }\n    if (store._customProperties.size) {\n        state.customProperties = Array.from(store._customProperties).map((key) => ({\n            editable: true,\n            key,\n            value: store[key],\n        }));\n    }\n    return state;\n}\nfunction formatEventData(events) {\n    if (!events)\n        return {};\n    if (Array.isArray(events)) {\n        // TODO: handle add and delete for arrays and objects\n        return events.reduce((data, event) => {\n            data.keys.push(event.key);\n            data.operations.push(event.type);\n            data.oldValue[event.key] = event.oldValue;\n            data.newValue[event.key] = event.newValue;\n            return data;\n        }, {\n            oldValue: {},\n            keys: [],\n            operations: [],\n            newValue: {},\n        });\n    }\n    else {\n        return {\n            operation: formatDisplay(events.type),\n            key: formatDisplay(events.key),\n            oldValue: events.oldValue,\n            newValue: events.newValue,\n        };\n    }\n}\nfunction formatMutationType(type) {\n    switch (type) {\n        case MutationType.direct:\n            return 'mutation';\n        case MutationType.patchFunction:\n            return '$patch';\n        case MutationType.patchObject:\n            return '$patch';\n        default:\n            return 'unknown';\n    }\n}\n\n// timeline can be paused when directly changing the state\nlet isTimelineActive = true;\nconst componentStateTypes = [];\nconst MUTATIONS_LAYER_ID = 'pinia:mutations';\nconst INSPECTOR_ID = 'pinia';\nconst { assign: assign$1 } = Object;\n/**\n * Gets the displayed name of a store in devtools\n *\n * @param id - id of the store\n * @returns a formatted string\n */\nconst getStoreType = (id) => 'ðŸ ' + id;\n/**\n * Add the pinia plugin without any store. Allows displaying a Pinia plugin tab\n * as soon as it is added to the application.\n *\n * @param app - Vue application\n * @param pinia - pinia instance\n */\nfunction registerPiniaDevtools(app, pinia) {\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia ðŸ',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n    }, (api) => {\n        if (typeof api.now !== 'function') {\n            toastMessage('You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.');\n        }\n        api.addTimelineLayer({\n            id: MUTATIONS_LAYER_ID,\n            label: `Pinia ðŸ`,\n            color: 0xe5df88,\n        });\n        api.addInspector({\n            id: INSPECTOR_ID,\n            label: 'Pinia ðŸ',\n            icon: 'storage',\n            treeFilterPlaceholder: 'Search stores',\n            actions: [\n                {\n                    icon: 'content_copy',\n                    action: () => {\n                        actionGlobalCopyState(pinia);\n                    },\n                    tooltip: 'Serialize and copy the state',\n                },\n                {\n                    icon: 'content_paste',\n                    action: async () => {\n                        await actionGlobalPasteState(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Replace the state with the content of your clipboard',\n                },\n                {\n                    icon: 'save',\n                    action: () => {\n                        actionGlobalSaveState(pinia);\n                    },\n                    tooltip: 'Save the state as a JSON file',\n                },\n                {\n                    icon: 'folder_open',\n                    action: async () => {\n                        await actionGlobalOpenStateFile(pinia);\n                        api.sendInspectorTree(INSPECTOR_ID);\n                        api.sendInspectorState(INSPECTOR_ID);\n                    },\n                    tooltip: 'Import the state from a JSON file',\n                },\n            ],\n            nodeActions: [\n                {\n                    icon: 'restore',\n                    tooltip: 'Reset the state (with \"$reset\")',\n                    action: (nodeId) => {\n                        const store = pinia._s.get(nodeId);\n                        if (!store) {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it wasn't found.`, 'warn');\n                        }\n                        else if (typeof store.$reset !== 'function') {\n                            toastMessage(`Cannot reset \"${nodeId}\" store because it doesn't have a \"$reset\" method implemented.`, 'warn');\n                        }\n                        else {\n                            store.$reset();\n                            toastMessage(`Store \"${nodeId}\" reset.`);\n                        }\n                    },\n                },\n            ],\n        });\n        api.on.inspectComponent((payload, ctx) => {\n            const proxy = (payload.componentInstance &&\n                payload.componentInstance.proxy);\n            if (proxy && proxy._pStores) {\n                const piniaStores = payload.componentInstance.proxy._pStores;\n                Object.values(piniaStores).forEach((store) => {\n                    payload.instanceData.state.push({\n                        type: getStoreType(store.$id),\n                        key: 'state',\n                        editable: true,\n                        value: store._isOptionsAPI\n                            ? {\n                                _custom: {\n                                    value: toRaw(store.$state),\n                                    actions: [\n                                        {\n                                            icon: 'restore',\n                                            tooltip: 'Reset the state of this store',\n                                            action: () => store.$reset(),\n                                        },\n                                    ],\n                                },\n                            }\n                            : // NOTE: workaround to unwrap transferred refs\n                                Object.keys(store.$state).reduce((state, key) => {\n                                    state[key] = store.$state[key];\n                                    return state;\n                                }, {}),\n                    });\n                    if (store._getters && store._getters.length) {\n                        payload.instanceData.state.push({\n                            type: getStoreType(store.$id),\n                            key: 'getters',\n                            editable: false,\n                            value: store._getters.reduce((getters, key) => {\n                                try {\n                                    getters[key] = store[key];\n                                }\n                                catch (error) {\n                                    // @ts-expect-error: we just want to show it in devtools\n                                    getters[key] = error;\n                                }\n                                return getters;\n                            }, {}),\n                        });\n                    }\n                });\n            }\n        });\n        api.on.getInspectorTree((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                let stores = [pinia];\n                stores = stores.concat(Array.from(pinia._s.values()));\n                payload.rootNodes = (payload.filter\n                    ? stores.filter((store) => '$id' in store\n                        ? store.$id\n                            .toLowerCase()\n                            .includes(payload.filter.toLowerCase())\n                        : PINIA_ROOT_LABEL.toLowerCase().includes(payload.filter.toLowerCase()))\n                    : stores).map(formatStoreForInspectorTree);\n            }\n        });\n        // Expose pinia instance as $pinia to window\n        globalThis.$pinia = pinia;\n        api.on.getInspectorState((payload) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    // this could be the selected store restored for a different project\n                    // so it's better not to say anything here\n                    return;\n                }\n                if (inspectedStore) {\n                    // Expose selected store as $store to window\n                    if (payload.nodeId !== PINIA_ROOT_ID)\n                        globalThis.$store = toRaw(inspectedStore);\n                    payload.state = formatStoreForInspectorState(inspectedStore);\n                }\n            }\n        });\n        api.on.editInspectorState((payload, ctx) => {\n            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n                const inspectedStore = payload.nodeId === PINIA_ROOT_ID\n                    ? pinia\n                    : pinia._s.get(payload.nodeId);\n                if (!inspectedStore) {\n                    return toastMessage(`store \"${payload.nodeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (!isPinia(inspectedStore)) {\n                    // access only the state\n                    if (path.length !== 1 ||\n                        !inspectedStore._customProperties.has(path[0]) ||\n                        path[0] in inspectedStore.$state) {\n                        path.unshift('$state');\n                    }\n                }\n                else {\n                    // Root access, we can omit the `.value` because the devtools API does it for us\n                    path.unshift('state');\n                }\n                isTimelineActive = false;\n                payload.set(inspectedStore, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n        api.on.editComponentState((payload) => {\n            if (payload.type.startsWith('ðŸ')) {\n                const storeId = payload.type.replace(/^ðŸ\\s*/, '');\n                const store = pinia._s.get(storeId);\n                if (!store) {\n                    return toastMessage(`store \"${storeId}\" not found`, 'error');\n                }\n                const { path } = payload;\n                if (path[0] !== 'state') {\n                    return toastMessage(`Invalid path for store \"${storeId}\":\\n${path}\\nOnly state can be modified.`);\n                }\n                // rewrite the first entry to be able to directly set the state as\n                // well as any other path\n                path[0] = '$state';\n                isTimelineActive = false;\n                payload.set(store, path, payload.state.value);\n                isTimelineActive = true;\n            }\n        });\n    });\n}\nfunction addStoreToDevtools(app, store) {\n    if (!componentStateTypes.includes(getStoreType(store.$id))) {\n        componentStateTypes.push(getStoreType(store.$id));\n    }\n    setupDevtoolsPlugin({\n        id: 'dev.esm.pinia',\n        label: 'Pinia ðŸ',\n        logo: 'https://pinia.vuejs.org/logo.svg',\n        packageName: 'pinia',\n        homepage: 'https://pinia.vuejs.org',\n        componentStateTypes,\n        app,\n        settings: {\n            logStoreChanges: {\n                label: 'Notify about new/deleted stores',\n                type: 'boolean',\n                defaultValue: true,\n            },\n            // useEmojis: {\n            //   label: 'Use emojis in messages âš¡ï¸',\n            //   type: 'boolean',\n            //   defaultValue: true,\n            // },\n        },\n    }, (api) => {\n        // gracefully handle errors\n        const now = typeof api.now === 'function' ? api.now.bind(api) : Date.now;\n        store.$onAction(({ after, onError, name, args }) => {\n            const groupId = runningActionId++;\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: 'ðŸ›« ' + name,\n                    subtitle: 'start',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        action: formatDisplay(name),\n                        args,\n                    },\n                    groupId,\n                },\n            });\n            after((result) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        title: 'ðŸ›¬ ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            result,\n                        },\n                        groupId,\n                    },\n                });\n            });\n            onError((error) => {\n                activeAction = undefined;\n                api.addTimelineEvent({\n                    layerId: MUTATIONS_LAYER_ID,\n                    event: {\n                        time: now(),\n                        logType: 'error',\n                        title: 'ðŸ’¥ ' + name,\n                        subtitle: 'end',\n                        data: {\n                            store: formatDisplay(store.$id),\n                            action: formatDisplay(name),\n                            args,\n                            error,\n                        },\n                        groupId,\n                    },\n                });\n            });\n        }, true);\n        store._customProperties.forEach((name) => {\n            watch(() => unref(store[name]), (newValue, oldValue) => {\n                api.notifyComponentUpdate();\n                api.sendInspectorState(INSPECTOR_ID);\n                if (isTimelineActive) {\n                    api.addTimelineEvent({\n                        layerId: MUTATIONS_LAYER_ID,\n                        event: {\n                            time: now(),\n                            title: 'Change',\n                            subtitle: name,\n                            data: {\n                                newValue,\n                                oldValue,\n                            },\n                            groupId: activeAction,\n                        },\n                    });\n                }\n            }, { deep: true });\n        });\n        store.$subscribe(({ events, type }, state) => {\n            api.notifyComponentUpdate();\n            api.sendInspectorState(INSPECTOR_ID);\n            if (!isTimelineActive)\n                return;\n            // rootStore.state[store.id] = state\n            const eventData = {\n                time: now(),\n                title: formatMutationType(type),\n                data: assign$1({ store: formatDisplay(store.$id) }, formatEventData(events)),\n                groupId: activeAction,\n            };\n            if (type === MutationType.patchFunction) {\n                eventData.subtitle = 'â¤µï¸';\n            }\n            else if (type === MutationType.patchObject) {\n                eventData.subtitle = 'ðŸ§©';\n            }\n            else if (events && !Array.isArray(events)) {\n                eventData.subtitle = events.type;\n            }\n            if (events) {\n                eventData.data['rawEvent(s)'] = {\n                    _custom: {\n                        display: 'DebuggerEvent',\n                        type: 'object',\n                        tooltip: 'raw DebuggerEvent[]',\n                        value: events,\n                    },\n                };\n            }\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: eventData,\n            });\n        }, { detached: true, flush: 'sync' });\n        const hotUpdate = store._hotUpdate;\n        store._hotUpdate = markRaw((newStore) => {\n            hotUpdate(newStore);\n            api.addTimelineEvent({\n                layerId: MUTATIONS_LAYER_ID,\n                event: {\n                    time: now(),\n                    title: 'ðŸ”¥ ' + store.$id,\n                    subtitle: 'HMR update',\n                    data: {\n                        store: formatDisplay(store.$id),\n                        info: formatDisplay(`HMR update`),\n                    },\n                },\n            });\n            // update the devtools too\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n        });\n        const { $dispose } = store;\n        store.$dispose = () => {\n            $dispose();\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(INSPECTOR_ID);\n            api.sendInspectorState(INSPECTOR_ID);\n            api.getSettings().logStoreChanges &&\n                toastMessage(`Disposed \"${store.$id}\" store ðŸ—‘`);\n        };\n        // trigger an update so it can display new registered stores\n        api.notifyComponentUpdate();\n        api.sendInspectorTree(INSPECTOR_ID);\n        api.sendInspectorState(INSPECTOR_ID);\n        api.getSettings().logStoreChanges &&\n            toastMessage(`\"${store.$id}\" store installed ðŸ†•`);\n    });\n}\nlet runningActionId = 0;\nlet activeAction;\n/**\n * Patches a store to enable action grouping in devtools by wrapping the store with a Proxy that is passed as the\n * context of all actions, allowing us to set `runningAction` on each access and effectively associating any state\n * mutation to the action.\n *\n * @param store - store to patch\n * @param actionNames - list of actionst to patch\n */\nfunction patchActionForGrouping(store, actionNames, wrapWithProxy) {\n    // original actions of the store as they are given by pinia. We are going to override them\n    const actions = actionNames.reduce((storeActions, actionName) => {\n        // use toRaw to avoid tracking #541\n        storeActions[actionName] = toRaw(store)[actionName];\n        return storeActions;\n    }, {});\n    for (const actionName in actions) {\n        store[actionName] = function () {\n            // the running action id is incremented in a before action hook\n            const _actionId = runningActionId;\n            const trackedStore = wrapWithProxy\n                ? new Proxy(store, {\n                    get(...args) {\n                        activeAction = _actionId;\n                        return Reflect.get(...args);\n                    },\n                    set(...args) {\n                        activeAction = _actionId;\n                        return Reflect.set(...args);\n                    },\n                })\n                : store;\n            // For Setup Stores we need https://github.com/tc39/proposal-async-context\n            activeAction = _actionId;\n            const retValue = actions[actionName].apply(trackedStore, arguments);\n            // this is safer as async actions in Setup Stores would associate mutations done outside of the action\n            activeAction = undefined;\n            return retValue;\n        };\n    }\n}\n/**\n * pinia.use(devtoolsPlugin)\n */\nfunction devtoolsPlugin({ app, store, options }) {\n    // HMR module\n    if (store.$id.startsWith('__hot:')) {\n        return;\n    }\n    // detect option api vs setup api\n    store._isOptionsAPI = !!options.state;\n    // Do not overwrite actions mocked by @pinia/testing (#2298)\n    if (!store._p._testing) {\n        patchActionForGrouping(store, Object.keys(options.actions), store._isOptionsAPI);\n        // Upgrade the HMR to also update the new actions\n        const originalHotUpdate = store._hotUpdate;\n        toRaw(store)._hotUpdate = function (newStore) {\n            originalHotUpdate.apply(this, arguments);\n            patchActionForGrouping(store, Object.keys(newStore._hmrPayload.actions), !!store._isOptionsAPI);\n        };\n    }\n    addStoreToDevtools(app, \n    // FIXME: is there a way to allow the assignment from Store<Id, S, G, A> to StoreGeneric?\n    store);\n}\n\n/**\n * Creates a Pinia instance to be used by the application\n */\nfunction createPinia() {\n    const scope = effectScope(true);\n    // NOTE: here we could check the window object for a state and directly set it\n    // if there is anything like it with Vue 3 SSR\n    const state = scope.run(() => ref({}));\n    let _p = [];\n    // plugins added before calling app.use(pinia)\n    let toBeInstalled = [];\n    const pinia = markRaw({\n        install(app) {\n            // this allows calling useStore() outside of a component setup after\n            // installing pinia's plugin\n            setActivePinia(pinia);\n            if (!isVue2) {\n                pinia._a = app;\n                app.provide(piniaSymbol, pinia);\n                app.config.globalProperties.$pinia = pinia;\n                /* istanbul ignore else */\n                if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n                    registerPiniaDevtools(app, pinia);\n                }\n                toBeInstalled.forEach((plugin) => _p.push(plugin));\n                toBeInstalled = [];\n            }\n        },\n        use(plugin) {\n            if (!this._a && !isVue2) {\n                toBeInstalled.push(plugin);\n            }\n            else {\n                _p.push(plugin);\n            }\n            return this;\n        },\n        _p,\n        // it's actually undefined here\n        // @ts-expect-error\n        _a: null,\n        _e: scope,\n        _s: new Map(),\n        state,\n    });\n    // pinia devtools rely on dev only features so they cannot be forced unless\n    // the dev build of Vue is used. Avoid old browsers like IE11.\n    if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT && typeof Proxy !== 'undefined') {\n        pinia.use(devtoolsPlugin);\n    }\n    return pinia;\n}\n/**\n * Dispose a Pinia instance by stopping its effectScope and removing the state, plugins and stores. This is mostly\n * useful in tests, with both a testing pinia or a regular pinia and in applications that use multiple pinia instances.\n * Once disposed, the pinia instance cannot be used anymore.\n *\n * @param pinia - pinia instance\n */\nfunction disposePinia(pinia) {\n    pinia._e.stop();\n    pinia._s.clear();\n    pinia._p.splice(0);\n    pinia.state.value = {};\n    // @ts-expect-error: non valid\n    pinia._a = null;\n}\n\n/**\n * Checks if a function is a `StoreDefinition`.\n *\n * @param fn - object to test\n * @returns true if `fn` is a StoreDefinition\n */\nconst isUseStore = (fn) => {\n    return typeof fn === 'function' && typeof fn.$id === 'string';\n};\n/**\n * Mutates in place `newState` with `oldState` to _hot update_ it. It will\n * remove any key not existing in `newState` and recursively merge plain\n * objects.\n *\n * @param newState - new state object to be patched\n * @param oldState - old state that should be used to patch newState\n * @returns - newState\n */\nfunction patchObject(newState, oldState) {\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in oldState) {\n        const subPatch = oldState[key];\n        // skip the whole sub tree\n        if (!(key in newState)) {\n            continue;\n        }\n        const targetValue = newState[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            newState[key] = patchObject(targetValue, subPatch);\n        }\n        else {\n            // objects are either a bit more complex (e.g. refs) or primitives, so we\n            // just set the whole thing\n            if (isVue2) {\n                set(newState, key, subPatch);\n            }\n            else {\n                newState[key] = subPatch;\n            }\n        }\n    }\n    return newState;\n}\n/**\n * Creates an _accept_ function to pass to `import.meta.hot` in Vite applications.\n *\n * @example\n * ```js\n * const useUser = defineStore(...)\n * if (import.meta.hot) {\n *   import.meta.hot.accept(acceptHMRUpdate(useUser, import.meta.hot))\n * }\n * ```\n *\n * @param initialUseStore - return of the defineStore to hot update\n * @param hot - `import.meta.hot`\n */\nfunction acceptHMRUpdate(initialUseStore, hot) {\n    // strip as much as possible from iife.prod\n    if (!(process.env.NODE_ENV !== 'production')) {\n        return () => { };\n    }\n    return (newModule) => {\n        const pinia = hot.data.pinia || initialUseStore._pinia;\n        if (!pinia) {\n            // this store is still not used\n            return;\n        }\n        // preserve the pinia instance across loads\n        hot.data.pinia = pinia;\n        // console.log('got data', newStore)\n        for (const exportName in newModule) {\n            const useStore = newModule[exportName];\n            // console.log('checking for', exportName)\n            if (isUseStore(useStore) && pinia._s.has(useStore.$id)) {\n                // console.log('Accepting update for', useStore.$id)\n                const id = useStore.$id;\n                if (id !== initialUseStore.$id) {\n                    console.warn(`The id of the store changed from \"${initialUseStore.$id}\" to \"${id}\". Reloading.`);\n                    // return import.meta.hot.invalidate()\n                    return hot.invalidate();\n                }\n                const existingStore = pinia._s.get(id);\n                if (!existingStore) {\n                    console.log(`[Pinia]: skipping hmr because store doesn't exist yet`);\n                    return;\n                }\n                useStore(pinia, existingStore);\n            }\n        }\n    };\n}\n\nconst noop = () => { };\nfunction addSubscription(subscriptions, callback, detached, onCleanup = noop) {\n    subscriptions.push(callback);\n    const removeSubscription = () => {\n        const idx = subscriptions.indexOf(callback);\n        if (idx > -1) {\n            subscriptions.splice(idx, 1);\n            onCleanup();\n        }\n    };\n    if (!detached && getCurrentScope()) {\n        onScopeDispose(removeSubscription);\n    }\n    return removeSubscription;\n}\nfunction triggerSubscriptions(subscriptions, ...args) {\n    subscriptions.slice().forEach((callback) => {\n        callback(...args);\n    });\n}\n\nconst fallbackRunWithContext = (fn) => fn();\n/**\n * Marks a function as an action for `$onAction`\n * @internal\n */\nconst ACTION_MARKER = Symbol();\n/**\n * Action name symbol. Allows to add a name to an action after defining it\n * @internal\n */\nconst ACTION_NAME = Symbol();\nfunction mergeReactiveObjects(target, patchToApply) {\n    // Handle Map instances\n    if (target instanceof Map && patchToApply instanceof Map) {\n        patchToApply.forEach((value, key) => target.set(key, value));\n    }\n    else if (target instanceof Set && patchToApply instanceof Set) {\n        // Handle Set instances\n        patchToApply.forEach(target.add, target);\n    }\n    // no need to go through symbols because they cannot be serialized anyway\n    for (const key in patchToApply) {\n        if (!patchToApply.hasOwnProperty(key))\n            continue;\n        const subPatch = patchToApply[key];\n        const targetValue = target[key];\n        if (isPlainObject(targetValue) &&\n            isPlainObject(subPatch) &&\n            target.hasOwnProperty(key) &&\n            !isRef(subPatch) &&\n            !isReactive(subPatch)) {\n            // NOTE: here I wanted to warn about inconsistent types but it's not possible because in setup stores one might\n            // start the value of a property as a certain type e.g. a Map, and then for some reason, during SSR, change that\n            // to `undefined`. When trying to hydrate, we want to override the Map with `undefined`.\n            target[key] = mergeReactiveObjects(targetValue, subPatch);\n        }\n        else {\n            // @ts-expect-error: subPatch is a valid value\n            target[key] = subPatch;\n        }\n    }\n    return target;\n}\nconst skipHydrateSymbol = (process.env.NODE_ENV !== 'production')\n    ? Symbol('pinia:skipHydration')\n    : /* istanbul ignore next */ Symbol();\n/**\n * Tells Pinia to skip the hydration process of a given object. This is useful in setup stores (only) when you return a\n * stateful object in the store but it isn't really state. e.g. returning a router instance in a setup store.\n *\n * @param obj - target object\n * @returns obj\n */\nfunction skipHydrate(obj) {\n    return Object.defineProperty(obj, skipHydrateSymbol, {});\n}\n/**\n * Returns whether a value should be hydrated\n *\n * @param obj - target variable\n * @returns true if `obj` should be hydrated\n */\nfunction shouldHydrate(obj) {\n    return !isPlainObject(obj) || !obj.hasOwnProperty(skipHydrateSymbol);\n}\nconst { assign } = Object;\nfunction isComputed(o) {\n    return !!(isRef(o) && o.effect);\n}\nfunction createOptionsStore(id, options, pinia, hot) {\n    const { state, actions, getters } = options;\n    const initialState = pinia.state.value[id];\n    let store;\n    function setup() {\n        if (!initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(pinia.state.value, id, state ? state() : {});\n            }\n            else {\n                pinia.state.value[id] = state ? state() : {};\n            }\n        }\n        // avoid creating a state in pinia.state.value\n        const localState = (process.env.NODE_ENV !== 'production') && hot\n            ? // use ref() to unwrap refs inside state TODO: check if this is still necessary\n                toRefs(ref(state ? state() : {}).value)\n            : toRefs(pinia.state.value[id]);\n        return assign(localState, actions, Object.keys(getters || {}).reduce((computedGetters, name) => {\n            if ((process.env.NODE_ENV !== 'production') && name in localState) {\n                console.warn(`[ðŸ]: A getter cannot have the same name as another state property. Rename one of them. Found with \"${name}\" in store \"${id}\".`);\n            }\n            computedGetters[name] = markRaw(computed(() => {\n                setActivePinia(pinia);\n                // it was created just before\n                const store = pinia._s.get(id);\n                // allow cross using stores\n                /* istanbul ignore if */\n                if (isVue2 && !store._r)\n                    return;\n                // @ts-expect-error\n                // return getters![name].call(context, context)\n                // TODO: avoid reading the getter while assigning with a global variable\n                return getters[name].call(store, store);\n            }));\n            return computedGetters;\n        }, {}));\n    }\n    store = createSetupStore(id, setup, options, pinia, hot, true);\n    return store;\n}\nfunction createSetupStore($id, setup, options = {}, pinia, hot, isOptionsStore) {\n    let scope;\n    const optionsForPlugin = assign({ actions: {} }, options);\n    /* istanbul ignore if */\n    if ((process.env.NODE_ENV !== 'production') && !pinia._e.active) {\n        throw new Error('Pinia destroyed');\n    }\n    // watcher options for $subscribe\n    const $subscribeOptions = { deep: true };\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production') && !isVue2) {\n        $subscribeOptions.onTrigger = (event) => {\n            /* istanbul ignore else */\n            if (isListening) {\n                debuggerEvents = event;\n                // avoid triggering this while the store is being built and the state is being set in pinia\n            }\n            else if (isListening == false && !store._hotUpdating) {\n                // let patch send all the events together later\n                /* istanbul ignore else */\n                if (Array.isArray(debuggerEvents)) {\n                    debuggerEvents.push(event);\n                }\n                else {\n                    console.error('ðŸ debuggerEvents should be an array. This is most likely an internal Pinia bug.');\n                }\n            }\n        };\n    }\n    // internal state\n    let isListening; // set to true at the end\n    let isSyncListening; // set to true at the end\n    let subscriptions = [];\n    let actionSubscriptions = [];\n    let debuggerEvents;\n    const initialState = pinia.state.value[$id];\n    // avoid setting the state for option stores if it is set\n    // by the setup\n    if (!isOptionsStore && !initialState && (!(process.env.NODE_ENV !== 'production') || !hot)) {\n        /* istanbul ignore if */\n        if (isVue2) {\n            set(pinia.state.value, $id, {});\n        }\n        else {\n            pinia.state.value[$id] = {};\n        }\n    }\n    const hotState = ref({});\n    // avoid triggering too many listeners\n    // https://github.com/vuejs/pinia/issues/1129\n    let activeListener;\n    function $patch(partialStateOrMutator) {\n        let subscriptionMutation;\n        isListening = isSyncListening = false;\n        // reset the debugger events since patches are sync\n        /* istanbul ignore else */\n        if ((process.env.NODE_ENV !== 'production')) {\n            debuggerEvents = [];\n        }\n        if (typeof partialStateOrMutator === 'function') {\n            partialStateOrMutator(pinia.state.value[$id]);\n            subscriptionMutation = {\n                type: MutationType.patchFunction,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        else {\n            mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator);\n            subscriptionMutation = {\n                type: MutationType.patchObject,\n                payload: partialStateOrMutator,\n                storeId: $id,\n                events: debuggerEvents,\n            };\n        }\n        const myListenerId = (activeListener = Symbol());\n        nextTick().then(() => {\n            if (activeListener === myListenerId) {\n                isListening = true;\n            }\n        });\n        isSyncListening = true;\n        // because we paused the watcher, we need to manually call the subscriptions\n        triggerSubscriptions(subscriptions, subscriptionMutation, pinia.state.value[$id]);\n    }\n    const $reset = isOptionsStore\n        ? function $reset() {\n            const { state } = options;\n            const newState = state ? state() : {};\n            // we use a patch to group all changes into one single subscription\n            this.$patch(($state) => {\n                // @ts-expect-error: FIXME: shouldn't error?\n                assign($state, newState);\n            });\n        }\n        : /* istanbul ignore next */\n            (process.env.NODE_ENV !== 'production')\n                ? () => {\n                    throw new Error(`ðŸ: Store \"${$id}\" is built using the setup syntax and does not implement $reset().`);\n                }\n                : noop;\n    function $dispose() {\n        scope.stop();\n        subscriptions = [];\n        actionSubscriptions = [];\n        pinia._s.delete($id);\n    }\n    /**\n     * Helper that wraps function so it can be tracked with $onAction\n     * @param fn - action to wrap\n     * @param name - name of the action\n     */\n    const action = (fn, name = '') => {\n        if (ACTION_MARKER in fn) {\n            fn[ACTION_NAME] = name;\n            return fn;\n        }\n        const wrappedAction = function () {\n            setActivePinia(pinia);\n            const args = Array.from(arguments);\n            const afterCallbackList = [];\n            const onErrorCallbackList = [];\n            function after(callback) {\n                afterCallbackList.push(callback);\n            }\n            function onError(callback) {\n                onErrorCallbackList.push(callback);\n            }\n            // @ts-expect-error\n            triggerSubscriptions(actionSubscriptions, {\n                args,\n                name: wrappedAction[ACTION_NAME],\n                store,\n                after,\n                onError,\n            });\n            let ret;\n            try {\n                ret = fn.apply(this && this.$id === $id ? this : store, args);\n                // handle sync errors\n            }\n            catch (error) {\n                triggerSubscriptions(onErrorCallbackList, error);\n                throw error;\n            }\n            if (ret instanceof Promise) {\n                return ret\n                    .then((value) => {\n                    triggerSubscriptions(afterCallbackList, value);\n                    return value;\n                })\n                    .catch((error) => {\n                    triggerSubscriptions(onErrorCallbackList, error);\n                    return Promise.reject(error);\n                });\n            }\n            // trigger after callbacks\n            triggerSubscriptions(afterCallbackList, ret);\n            return ret;\n        };\n        wrappedAction[ACTION_MARKER] = true;\n        wrappedAction[ACTION_NAME] = name; // will be set later\n        // @ts-expect-error: we are intentionally limiting the returned type to just Fn\n        // because all the added properties are internals that are exposed through `$onAction()` only\n        return wrappedAction;\n    };\n    const _hmrPayload = /*#__PURE__*/ markRaw({\n        actions: {},\n        getters: {},\n        state: [],\n        hotState,\n    });\n    const partialStore = {\n        _p: pinia,\n        // _s: scope,\n        $id,\n        $onAction: addSubscription.bind(null, actionSubscriptions),\n        $patch,\n        $reset,\n        $subscribe(callback, options = {}) {\n            const removeSubscription = addSubscription(subscriptions, callback, options.detached, () => stopWatcher());\n            const stopWatcher = scope.run(() => watch(() => pinia.state.value[$id], (state) => {\n                if (options.flush === 'sync' ? isSyncListening : isListening) {\n                    callback({\n                        storeId: $id,\n                        type: MutationType.direct,\n                        events: debuggerEvents,\n                    }, state);\n                }\n            }, assign({}, $subscribeOptions, options)));\n            return removeSubscription;\n        },\n        $dispose,\n    };\n    /* istanbul ignore if */\n    if (isVue2) {\n        // start as non ready\n        partialStore._r = false;\n    }\n    const store = reactive((process.env.NODE_ENV !== 'production') || ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT)\n        ? assign({\n            _hmrPayload,\n            _customProperties: markRaw(new Set()), // devtools custom properties\n        }, partialStore\n        // must be added later\n        // setupStore\n        )\n        : partialStore);\n    // store the partial store now so the setup of stores can instantiate each other before they are finished without\n    // creating infinite loops.\n    pinia._s.set($id, store);\n    const runWithContext = (pinia._a && pinia._a.runWithContext) || fallbackRunWithContext;\n    // TODO: idea create skipSerialize that marks properties as non serializable and they are skipped\n    const setupStore = runWithContext(() => pinia._e.run(() => (scope = effectScope()).run(() => setup({ action }))));\n    // overwrite existing actions to support $onAction\n    for (const key in setupStore) {\n        const prop = setupStore[key];\n        if ((isRef(prop) && !isComputed(prop)) || isReactive(prop)) {\n            // mark it as a piece of state to be serialized\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                set(hotState.value, key, toRef(setupStore, key));\n                // createOptionStore directly sets the state in pinia.state.value so we\n                // can just skip that\n            }\n            else if (!isOptionsStore) {\n                // in setup stores we must hydrate the state and sync pinia state tree with the refs the user just created\n                if (initialState && shouldHydrate(prop)) {\n                    if (isRef(prop)) {\n                        prop.value = initialState[key];\n                    }\n                    else {\n                        // probably a reactive object, lets recursively assign\n                        // @ts-expect-error: prop is unknown\n                        mergeReactiveObjects(prop, initialState[key]);\n                    }\n                }\n                // transfer the ref to the pinia state to keep everything in sync\n                /* istanbul ignore if */\n                if (isVue2) {\n                    set(pinia.state.value[$id], key, prop);\n                }\n                else {\n                    pinia.state.value[$id][key] = prop;\n                }\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.state.push(key);\n            }\n            // action\n        }\n        else if (typeof prop === 'function') {\n            const actionValue = (process.env.NODE_ENV !== 'production') && hot ? prop : action(prop, key);\n            // this a hot module replacement store because the hotUpdate method needs\n            // to do it with the right context\n            /* istanbul ignore if */\n            if (isVue2) {\n                set(setupStore, key, actionValue);\n            }\n            else {\n                // @ts-expect-error\n                setupStore[key] = actionValue;\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                _hmrPayload.actions[key] = prop;\n            }\n            // list actions so they can be used in plugins\n            // @ts-expect-error\n            optionsForPlugin.actions[key] = prop;\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            // add getters for devtools\n            if (isComputed(prop)) {\n                _hmrPayload.getters[key] = isOptionsStore\n                    ? // @ts-expect-error\n                        options.getters[key]\n                    : prop;\n                if (IS_CLIENT) {\n                    const getters = setupStore._getters ||\n                        // @ts-expect-error: same\n                        (setupStore._getters = markRaw([]));\n                    getters.push(key);\n                }\n            }\n        }\n    }\n    // add the state, getters, and action properties\n    /* istanbul ignore if */\n    if (isVue2) {\n        Object.keys(setupStore).forEach((key) => {\n            set(store, key, setupStore[key]);\n        });\n    }\n    else {\n        assign(store, setupStore);\n        // allows retrieving reactive objects with `storeToRefs()`. Must be called after assigning to the reactive object.\n        // Make `storeToRefs()` work with `reactive()` #799\n        assign(toRaw(store), setupStore);\n    }\n    // use this instead of a computed with setter to be able to create it anywhere\n    // without linking the computed lifespan to wherever the store is first\n    // created.\n    Object.defineProperty(store, '$state', {\n        get: () => ((process.env.NODE_ENV !== 'production') && hot ? hotState.value : pinia.state.value[$id]),\n        set: (state) => {\n            /* istanbul ignore if */\n            if ((process.env.NODE_ENV !== 'production') && hot) {\n                throw new Error('cannot set hotState');\n            }\n            $patch(($state) => {\n                // @ts-expect-error: FIXME: shouldn't error?\n                assign($state, state);\n            });\n        },\n    });\n    // add the hotUpdate before plugins to allow them to override it\n    /* istanbul ignore else */\n    if ((process.env.NODE_ENV !== 'production')) {\n        store._hotUpdate = markRaw((newStore) => {\n            store._hotUpdating = true;\n            newStore._hmrPayload.state.forEach((stateKey) => {\n                if (stateKey in store.$state) {\n                    const newStateTarget = newStore.$state[stateKey];\n                    const oldStateSource = store.$state[stateKey];\n                    if (typeof newStateTarget === 'object' &&\n                        isPlainObject(newStateTarget) &&\n                        isPlainObject(oldStateSource)) {\n                        patchObject(newStateTarget, oldStateSource);\n                    }\n                    else {\n                        // transfer the ref\n                        newStore.$state[stateKey] = oldStateSource;\n                    }\n                }\n                // patch direct access properties to allow store.stateProperty to work as\n                // store.$state.stateProperty\n                set(store, stateKey, toRef(newStore.$state, stateKey));\n            });\n            // remove deleted state properties\n            Object.keys(store.$state).forEach((stateKey) => {\n                if (!(stateKey in newStore.$state)) {\n                    del(store, stateKey);\n                }\n            });\n            // avoid devtools logging this as a mutation\n            isListening = false;\n            isSyncListening = false;\n            pinia.state.value[$id] = toRef(newStore._hmrPayload, 'hotState');\n            isSyncListening = true;\n            nextTick().then(() => {\n                isListening = true;\n            });\n            for (const actionName in newStore._hmrPayload.actions) {\n                const actionFn = newStore[actionName];\n                set(store, actionName, action(actionFn, actionName));\n            }\n            // TODO: does this work in both setup and option store?\n            for (const getterName in newStore._hmrPayload.getters) {\n                const getter = newStore._hmrPayload.getters[getterName];\n                const getterValue = isOptionsStore\n                    ? // special handling of options api\n                        computed(() => {\n                            setActivePinia(pinia);\n                            return getter.call(store, store);\n                        })\n                    : getter;\n                set(store, getterName, getterValue);\n            }\n            // remove deleted getters\n            Object.keys(store._hmrPayload.getters).forEach((key) => {\n                if (!(key in newStore._hmrPayload.getters)) {\n                    del(store, key);\n                }\n            });\n            // remove old actions\n            Object.keys(store._hmrPayload.actions).forEach((key) => {\n                if (!(key in newStore._hmrPayload.actions)) {\n                    del(store, key);\n                }\n            });\n            // update the values used in devtools and to allow deleting new properties later on\n            store._hmrPayload = newStore._hmrPayload;\n            store._getters = newStore._getters;\n            store._hotUpdating = false;\n        });\n    }\n    if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n        const nonEnumerable = {\n            writable: true,\n            configurable: true,\n            // avoid warning on devtools trying to display this property\n            enumerable: false,\n        };\n        ['_p', '_hmrPayload', '_getters', '_customProperties'].forEach((p) => {\n            Object.defineProperty(store, p, assign({ value: store[p] }, nonEnumerable));\n        });\n    }\n    /* istanbul ignore if */\n    if (isVue2) {\n        // mark the store as ready before plugins\n        store._r = true;\n    }\n    // apply all plugins\n    pinia._p.forEach((extender) => {\n        /* istanbul ignore else */\n        if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n            const extensions = scope.run(() => extender({\n                store: store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            }));\n            Object.keys(extensions || {}).forEach((key) => store._customProperties.add(key));\n            assign(store, extensions);\n        }\n        else {\n            assign(store, scope.run(() => extender({\n                store: store,\n                app: pinia._a,\n                pinia,\n                options: optionsForPlugin,\n            })));\n        }\n    });\n    if ((process.env.NODE_ENV !== 'production') &&\n        store.$state &&\n        typeof store.$state === 'object' &&\n        typeof store.$state.constructor === 'function' &&\n        !store.$state.constructor.toString().includes('[native code]')) {\n        console.warn(`[ðŸ]: The \"state\" must be a plain object. It cannot be\\n` +\n            `\\tstate: () => new MyClass()\\n` +\n            `Found in store \"${store.$id}\".`);\n    }\n    // only apply hydrate to option stores with an initial state in pinia\n    if (initialState &&\n        isOptionsStore &&\n        options.hydrate) {\n        options.hydrate(store.$state, initialState);\n    }\n    isListening = true;\n    isSyncListening = true;\n    return store;\n}\n// allows unused stores to be tree shaken\n/*! #__NO_SIDE_EFFECTS__ */\nfunction defineStore(\n// TODO: add proper types from above\nidOrOptions, setup, setupOptions) {\n    let id;\n    let options;\n    const isSetupStore = typeof setup === 'function';\n    if (typeof idOrOptions === 'string') {\n        id = idOrOptions;\n        // the option store setup will contain the actual options in this case\n        options = isSetupStore ? setupOptions : setup;\n    }\n    else {\n        options = idOrOptions;\n        id = idOrOptions.id;\n        if ((process.env.NODE_ENV !== 'production') && typeof id !== 'string') {\n            throw new Error(`[ðŸ]: \"defineStore()\" must be passed a store id as its first argument.`);\n        }\n    }\n    function useStore(pinia, hot) {\n        const hasContext = hasInjectionContext();\n        pinia =\n            // in test mode, ignore the argument provided as we can always retrieve a\n            // pinia instance with getActivePinia()\n            ((process.env.NODE_ENV === 'test') && activePinia && activePinia._testing ? null : pinia) ||\n                (hasContext ? inject(piniaSymbol, null) : null);\n        if (pinia)\n            setActivePinia(pinia);\n        if ((process.env.NODE_ENV !== 'production') && !activePinia) {\n            throw new Error(`[ðŸ]: \"getActivePinia()\" was called but there was no active Pinia. Are you trying to use a store before calling \"app.use(pinia)\"?\\n` +\n                `See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.\\n` +\n                `This will fail in production.`);\n        }\n        pinia = activePinia;\n        if (!pinia._s.has(id)) {\n            // creating the store registers it in `pinia._s`\n            if (isSetupStore) {\n                createSetupStore(id, setup, options, pinia);\n            }\n            else {\n                createOptionsStore(id, options, pinia);\n            }\n            /* istanbul ignore else */\n            if ((process.env.NODE_ENV !== 'production')) {\n                // @ts-expect-error: not the right inferred type\n                useStore._pinia = pinia;\n            }\n        }\n        const store = pinia._s.get(id);\n        if ((process.env.NODE_ENV !== 'production') && hot) {\n            const hotId = '__hot:' + id;\n            const newStore = isSetupStore\n                ? createSetupStore(hotId, setup, options, pinia, true)\n                : createOptionsStore(hotId, assign({}, options), pinia, true);\n            hot._hotUpdate(newStore);\n            // cleanup the state properties and the store from the cache\n            delete pinia.state.value[hotId];\n            pinia._s.delete(hotId);\n        }\n        if ((process.env.NODE_ENV !== 'production') && IS_CLIENT) {\n            const currentInstance = getCurrentInstance();\n            // save stores in instances to access them devtools\n            if (currentInstance &&\n                currentInstance.proxy &&\n                // avoid adding stores that are just built for hot module replacement\n                !hot) {\n                const vm = currentInstance.proxy;\n                const cache = '_pStores' in vm ? vm._pStores : (vm._pStores = {});\n                cache[id] = store;\n            }\n        }\n        // StoreGeneric cannot be casted towards Store\n        return store;\n    }\n    useStore.$id = id;\n    return useStore;\n}\n\nlet mapStoreSuffix = 'Store';\n/**\n * Changes the suffix added by `mapStores()`. Can be set to an empty string.\n * Defaults to `\"Store\"`. Make sure to extend the MapStoresCustomization\n * interface if you are using TypeScript.\n *\n * @param suffix - new suffix\n */\nfunction setMapStoreSuffix(suffix // could be 'Store' but that would be annoying for JS\n) {\n    mapStoreSuffix = suffix;\n}\n/**\n * Allows using stores without the composition API (`setup()`) by generating an\n * object to be spread in the `computed` field of a component. It accepts a list\n * of store definitions.\n *\n * @example\n * ```js\n * export default {\n *   computed: {\n *     // other computed properties\n *     ...mapStores(useUserStore, useCartStore)\n *   },\n *\n *   created() {\n *     this.userStore // store with id \"user\"\n *     this.cartStore // store with id \"cart\"\n *   }\n * }\n * ```\n *\n * @param stores - list of stores to map to an object\n */\nfunction mapStores(...stores) {\n    if ((process.env.NODE_ENV !== 'production') && Array.isArray(stores[0])) {\n        console.warn(`[ðŸ]: Directly pass all stores to \"mapStores()\" without putting them in an array:\\n` +\n            `Replace\\n` +\n            `\\tmapStores([useAuthStore, useCartStore])\\n` +\n            `with\\n` +\n            `\\tmapStores(useAuthStore, useCartStore)\\n` +\n            `This will fail in production if not fixed.`);\n        stores = stores[0];\n    }\n    return stores.reduce((reduced, useStore) => {\n        // @ts-expect-error: $id is added by defineStore\n        reduced[useStore.$id + mapStoreSuffix] = function () {\n            return useStore(this.$pinia);\n        };\n        return reduced;\n    }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            reduced[key] = function () {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[key];\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function () {\n                const store = useStore(this.$pinia);\n                const storeKey = keysOrMapper[key];\n                // for some reason TS is unable to infer the type of storeKey to be a\n                // function\n                return typeof storeKey === 'function'\n                    ? storeKey.call(this, store)\n                    : // @ts-expect-error: FIXME: should work?\n                        store[storeKey];\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Alias for `mapState()`. You should use `mapState()` instead.\n * @deprecated use `mapState()` instead.\n */\nconst mapGetters = mapState;\n/**\n * Allows directly using actions from your store without using the composition\n * API (`setup()`) by generating an object to be spread in the `methods` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapActions(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[key](...args);\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            // @ts-expect-error\n            reduced[key] = function (...args) {\n                // @ts-expect-error: FIXME: should work?\n                return useStore(this.$pinia)[keysOrMapper[key]](...args);\n            };\n            return reduced;\n        }, {});\n}\n/**\n * Allows using state and getters from one store without using the composition\n * API (`setup()`) by generating an object to be spread in the `computed` field\n * of a component.\n *\n * @param useStore - store to map from\n * @param keysOrMapper - array or object\n */\nfunction mapWritableState(useStore, keysOrMapper) {\n    return Array.isArray(keysOrMapper)\n        ? keysOrMapper.reduce((reduced, key) => {\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[key];\n                },\n                set(value) {\n                    return (useStore(this.$pinia)[key] = value);\n                },\n            };\n            return reduced;\n        }, {})\n        : Object.keys(keysOrMapper).reduce((reduced, key) => {\n            reduced[key] = {\n                get() {\n                    return useStore(this.$pinia)[keysOrMapper[key]];\n                },\n                set(value) {\n                    return (useStore(this.$pinia)[keysOrMapper[key]] = value);\n                },\n            };\n            return reduced;\n        }, {});\n}\n\n/**\n * Creates an object of references with all the state, getters, and plugin-added\n * state properties of the store. Similar to `toRefs()` but specifically\n * designed for Pinia stores so methods and non reactive properties are\n * completely ignored.\n *\n * @param store - store to extract the refs from\n */\nfunction storeToRefs(store) {\n    // See https://github.com/vuejs/pinia/issues/852\n    // It's easier to just use toRefs() even if it includes more stuff\n    if (isVue2) {\n        // @ts-expect-error: toRefs include methods and others\n        return toRefs(store);\n    }\n    else {\n        const rawStore = toRaw(store);\n        const refs = {};\n        for (const key in rawStore) {\n            const value = rawStore[key];\n            // There is no native method to check for a computed\n            // https://github.com/vuejs/core/pull/4165\n            if (value.effect) {\n                // @ts-expect-error: too hard to type correctly\n                refs[key] =\n                    // ...\n                    computed({\n                        get: () => store[key],\n                        set(value) {\n                            store[key] = value;\n                        },\n                    });\n            }\n            else if (isRef(value) || isReactive(value)) {\n                // @ts-expect-error: the key is state or getter\n                refs[key] =\n                    // ---\n                    toRef(store, key);\n            }\n        }\n        return refs;\n    }\n}\n\n/**\n * Vue 2 Plugin that must be installed for pinia to work. Note **you don't need\n * this plugin if you are using Nuxt.js**. Use the `buildModule` instead:\n * https://pinia.vuejs.org/ssr/nuxt.html.\n *\n * @example\n * ```js\n * import Vue from 'vue'\n * import { PiniaVuePlugin, createPinia } from 'pinia'\n *\n * Vue.use(PiniaVuePlugin)\n * const pinia = createPinia()\n *\n * new Vue({\n *   el: '#app',\n *   // ...\n *   pinia,\n * })\n * ```\n *\n * @param _Vue - `Vue` imported from 'vue'.\n */\nconst PiniaVuePlugin = function (_Vue) {\n    // Equivalent of\n    // app.config.globalProperties.$pinia = pinia\n    _Vue.mixin({\n        beforeCreate() {\n            const options = this.$options;\n            if (options.pinia) {\n                const pinia = options.pinia;\n                // HACK: taken from provide(): https://github.com/vuejs/composition-api/blob/main/src/apis/inject.ts#L31\n                /* istanbul ignore else */\n                if (!this._provided) {\n                    const provideCache = {};\n                    Object.defineProperty(this, '_provided', {\n                        get: () => provideCache,\n                        set: (v) => Object.assign(provideCache, v),\n                    });\n                }\n                this._provided[piniaSymbol] = pinia;\n                // propagate the pinia instance in an SSR friendly way\n                // avoid adding it to nuxt twice\n                /* istanbul ignore else */\n                if (!this.$pinia) {\n                    this.$pinia = pinia;\n                }\n                pinia._a = this;\n                if (IS_CLIENT) {\n                    // this allows calling useStore() outside of a component setup after\n                    // installing pinia's plugin\n                    setActivePinia(pinia);\n                }\n                if ((((process.env.NODE_ENV !== 'production') || (typeof __VUE_PROD_DEVTOOLS__ !== 'undefined' && __VUE_PROD_DEVTOOLS__)) && !(process.env.NODE_ENV === 'test')) && IS_CLIENT) {\n                    registerPiniaDevtools(pinia._a, pinia);\n                }\n            }\n            else if (!this.$pinia && options.parent && options.parent.$pinia) {\n                this.$pinia = options.parent.$pinia;\n            }\n        },\n        destroyed() {\n            delete this._pStores;\n        },\n    });\n};\n\nexport { MutationType, PiniaVuePlugin, acceptHMRUpdate, createPinia, defineStore, disposePinia, getActivePinia, mapActions, mapGetters, mapState, mapStores, mapWritableState, setActivePinia, setMapStoreSuffix, shouldHydrate, skipHydrate, storeToRefs };\n","function encodePath(path) {\n  if (!path) {\n    return path;\n  }\n  return path.split(\"/\").map(encodeURIComponent).join(\"/\");\n}\nfunction basename(path, extname2) {\n  path = path.replace(/\\\\/g, \"/\").replace(/\\/+$/g, \"\").replace(/.*\\//, \"\");\n  if (extname2 && extname2 !== path && path.endsWith(extname2)) {\n    return path.substring(0, path.length - extname2.length);\n  }\n  return path;\n}\nfunction dirname(path) {\n  path = path.replaceAll(/\\\\/g, \"/\");\n  const sections = path.split(\"/\");\n  if (sections.length <= 1) {\n    return \".\";\n  }\n  sections.pop();\n  if (sections.length === 1 && sections[0] === \"\") {\n    return \"/\";\n  }\n  return sections.join(\"/\");\n}\nfunction extname(path) {\n  const base = basename(path);\n  const index = base.lastIndexOf(\".\");\n  if (index > 0) {\n    return base.substring(index);\n  }\n  return \"\";\n}\nfunction join(...args) {\n  if (arguments.length < 1) {\n    return \"\";\n  }\n  const nonEmptyArgs = args.filter((arg) => arg.length > 0);\n  if (nonEmptyArgs.length < 1) {\n    return \"\";\n  }\n  const lastArg = nonEmptyArgs[nonEmptyArgs.length - 1];\n  const leadingSlash = nonEmptyArgs[0].charAt(0) === \"/\";\n  const trailingSlash = lastArg.charAt(lastArg.length - 1) === \"/\";\n  const sections = nonEmptyArgs.reduce((acc, section) => acc.concat(section.split(\"/\")), []);\n  let first = !leadingSlash;\n  const path = sections.reduce((acc, section) => {\n    if (section === \"\") {\n      return acc;\n    }\n    if (first) {\n      first = false;\n      return acc + section;\n    }\n    return acc + \"/\" + section;\n  }, \"\");\n  if (trailingSlash) {\n    return path + \"/\";\n  }\n  return path;\n}\nfunction isSamePath(path1, path2) {\n  const pathSections1 = (path1 || \"\").split(\"/\").filter((p) => p !== \".\");\n  const pathSections2 = (path2 || \"\").split(\"/\").filter((p) => p !== \".\");\n  path1 = join(...pathSections1);\n  path2 = join(...pathSections2);\n  return path1 === path2;\n}\nexport {\n  basename,\n  dirname,\n  encodePath,\n  extname,\n  isSamePath,\n  join\n};\n//# sourceMappingURL=index.mjs.map\n","import { basename } from \"@nextcloud/paths\";\nimport { spawnDialog as spawnDialog$1 } from \"@nextcloud/vue/functions/dialog\";\nimport { t, a as n, n as normalizeComponent } from \"./chunks/_plugin-vue2_normalizer-jrlE7CJU.mjs\";\nimport { h, f, g, d, e, c, T, b, l, k, o, s, i, m, j } from \"./chunks/_plugin-vue2_normalizer-jrlE7CJU.mjs\";\nimport { defineComponent, onMounted, onUnmounted, defineAsyncComponent } from \"vue\";\nimport NcDialog from \"@nextcloud/vue/components/NcDialog\";\nimport NcNoteCard from \"@nextcloud/vue/components/NcNoteCard\";\nconst IconMove = '<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"mdi-folder-move\" viewBox=\"0 0 24 24\"><path d=\"M14,18V15H10V11H14V8L19,13M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z\" /></svg>';\nconst IconCopy = '<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"mdi-folder-multiple\" viewBox=\"0 0 24 24\"><path d=\"M22,4H14L12,2H6A2,2 0 0,0 4,4V16A2,2 0 0,0 6,18H22A2,2 0 0,0 24,16V6A2,2 0 0,0 22,4M2,6H0V11H0V20A2,2 0 0,0 2,22H20V20H2V6Z\" /></svg>';\nvar FilePickerType = /* @__PURE__ */ ((FilePickerType2) => {\n  FilePickerType2[FilePickerType2[\"Choose\"] = 1] = \"Choose\";\n  FilePickerType2[FilePickerType2[\"Move\"] = 2] = \"Move\";\n  FilePickerType2[FilePickerType2[\"Copy\"] = 3] = \"Copy\";\n  FilePickerType2[FilePickerType2[\"CopyMove\"] = 4] = \"CopyMove\";\n  FilePickerType2[FilePickerType2[\"Custom\"] = 5] = \"Custom\";\n  return FilePickerType2;\n})(FilePickerType || {});\nclass FilePickerClosed extends Error {\n}\nclass FilePicker {\n  title;\n  multiSelect;\n  mimeTypeFilter;\n  directoriesAllowed;\n  buttons;\n  path;\n  filter;\n  canPick;\n  container;\n  disabledNavigation;\n  constructor(title, multiSelect, mimeTypeFilter, directoriesAllowed, buttons, path, filter, canPick, container, disabledNavigation = false) {\n    this.title = title;\n    this.multiSelect = multiSelect;\n    this.mimeTypeFilter = mimeTypeFilter;\n    this.directoriesAllowed = directoriesAllowed;\n    this.path = path;\n    this.filter = filter;\n    this.canPick = canPick;\n    this.buttons = buttons;\n    this.container = container;\n    this.disabledNavigation = disabledNavigation;\n  }\n  /**\n   * Pick files using the FilePicker.\n   *\n   * @return Promise with array of picked files or rejected promise on close without picking\n   */\n  async pickNodes() {\n    const { FilePickerVue } = await import(\"./chunks/index-BMbtc3xh.mjs\");\n    return new Promise((resolve, reject) => {\n      spawnDialog$1(FilePickerVue, {\n        allowPickDirectory: this.directoriesAllowed,\n        buttons: this.buttons,\n        container: this.container,\n        name: this.title,\n        path: this.path,\n        mimetypeFilter: this.mimeTypeFilter,\n        multiselect: this.multiSelect,\n        filterFn: this.filter,\n        canPickFn: this.canPick,\n        disabledNavigation: this.disabledNavigation\n      }, (...rest) => {\n        const [nodes] = rest;\n        if (!Array.isArray(nodes) || nodes.length === 0) {\n          reject(new FilePickerClosed(\"FilePicker: No nodes selected\"));\n        } else {\n          resolve(nodes);\n        }\n      });\n    });\n  }\n  /**\n   * Pick files using the FilePicker\n   *\n   * @return Promise with array of paths of picked files or rejected promise on close without picking\n   */\n  async pick() {\n    const nodes = await this.pickNodes();\n    if (this.multiSelect) {\n      return nodes.map((node) => node.path);\n    }\n    const path = nodes[0]?.path ?? \"/\";\n    return path;\n  }\n}\nclass FilePickerBuilder {\n  title;\n  multiSelect = false;\n  mimeTypeFilter = [];\n  directoriesAllowed = false;\n  path;\n  filter;\n  canPick;\n  buttons = [];\n  container;\n  disabledNavigation = false;\n  /**\n   * Construct a new FilePicker\n   *\n   * @param title Title of the FilePicker\n   */\n  constructor(title) {\n    this.title = title;\n  }\n  /**\n   * Set the container where the FilePicker will be mounted\n   * By default 'body' is used\n   *\n   * @param container The dialog container\n   */\n  setContainer(container) {\n    this.container = container;\n    return this;\n  }\n  /**\n   * Enable or disable picking multiple files\n   *\n   * @param ms True to enable picking multiple files, false otherwise\n   */\n  setMultiSelect(ms) {\n    this.multiSelect = ms;\n    return this;\n  }\n  /**\n   * Add allowed MIME type\n   *\n   * @param filter MIME type to allow\n   */\n  addMimeTypeFilter(filter) {\n    this.mimeTypeFilter.push(filter);\n    return this;\n  }\n  /**\n   * Set allowed MIME types\n   *\n   * @param filter Array of allowed MIME types\n   */\n  setMimeTypeFilter(filter) {\n    this.mimeTypeFilter = filter;\n    return this;\n  }\n  /**\n   * Add a button to the FilePicker\n   * Note: This overrides any previous `setButtonFactory` call\n   *\n   * @param button The button\n   */\n  addButton(button) {\n    if (typeof this.buttons === \"function\") {\n      console.warn(\"FilePicker buttons were set to factory, now overwritten with button object.\");\n      this.buttons = [];\n    }\n    this.buttons.push(button);\n    return this;\n  }\n  /**\n   * Set the button factory which is used to generate buttons from current view, path and selected nodes\n   * Note: This overrides any previous `addButton` call\n   *\n   * @param factory The button factory\n   */\n  setButtonFactory(factory) {\n    this.buttons = factory;\n    return this;\n  }\n  /**\n   * Set FilePicker type based on legacy file picker types\n   * @param type The legacy filepicker type to emulate\n   * @deprecated Use `addButton` or `setButtonFactory` instead as with setType you do not know which button was pressed\n   */\n  setType(type) {\n    this.buttons = (nodes, path) => {\n      const buttons = [];\n      const node = nodes[0];\n      const target = node?.displayname || basename(path);\n      if (type === 1) {\n        let label = t(\"Choose\");\n        if (nodes.length === 1) {\n          label = t(\"Choose {file}\", { file: target });\n        } else if (this.multiSelect) {\n          label = n(\"Choose %n file\", \"Choose %n files\", nodes.length);\n        }\n        buttons.push({\n          callback: () => {\n          },\n          type: \"primary\",\n          label\n        });\n      }\n      if (type === 4 || type === 3) {\n        buttons.push({\n          callback: () => {\n          },\n          label: target ? t(\"Copy to {target}\", { target }) : t(\"Copy\"),\n          icon: IconCopy,\n          variant: type === 3 ? \"primary\" : \"secondary\"\n        });\n      }\n      if (type === 4 || type === 2) {\n        buttons.push({\n          callback: () => {\n          },\n          label: target ? t(\"Move to {target}\", { target }) : t(\"Move\"),\n          icon: IconMove,\n          variant: \"primary\"\n          // move is always primary - also on copy-move\n        });\n      }\n      return buttons;\n    };\n    return this;\n  }\n  /**\n   * Allow to pick directories besides files\n   *\n   * @param allow True to allow picking directories\n   */\n  allowDirectories(allow = true) {\n    this.directoriesAllowed = allow;\n    return this;\n  }\n  /**\n   * Set starting path of the FilePicker\n   *\n   * @param path Path to start from picking\n   */\n  startAt(path) {\n    this.path = path;\n    return this;\n  }\n  /**\n   * Add filter function to filter file list of FilePicker\n   *\n   * @param filter Filter function to apply\n   */\n  setFilter(filter) {\n    this.filter = filter;\n    return this;\n  }\n  /**\n   * Add function to allow or not picking a node\n   *\n   * @param canPick Function to decide if a node can be picked\n   */\n  setCanPick(canPick) {\n    this.canPick = canPick;\n    return this;\n  }\n  /**\n   * Disable navigation (view selection)\n   */\n  disableNavigation() {\n    this.disabledNavigation = true;\n    return this;\n  }\n  /**\n   * Construct the configured FilePicker\n   */\n  build() {\n    return new FilePicker(\n      this.title,\n      this.multiSelect,\n      this.mimeTypeFilter,\n      this.directoriesAllowed,\n      this.buttons,\n      this.path,\n      this.filter,\n      this.canPick,\n      this.container,\n      this.disabledNavigation\n    );\n  }\n}\nfunction getFilePickerBuilder(title) {\n  return new FilePickerBuilder(title);\n}\nconst spawnDialog = spawnDialog$1;\nvar DialogSeverity = /* @__PURE__ */ ((DialogSeverity2) => {\n  DialogSeverity2[\"Info\"] = \"info\";\n  DialogSeverity2[\"Warning\"] = \"warning\";\n  DialogSeverity2[\"Error\"] = \"error\";\n  return DialogSeverity2;\n})(DialogSeverity || {});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"GenericDialog\",\n  props: {\n    name: null,\n    text: null,\n    html: null,\n    buttons: null,\n    severity: null\n  },\n  setup(__props) {\n    const props = __props;\n    const handleUnload = () => `${props.name}: ${props.text}`;\n    onMounted(() => window.addEventListener(\"unload\", handleUnload));\n    onUnmounted(() => window.removeEventListener(\"unload\", handleUnload));\n    return { __sfc: true, props, handleUnload, NcDialog, NcNoteCard };\n  }\n});\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c, _setup = _vm._self._setupProxy;\n  return _c(_setup.NcDialog, { attrs: { \"dialog-classes\": \"nc-generic-dialog\", \"buttons\": _vm.buttons, \"name\": _vm.name, \"message\": _vm.text }, on: { \"update:open\": function($event) {\n    return _vm.$emit(\"close\");\n  } } }, [_vm.severity ? _c(_setup.NcNoteCard, { attrs: { \"type\": _vm.severity } }, [_c(\"p\", { domProps: { \"textContent\": _vm._s(_vm.text) } })]) : _vm._e(), _vm.html ? _c(\"div\", { domProps: { \"innerHTML\": _vm._s(_vm.html) } }) : _vm._e()], 1);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  null\n);\nconst GenericDialog = __component__.exports;\nclass Dialog {\n  #name;\n  #text;\n  #buttons;\n  #severity;\n  #dialog;\n  /** @deprecated */\n  #html;\n  constructor(name, text, buttons = [], severity) {\n    this.#name = name;\n    this.#text = text;\n    this.#buttons = buttons;\n    this.#severity = severity;\n    this.#dialog = void 0;\n    this.#html = void 0;\n  }\n  /**\n   * @deprecated DO NOT USE! It will be removed in the near future!\n   * @param html HTML content\n   */\n  setHTML(html) {\n    this.#html = html;\n    return this;\n  }\n  /**\n   * Spawn and show the dialog - if already open the previous instance will be destroyed\n   * @return Promise that resolves when the dialog is answered successfully and rejects on close\n   */\n  async show() {\n    if (this.#dialog) {\n      this.#dialog.$destroy();\n    }\n    return new Promise((resolve) => {\n      this.#dialog = spawnDialog$1(\n        GenericDialog,\n        {\n          buttons: this.#buttons,\n          name: this.#name,\n          text: this.#text,\n          severity: this.#severity,\n          html: this.#html\n        },\n        resolve\n      );\n    });\n  }\n  /**\n   * Hide and destroy the current dialog instance\n   *\n   * @deprecated use the promise of the `show` methods for the user interaction.\n   */\n  hide() {\n    this.#dialog?.$destroy();\n  }\n}\nclass DialogBuilder {\n  #severity;\n  #text;\n  #name;\n  #buttons;\n  constructor(name) {\n    this.#severity = void 0;\n    this.#text = \"\";\n    this.#name = name ?? \"\";\n    this.#buttons = [];\n  }\n  /**\n   * Set dialog name\n   * @param name The name or headline of the dialog\n   */\n  setName(name) {\n    this.#name = name;\n    return this;\n  }\n  /**\n   * Set the dialog text\n   * @param text Main text of the dialog\n   */\n  setText(text) {\n    this.#text = text;\n    return this;\n  }\n  /**\n   * Set the severity of the dialog\n   * @param severity Severity of the dialog\n   */\n  setSeverity(severity) {\n    this.#severity = severity;\n    return this;\n  }\n  /**\n   * Set buttons from array\n   * @param buttons Either an array of dialog buttons\n   */\n  setButtons(buttons) {\n    if (this.#buttons.length > 0) {\n      console.warn(\"[@nextcloud/dialogs] Dialog buttons are already set - this overrides previous buttons.\");\n    }\n    this.#buttons = buttons;\n    return this;\n  }\n  /**\n   * Add a single button\n   * @param button Button to add\n   */\n  addButton(button) {\n    this.#buttons.push(button);\n    return this;\n  }\n  build() {\n    return new Dialog(this.#name, this.#text, this.#buttons, this.#severity);\n  }\n}\nfunction getDialogBuilder(name) {\n  return new DialogBuilder(name);\n}\nfunction showGuestUserPrompt(props) {\n  return new Promise((resolve) => {\n    spawnDialog$1(\n      defineAsyncComponent(() => import(\"./chunks/PublicAuthPrompt-CfOE69qY.mjs\")),\n      props,\n      resolve\n    );\n  });\n}\nexport {\n  Dialog,\n  DialogBuilder,\n  DialogSeverity,\n  FilePicker,\n  FilePickerBuilder,\n  FilePickerClosed,\n  FilePickerType,\n  h as TOAST_ARIA_LIVE_ASSERTIVE,\n  f as TOAST_ARIA_LIVE_OFF,\n  g as TOAST_ARIA_LIVE_POLITE,\n  d as TOAST_DEFAULT_TIMEOUT,\n  e as TOAST_PERMANENT_TIMEOUT,\n  c as TOAST_UNDO_TIMEOUT,\n  T as ToastAriaLive,\n  b as ToastType,\n  getDialogBuilder,\n  getFilePickerBuilder,\n  l as showError,\n  showGuestUserPrompt,\n  k as showInfo,\n  o as showLoading,\n  s as showMessage,\n  i as showSuccess,\n  m as showUndo,\n  j as showWarning,\n  spawnDialog\n};\n//# sourceMappingURL=index.mjs.map\n","<!--\n - SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"folder\">\n\t\t<component :is=\"rootFolderIcon\" v-if=\"path === '/'\" />\n\t\t<FolderOutline v-else />\n\t\t<span class=\"folder__info\">\n\t\t\t<div class=\"folder__path\">{{ folderName }}</div>\n\t\t\t<div v-if=\"subname !== ''\">\n\t\t\t\t{{ subname }}\n\t\t\t</div>\n\t\t</span>\n\t\t<NcButton\n\t\t\tv-if=\"canDelete\"\n\t\t\tvariant=\"tertiary\"\n\t\t\t:aria-label=\"t('photos', 'Delete source directory')\"\n\t\t\t@click=\"emitRemoveSourceFolder\">\n\t\t\t<template #icon>\n\t\t\t\t<Close :size=\"20\" />\n\t\t\t</template>\n\t\t</NcButton>\n\t</div>\n</template>\n\n<script lang='ts'>\nimport { t } from '@nextcloud/l10n'\nimport { defineComponent } from 'vue'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport Close from 'vue-material-design-icons/Close.vue'\nimport FolderOutline from 'vue-material-design-icons/FolderOutline.vue'\n\nexport default defineComponent({\n\tname: 'PhotosFolder',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tFolderOutline,\n\t\tClose,\n\t},\n\n\tprops: {\n\t\tpath: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\tcanDelete: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\n\t\trootFolderLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\trootFolderIcon: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\temits: ['remove-folder'],\n\n\tcomputed: {\n\t\tfolderName() {\n\t\t\tif (this.path === '/') {\n\t\t\t\treturn this.rootFolderLabel\n\t\t\t} else {\n\t\t\t\treturn this.path.split('/').pop()\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Return the summary path of the folder\n\t\t * Examples:\n\t\t *  - /        ==> Home\n\t\t *  - /a       ==> nothing\n\t\t *  - /a/b     ==> /a\n\t\t *  - /a/b/c   ==> /a/b\n\t\t *  - /a/b/c/d ==> /a/b\n\t\t */\n\t\tsubname() {\n\t\t\tconst slashesCount = (this.path.match(/\\//g) ?? []).length\n\n\t\t\tswitch (slashesCount) {\n\t\t\t\tcase 1:\n\t\t\t\t\treturn ''\n\t\t\t\tcase 2:\n\t\t\t\t\treturn this.path.split('/').splice(0, 2).join('/')\n\t\t\t\tdefault:\n\t\t\t\t\treturn this.path.split('/').splice(0, 3).join('/')\n\t\t\t}\n\t\t},\n\t},\n\n\tmethods: {\n\t\temitRemoveSourceFolder() {\n\t\t\tthis.$emit('remove-folder')\n\t\t},\n\n\t\tt,\n\t},\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.folder {\n\tdisplay: flex;\n\tgap: 16px;\n\tmin-width: 300px;\n\n\t&__info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex-grow: 1;\n\t\tjustify-content: center;\n\t}\n\n\t&__path {\n\t\tfont-weight: bold;\n\t}\n}\n</style>\n","<!--\n - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"photos-locations-container\">\n\t\t<div class=\"photos-locations\">\n\t\t\t<li\n\t\t\t\tv-for=\"(source, index) in photosSourceFolders\"\n\t\t\t\t:key=\"index\">\n\t\t\t\t<PhotosFolder\n\t\t\t\t\t:path=\"source\"\n\t\t\t\t\t:can-delete=\"photosSourceFolders.length !== 1\"\n\t\t\t\t\t:root-folder-label=\"t('photos', 'All folders')\"\n\t\t\t\t\t:root-folder-icon=\"FolderMultipleOutline\"\n\t\t\t\t\t@remove-folder=\"removeSourceFolder(index)\" />\n\t\t\t</li>\n\t\t</div>\n\n\t\t<NcButton\n\t\t\t:aria-label=\"t('photos', 'Add a Photos source for the timelines')\"\n\t\t\t@click=\"debounceAddSourceFolder\">\n\t\t\t<template #icon>\n\t\t\t\t<Plus :size=\"20\" />\n\t\t\t</template>\n\t\t\t{{ t('photos', 'Add folder') }}\n\t\t</NcButton>\n\t</div>\n</template>\n\n<script lang='ts'>\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport { t } from '@nextcloud/l10n'\nimport debounce from 'debounce'\nimport { defineComponent } from 'vue'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport FolderMultipleOutline from 'vue-material-design-icons/FolderMultipleOutline.vue'\nimport Plus from 'vue-material-design-icons/Plus.vue'\nimport PhotosFolder from './PhotosFolder.vue'\nimport logger from '../../services/logger.js'\n\nexport default defineComponent({\n\tname: 'PhotosSourceLocationsSettings',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tPhotosFolder,\n\t\tPlus,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tFolderMultipleOutline,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tphotosSourceFolders(): string[] {\n\t\t\treturn this.$store.state.userConfig.photosSourceFolders\n\t\t},\n\t},\n\n\tmethods: {\n\t\tdebounceAddSourceFolder: debounce(function(...args) {\n\t\t\tthis.addSourceFolder(...args)\n\t\t}, 200, { immediate: false }),\n\n\t\tasync openFilePicker(title: string): Promise<string> {\n\t\t\tconst picker = getFilePickerBuilder(title)\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.allowDirectories()\n\t\t\t\t.addButton({\n\t\t\t\t\tlabel: t('photos', 'Pick folder'),\n\t\t\t\t\tcallback: (nodes) => logger.debug('Picked', { nodes }),\n\t\t\t\t})\n\t\t\t\t.build()\n\n\t\t\treturn picker.pick()\n\t\t},\n\n\t\tasync addSourceFolder() {\n\t\t\tconst pickedFolder = await this.openFilePicker(t('photos', 'Select a source folder for your media'))\n\t\t\tif (this.photosSourceFolders.includes(pickedFolder)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.$store.dispatch('updateUserConfig', { key: 'photosSourceFolders', value: [...this.photosSourceFolders, pickedFolder] })\n\t\t},\n\n\t\tremoveSourceFolder(index) {\n\t\t\tconst folders = [...this.photosSourceFolders]\n\t\t\tfolders.splice(index, 1)\n\t\t\tthis.$store.dispatch('updateUserConfig', { key: 'photosSourceFolders', value: folders })\n\t\t},\n\n\t\tt,\n\t},\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.photos-locations-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: fit-content;\n\n\t.photos-locations {\n\t\tmargin-bottom: 16px;\n\n\t\tli {\n\t\t\tlist-style: none;\n\t\t}\n\t}\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { defineStore } from 'pinia'\nimport { computed, ref } from 'vue'\nimport filters from '../services/PhotosFilters/index.ts'\n\nexport default defineStore('filters', () => {\n\tconst selectedFilters = ref<Record<string, unknown[]>>(filters.reduce((acc, filter) => ({ ...acc, [filter.id]: [] }), {}))\n\n\tconst filtersQuery = computed(() => {\n\t\treturn Object.entries(selectedFilters.value)\n\t\t\t.filter(([, values]) => values.length > 0)\n\t\t\t.map(([key, values]) => filters.find((filter) => filter.id === key)?.getQuery(values))\n\t\t\t.join('\\n')\n\t})\n\n\treturn { selectedFilters, filtersQuery }\n})\n"],"file":"js/filters-BM-MJ4zW.chunk.mjs"}
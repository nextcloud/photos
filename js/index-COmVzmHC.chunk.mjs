var It=Object.defineProperty,At=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var lt=Object.getOwnPropertySymbols;var Pt=Object.prototype.hasOwnProperty,zt=Object.prototype.propertyIsEnumerable;var ct=l=>{throw TypeError(l)};var it=(l,u,i)=>u in l?It(l,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[u]=i,B=(l,u)=>{for(var i in u||(u={}))Pt.call(u,i)&&it(l,i,u[i]);if(lt)for(var i of lt(u))zt.call(u,i)&&it(l,i,u[i]);return l},mt=(l,u)=>At(l,xt(u));var et=(l,u,i)=>it(l,typeof u!="symbol"?u+"":u,i),rt=(l,u,i)=>u.has(l)||ct("Cannot "+i);var e=(l,u,i)=>(rt(l,u,"read from private field"),i?i.call(l):u.get(l)),y=(l,u,i)=>u.has(l)?ct("Cannot add the same private member more than once"):u instanceof WeakSet?u.add(l):u.set(l,i),p=(l,u,i,n)=>(rt(l,u,"write to private field"),n?n.call(l,i):u.set(l,i),i),f=(l,u,i)=>(rt(l,u,"access private method"),i);var S=(l,u,i,n)=>({set _(t){p(l,u,t,i)},get _(){return e(l,u,n)}});import{A as Nt}from"./vue.runtime.esm-OiydnxB-.chunk.mjs";import{E as kt}from"./index-DuF3OKwX.chunk.mjs";var st,ft;function Lt(){if(ft)return st;ft=1;function l(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function u(t,r){for(var s="",a=0,c=-1,h=0,d,m=0;m<=t.length;++m){if(m<t.length)d=t.charCodeAt(m);else{if(d===47)break;d=47}if(d===47){if(!(c===m-1||h===1))if(c!==m-1&&h===2){if(s.length<2||a!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var v=s.lastIndexOf("/");if(v!==s.length-1){v===-1?(s="",a=0):(s=s.slice(0,v),a=s.length-1-s.lastIndexOf("/")),c=m,h=0;continue}}else if(s.length===2||s.length===1){s="",a=0,c=m,h=0;continue}}r&&(s.length>0?s+="/..":s="..",a=2)}else s.length>0?s+="/"+t.slice(c+1,m):s=t.slice(c+1,m),a=m-c-1;c=m,h=0}else d===46&&h!==-1?++h:h=-1}return s}function i(t,r){var s=r.dir||r.root,a=r.base||(r.name||"")+(r.ext||"");return s?s===r.root?s+a:s+t+a:a}var n={resolve:function(){for(var t="",r=!1,s,a=arguments.length-1;a>=-1&&!r;a--){var c;a>=0?c=arguments[a]:(s===void 0&&(s=Nt.cwd()),c=s),l(c),c.length!==0&&(t=c+"/"+t,r=c.charCodeAt(0)===47)}return t=u(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(l(t),t.length===0)return".";var r=t.charCodeAt(0)===47,s=t.charCodeAt(t.length-1)===47;return t=u(t,!r),t.length===0&&!r&&(t="."),t.length>0&&s&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return l(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,r=0;r<arguments.length;++r){var s=arguments[r];l(s),s.length>0&&(t===void 0?t=s:t+="/"+s)}return t===void 0?".":n.normalize(t)},relative:function(t,r){if(l(t),l(r),t===r||(t=n.resolve(t),r=n.resolve(r),t===r))return"";for(var s=1;s<t.length&&t.charCodeAt(s)===47;++s);for(var a=t.length,c=a-s,h=1;h<r.length&&r.charCodeAt(h)===47;++h);for(var d=r.length,m=d-h,v=c<m?c:m,w=-1,g=0;g<=v;++g){if(g===v){if(m>v){if(r.charCodeAt(h+g)===47)return r.slice(h+g+1);if(g===0)return r.slice(h+g)}else c>v&&(t.charCodeAt(s+g)===47?w=g:g===0&&(w=0));break}var X=t.charCodeAt(s+g),tt=r.charCodeAt(h+g);if(X!==tt)break;X===47&&(w=g)}var Y="";for(g=s+w+1;g<=a;++g)(g===a||t.charCodeAt(g)===47)&&(Y.length===0?Y+="..":Y+="/..");return Y.length>0?Y+r.slice(h+w):(h+=w,r.charCodeAt(h)===47&&++h,r.slice(h))},_makeLong:function(t){return t},dirname:function(t){if(l(t),t.length===0)return".";for(var r=t.charCodeAt(0),s=r===47,a=-1,c=!0,h=t.length-1;h>=1;--h)if(r=t.charCodeAt(h),r===47){if(!c){a=h;break}}else c=!1;return a===-1?s?"/":".":s&&a===1?"//":t.slice(0,a)},basename:function(t,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');l(t);var s=0,a=-1,c=!0,h;if(r!==void 0&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return"";var d=r.length-1,m=-1;for(h=t.length-1;h>=0;--h){var v=t.charCodeAt(h);if(v===47){if(!c){s=h+1;break}}else m===-1&&(c=!1,m=h+1),d>=0&&(v===r.charCodeAt(d)?--d===-1&&(a=h):(d=-1,a=m))}return s===a?a=m:a===-1&&(a=t.length),t.slice(s,a)}else{for(h=t.length-1;h>=0;--h)if(t.charCodeAt(h)===47){if(!c){s=h+1;break}}else a===-1&&(c=!1,a=h+1);return a===-1?"":t.slice(s,a)}},extname:function(t){l(t);for(var r=-1,s=0,a=-1,c=!0,h=0,d=t.length-1;d>=0;--d){var m=t.charCodeAt(d);if(m===47){if(!c){s=d+1;break}continue}a===-1&&(c=!1,a=d+1),m===46?r===-1?r=d:h!==1&&(h=1):r!==-1&&(h=-1)}return r===-1||a===-1||h===0||h===1&&r===a-1&&r===s+1?"":t.slice(r,a)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return i("/",t)},parse:function(t){l(t);var r={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return r;var s=t.charCodeAt(0),a=s===47,c;a?(r.root="/",c=1):c=0;for(var h=-1,d=0,m=-1,v=!0,w=t.length-1,g=0;w>=c;--w){if(s=t.charCodeAt(w),s===47){if(!v){d=w+1;break}continue}m===-1&&(v=!1,m=w+1),s===46?h===-1?h=w:g!==1&&(g=1):h!==-1&&(g=-1)}return h===-1||m===-1||g===0||g===1&&h===m-1&&h===d+1?m!==-1&&(d===0&&a?r.base=r.name=t.slice(1,m):r.base=r.name=t.slice(d,m)):(d===0&&a?(r.name=t.slice(1,h),r.base=t.slice(1,m)):(r.name=t.slice(d,h),r.base=t.slice(d,m)),r.ext=t.slice(h,m)),d>0?r.dir=t.slice(0,d-1):a&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return n.posix=n,st=n,st}var Dt=Lt();class ut extends Error{constructor(i,n){var t;super(i,n);et(this,"name","TimeoutError");(t=Error.captureStackTrace)==null||t.call(Error,this,ut)}}const dt=l=>{var u;return(u=l.reason)!=null?u:new DOMException("This operation was aborted.","AbortError")};function $t(l,u){const{milliseconds:i,fallback:n,message:t,customTimers:r={setTimeout,clearTimeout},signal:s}=u;let a,c;const h=new Promise((d,m)=>{if(typeof i!="number"||Math.sign(i)!==1)throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(i,"`"));if(s!=null&&s.aborted){m(dt(s));return}if(s&&(c=()=>{m(dt(s))},s.addEventListener("abort",c,{once:!0})),l.then(d,m),i===Number.POSITIVE_INFINITY)return;const v=new ut;a=r.setTimeout.call(void 0,()=>{if(n){try{d(n())}catch(w){m(w)}return}typeof l.cancel=="function"&&l.cancel(),t===!1?d():t instanceof Error?m(t):(v.message=t!=null?t:"Promise timed out after ".concat(i," milliseconds"),m(v))},i)}).finally(()=>{h.clear(),c&&s&&s.removeEventListener("abort",c)});return h.clear=()=>{r.clearTimeout.call(void 0,a),a=void 0},h}function St(l,u,i){let n=0,t=l.length;for(;t>0;){const r=Math.trunc(t/2);let s=n+r;i(l[s],u)<=0?(n=++s,t-=r+1):t=r}return n}var I;class qt{constructor(){y(this,I,[])}enqueue(u,i){const{priority:n=0,id:t}=i!=null?i:{},r={priority:n,id:t,run:u};if(this.size===0||e(this,I)[this.size-1].priority>=n){e(this,I).push(r);return}const s=St(e(this,I),r,(a,c)=>c.priority-a.priority);e(this,I).splice(s,0,r)}setPriority(u,i){const n=e(this,I).findIndex(r=>r.id===u);if(n===-1)throw new ReferenceError('No promise function with the id "'.concat(u,'" exists in the queue.'));const[t]=e(this,I).splice(n,1);this.enqueue(t.run,{priority:i,id:u})}dequeue(){var u;return(u=e(this,I).shift())==null?void 0:u.run}filter(u){return e(this,I).filter(i=>i.priority===u.priority).map(i=>i.run)}get size(){return e(this,I).length}}I=new WeakMap;var M,x,P,$,O,V,z,j,_,N,k,A,E,T,b,Z,C,R,L,W,F,o,J,gt,pt,G,vt,yt,bt,wt,Ct,H,K,nt,Q,ot,ht,U,q,Tt,D,Et,at;class Mt extends kt{constructor(i){var n,t,r,s,a,c;super();y(this,o);y(this,M);y(this,x);y(this,P,0);y(this,$);y(this,O,!1);y(this,V,!1);y(this,z);y(this,j,0);y(this,_,0);y(this,N);y(this,k);y(this,A);y(this,E,[]);y(this,T,0);y(this,b);y(this,Z);y(this,C,0);y(this,R);y(this,L);y(this,W,BigInt(1));y(this,F,new Map);et(this,"timeout");if(i=B({carryoverIntervalCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:qt,strict:!1},i),!(typeof i.intervalCap=="number"&&i.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat((t=(n=i.intervalCap)==null?void 0:n.toString())!=null?t:"","` (").concat(typeof i.intervalCap,")"));if(i.interval===void 0||!(Number.isFinite(i.interval)&&i.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat((s=(r=i.interval)==null?void 0:r.toString())!=null?s:"","` (").concat(typeof i.interval,")"));if(i.strict&&i.interval===0)throw new TypeError("The `strict` option requires a non-zero `interval`");if(i.strict&&i.intervalCap===Number.POSITIVE_INFINITY)throw new TypeError("The `strict` option requires a finite `intervalCap`");if(p(this,M,(c=(a=i.carryoverIntervalCount)!=null?a:i.carryoverConcurrencyCount)!=null?c:!1),p(this,x,i.intervalCap===Number.POSITIVE_INFINITY||i.interval===0),p(this,$,i.intervalCap),p(this,z,i.interval),p(this,A,i.strict),p(this,b,new i.queueClass),p(this,Z,i.queueClass),this.concurrency=i.concurrency,i.timeout!==void 0&&!(Number.isFinite(i.timeout)&&i.timeout>0))throw new TypeError("Expected `timeout` to be a positive finite number, got `".concat(i.timeout,"` (").concat(typeof i.timeout,")"));this.timeout=i.timeout,p(this,L,i.autoStart===!1),f(this,o,Tt).call(this)}get concurrency(){return e(this,R)}set concurrency(i){if(!(typeof i=="number"&&i>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(i,"` (").concat(typeof i,")"));p(this,R,i),f(this,o,U).call(this)}setPriority(i,n){if(typeof n!="number"||!Number.isFinite(n))throw new TypeError("Expected `priority` to be a finite number, got `".concat(n,"` (").concat(typeof n,")"));e(this,b).setPriority(i,n)}async add(i,n={}){var t;return n=mt(B({timeout:this.timeout},n),{id:(t=n.id)!=null?t:(S(this,W)._++).toString()}),new Promise((r,s)=>{const a=Symbol("task-".concat(n.id));e(this,b).enqueue(async()=>{var h,d,m;S(this,C)._++,e(this,F).set(a,{id:n.id,priority:(h=n.priority)!=null?h:0,startTime:Date.now(),timeout:n.timeout});let c;try{try{(d=n.signal)==null||d.throwIfAborted()}catch(g){throw f(this,o,Et).call(this),e(this,F).delete(a),g}p(this,_,Date.now());let v=i({signal:n.signal});if(n.timeout&&(v=$t(Promise.resolve(v),{milliseconds:n.timeout,message:"Task timed out after ".concat(n.timeout,"ms (queue has ").concat(e(this,C)," running, ").concat(e(this,b).size," waiting)")})),n.signal){const{signal:g}=n;v=Promise.race([v,new Promise((X,tt)=>{c=()=>{tt(g.reason)},g.addEventListener("abort",c,{once:!0})})])}const w=await v;r(w),this.emit("completed",w)}catch(v){s(v),this.emit("error",v)}finally{c&&((m=n.signal)==null||m.removeEventListener("abort",c)),e(this,F).delete(a),queueMicrotask(()=>{f(this,o,bt).call(this)})}},n),this.emit("add"),f(this,o,Q).call(this)})}async addAll(i,n){return Promise.all(i.map(async t=>this.add(t,n)))}start(){return e(this,L)?(p(this,L,!1),f(this,o,U).call(this),this):this}pause(){p(this,L,!0)}clear(){p(this,b,new(e(this,Z))),f(this,o,K).call(this),f(this,o,at).call(this),this.emit("empty"),e(this,C)===0&&(f(this,o,nt).call(this),this.emit("idle")),this.emit("next")}async onEmpty(){e(this,b).size!==0&&await f(this,o,q).call(this,"empty")}async onSizeLessThan(i){e(this,b).size<i||await f(this,o,q).call(this,"next",()=>e(this,b).size<i)}async onIdle(){e(this,C)===0&&e(this,b).size===0||await f(this,o,q).call(this,"idle")}async onPendingZero(){e(this,C)!==0&&await f(this,o,q).call(this,"pendingZero")}async onRateLimit(){this.isRateLimited||await f(this,o,q).call(this,"rateLimit")}async onRateLimitCleared(){this.isRateLimited&&await f(this,o,q).call(this,"rateLimitCleared")}onError(){return new Promise((i,n)=>{const t=r=>{this.off("error",t),n(r)};this.on("error",t)})}get size(){return e(this,b).size}sizeBy(i){return e(this,b).filter(i).length}get pending(){return e(this,C)}get isPaused(){return e(this,L)}get isRateLimited(){return e(this,O)}get isSaturated(){return e(this,C)===e(this,R)&&e(this,b).size>0||this.isRateLimited&&e(this,b).size>0}get runningTasks(){return[...e(this,F).values()].map(i=>B({},i))}}M=new WeakMap,x=new WeakMap,P=new WeakMap,$=new WeakMap,O=new WeakMap,V=new WeakMap,z=new WeakMap,j=new WeakMap,_=new WeakMap,N=new WeakMap,k=new WeakMap,A=new WeakMap,E=new WeakMap,T=new WeakMap,b=new WeakMap,Z=new WeakMap,C=new WeakMap,R=new WeakMap,L=new WeakMap,W=new WeakMap,F=new WeakMap,o=new WeakSet,J=function(i){for(;e(this,T)<e(this,E).length;){const n=e(this,E)[e(this,T)];if(n!==void 0&&i-n>=e(this,z))S(this,T)._++;else break}(e(this,T)>100&&e(this,T)>e(this,E).length/2||e(this,T)===e(this,E).length)&&(p(this,E,e(this,E).slice(e(this,T))),p(this,T,0))},gt=function(i){e(this,A)?e(this,E).push(i):S(this,P)._++},pt=function(){e(this,A)?e(this,E).length>e(this,T)&&e(this,E).pop():e(this,P)>0&&S(this,P)._--},G=function(){return e(this,E).length-e(this,T)},vt=function(){return e(this,x)?!0:e(this,A)?f(this,o,G).call(this)<e(this,$):e(this,P)<e(this,$)},yt=function(){return e(this,C)<e(this,R)},bt=function(){S(this,C)._--,e(this,C)===0&&this.emit("pendingZero"),f(this,o,Q).call(this),this.emit("next")},wt=function(){p(this,k,void 0),f(this,o,ht).call(this),f(this,o,ot).call(this)},Ct=function(i){if(e(this,A)){if(f(this,o,J).call(this,i),f(this,o,G).call(this)>=e(this,$)){const n=e(this,E)[e(this,T)],t=e(this,z)-(i-n);return f(this,o,H).call(this,t),!0}return!1}if(e(this,N)===void 0){const n=e(this,j)-i;if(n<0){if(e(this,_)>0){const t=i-e(this,_);if(t<e(this,z))return f(this,o,H).call(this,e(this,z)-t),!0}p(this,P,e(this,M)?e(this,C):0)}else return f(this,o,H).call(this,n),!0}return!1},H=function(i){e(this,k)===void 0&&p(this,k,setTimeout(()=>{f(this,o,wt).call(this)},i))},K=function(){e(this,N)&&(clearInterval(e(this,N)),p(this,N,void 0))},nt=function(){e(this,k)&&(clearTimeout(e(this,k)),p(this,k,void 0))},Q=function(){if(e(this,b).size===0){if(f(this,o,K).call(this),this.emit("empty"),e(this,C)===0){if(f(this,o,nt).call(this),e(this,A)&&e(this,T)>0){const n=Date.now();f(this,o,J).call(this,n)}this.emit("idle")}return!1}let i=!1;if(!e(this,L)){const n=Date.now(),t=!f(this,o,Ct).call(this,n);if(e(this,o,vt)&&e(this,o,yt)){const r=e(this,b).dequeue();e(this,x)||(f(this,o,gt).call(this,n),f(this,o,D).call(this)),this.emit("active"),r(),t&&f(this,o,ot).call(this),i=!0}}return i},ot=function(){e(this,x)||e(this,N)!==void 0||e(this,A)||(p(this,N,setInterval(()=>{f(this,o,ht).call(this)},e(this,z))),p(this,j,Date.now()+e(this,z)))},ht=function(){e(this,A)||(e(this,P)===0&&e(this,C)===0&&e(this,N)&&f(this,o,K).call(this),p(this,P,e(this,M)?e(this,C):0)),f(this,o,U).call(this),f(this,o,D).call(this)},U=function(){for(;f(this,o,Q).call(this););},q=async function(i,n){return new Promise(t=>{const r=()=>{n&&!n()||(this.off(i,r),t())};this.on(i,r)})},Tt=function(){e(this,x)||(this.on("add",()=>{e(this,b).size>0&&f(this,o,D).call(this)}),this.on("next",()=>{f(this,o,D).call(this)}))},D=function(){e(this,x)||e(this,V)||(p(this,V,!0),queueMicrotask(()=>{p(this,V,!1),f(this,o,at).call(this)}))},Et=function(){e(this,x)||(f(this,o,pt).call(this),f(this,o,D).call(this))},at=function(){const i=e(this,O);if(e(this,x)||e(this,b).size===0){i&&(p(this,O,!1),this.emit("rateLimitCleared"));return}let n;if(e(this,A)){const r=Date.now();f(this,o,J).call(this,r),n=f(this,o,G).call(this)}else n=e(this,P);const t=n>=e(this,$);t!==i&&(p(this,O,t),this.emit(t?"rateLimit":"rateLimitCleared"))};export{Mt as P,Dt as p};
//# sourceMappingURL=index-COmVzmHC.chunk.mjs.map

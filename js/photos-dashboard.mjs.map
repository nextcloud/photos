{"version":3,"file":"photos-dashboard.mjs","sources":["../src/components/Dashboard/DashboardOnThisDay.vue","../src/dashboard.ts"],"sourcesContent":["<!--\n - SPDX-FileCopyrightText: 2020 The Nextcloud Bookmarks contributors.\n - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"on-this-day-dashboard\">\n\t\t<NcLoadingIcon v-if=\"loading\" :size=\"48\" />\n\t\t<NcEmptyContent\n\t\t\tv-else-if=\"items.length === 0\"\n\t\t\t:name=\"t('photos', 'No picture for this day')\"\n\t\t\t:description=\"t('photos', 'Picture taken on this day will show up here.')\">\n\t\t\t<template #icon>\n\t\t\t\t<ImageOutlineIcon />\n\t\t\t</template>\n\t\t</NcEmptyContent>\n\t\t<template v-else>\n\t\t\t<FileComponent\n\t\t\t\tclass=\"on-this-day-dashboard__file\"\n\t\t\t\t:file=\"items[0]\"\n\t\t\t\t:allow-selection=\"false\" />\n\t\t\t<NcButton :href=\"moreUrl\">\n\t\t\t\t{{ t('photos', 'More photos from this day') }}\n\t\t\t</NcButton>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang='ts'>\nimport { t } from '@nextcloud/l10n'\nimport { generateUrl } from '@nextcloud/router'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcEmptyContent from '@nextcloud/vue/components/NcEmptyContent'\nimport NcLoadingIcon from '@nextcloud/vue/components/NcLoadingIcon'\nimport ImageOutlineIcon from 'vue-material-design-icons/ImageOutline.vue'\nimport FileComponent from '../FileComponent.vue'\nimport { allMimes } from '../../services/AllowedMimes.js'\nimport logger from '../../services/logger.js'\nimport getPhotos from '../../services/PhotoSearch.js'\n\nexport default {\n\tname: 'DashboardOnThisDay',\n\tcomponents: {\n\t\tFileComponent,\n\t\tNcButton,\n\t\tNcLoadingIcon,\n\t\tNcEmptyContent,\n\t\tImageOutlineIcon,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\titems: [],\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tmoreUrl() {\n\t\t\treturn generateUrl('/apps/photos/thisday')\n\t\t},\n\t},\n\n\tasync created() {\n\t\ttry {\n\t\t\tthis.items = await getPhotos({\n\t\t\t\tfirstResult: 0,\n\t\t\t\tnbResults: 1,\n\t\t\t\tmimesType: allMimes,\n\t\t\t\tonThisDay: true,\n\t\t\t})\n\t\t} catch (error) {\n\t\t\tlogger.error('Failed to load on this day pictures', { error })\n\t\t} finally {\n\t\t\tthis.loading = false\n\t\t}\n\t},\n\n\tmethods: {\n\t\tt,\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.on-this-day-dashboard {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\theight: 100%;\n\tgap: 16px;\n\n\t.file-container {\n\t\tflex-grow: 1;\n\t\tborder: none;\n\t}\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { translate, translatePlural } from '@nextcloud/l10n'\nimport Vue from 'vue'\nimport DashboardOnThisDay from './components/Dashboard/DashboardOnThisDay.vue'\nimport store from './store/index.js'\n\nVue.prototype.t = translate\nVue.prototype.n = translatePlural\n\nwindow.addEventListener('DOMContentLoaded', () => {\n\twindow.OCA.Dashboard.register('photos-onthisday', (el) => {\n\t\tglobal.PhotosOnThisDay = new Vue({\n\t\t\tel,\n\t\t\tstore,\n\t\t\trender: (h) => h(DashboardOnThisDay),\n\t\t})\n\t})\n})\n"],"names":["_sfc_main","FileComponent","NcButton","NcLoadingIcon","NcEmptyContent","ImageOutlineIcon","generateUrl","getPhotos","allMimes","error","logger","t","Vue","translate","translatePlural","el","global","store","h","DashboardOnThisDay"],"mappings":"ihBAuCA,MAAAA,EAAA,CACA,KAAA,qBACA,WAAA,CACA,cAAAC,EACA,SAAAC,EACA,cAAAC,EACA,eAAAC,EACA,iBAAAC,CACA,EAEA,MAAA,CACA,MAAA,CACA,QAAA,GACA,MAAA,CAAA,CACA,CACA,EAEA,SAAA,CACA,SAAA,CACA,OAAAC,EAAA,sBAAA,CAAA,CAEA,EAEA,MAAA,SAAA,CACA,GAAA,CACA,KAAA,MAAA,MAAAC,EAAA,CACA,YAAA,EACA,UAAA,EACA,UAAAC,EACA,UAAA,EAAA,CACA,QACAC,EAAA,CACAC,EAAA,MAAA,sCAAA,CAAA,MAAAD,CAAA,CAAA,CAAA,QACA,CACA,KAAA,QAAA,EAAA,CAEA,EAEA,QAAA,CACAE,EAAAA,CAAA,CAEA,6pBCtEAC,EAAI,UAAU,EAAIC,EAClBD,EAAI,UAAU,EAAIE,EAElB,OAAO,iBAAiB,mBAAoB,IAAM,CACjD,OAAO,IAAI,UAAU,SAAS,mBAAqBC,GAAO,CAClDC,EAAA,gBAAkB,IAAIJ,EAAI,CAChC,GAAAG,EAAA,MACAE,EACA,OAASC,GAAMA,EAAEC,CAAkB,CAAA,CACnC,CAAA,CACD,CACF,CAAC"}
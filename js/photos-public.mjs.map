{"version":3,"file":"photos-public.mjs","sources":["../src/PhotosAppPublic.vue","../src/public.ts"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcContent app-name=\"photos\">\n\t\t<!--\n\t\tNeeded for isPublicShare to return true\n\t\thttps://github.com/nextcloud-libraries/nextcloud-sharing/blob/15f38dfdeb2c72501008e5ae89d3eb424b83aed5/lib/publicShare.ts#L12-L20\n\t\t -->\n\t\t<input\n\t\t\tid=\"isPublic\"\n\t\t\ttype=\"hidden\"\n\t\t\tname=\"isPublic\"\n\t\t\tvalue=\"1\">\n\t\t<NcAppContent>\n\t\t\t<router-view />\n\n\t\t\t<!-- svg img loading placeholder (linked to the File component) -->\n\t\t\t<!-- eslint-disable-next-line vue/no-v-html (because it's an SVG file) -->\n\t\t\t<span class=\"hidden-visually\" role=\"none\" v-html=\"svgplaceholder\" />\n\t\t\t<!-- eslint-disable-next-line vue/no-v-html (because it's an SVG file) -->\n\t\t\t<span class=\"hidden-visually\" role=\"none\" v-html=\"imgplaceholder\" />\n\t\t\t<!-- eslint-disable-next-line vue/no-v-html (because it's an SVG file) -->\n\t\t\t<span class=\"hidden-visually\" role=\"none\" v-html=\"videoplaceholder\" />\n\t\t</NcAppContent>\n\t</NcContent>\n</template>\n\n<script lang='ts'>\nimport { generateUrl } from '@nextcloud/router'\nimport NcAppContent from '@nextcloud/vue/components/NcAppContent'\nimport NcContent from '@nextcloud/vue/components/NcContent'\nimport svgplaceholder from './assets/file-placeholder.svg'\nimport imgplaceholder from './assets/image.svg'\nimport videoplaceholder from './assets/video.svg'\nimport logger from './services/logger.js'\n\nexport default {\n\tname: 'PhotosAppPublic',\n\tcomponents: {\n\t\tNcAppContent,\n\t\tNcContent,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tsvgplaceholder,\n\t\t\timgplaceholder,\n\t\t\tvideoplaceholder,\n\t\t}\n\t},\n\n\tasync beforeMount() {\n\t\tif ('serviceWorker' in navigator) {\n\t\t\t// Use the window load event to keep the page load performant\n\t\t\twindow.addEventListener('load', async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst url = generateUrl('/apps/photos/service-worker.js', {}, { noRewrite: true })\n\t\t\t\t\tconst registration = await navigator.serviceWorker.register(url, { scope: generateUrl('/apps/photos') })\n\t\t\t\t\tlogger.debug('SW registered: ', { registration })\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlogger.error('SW registration failed: ', { error })\n\t\t\t\t}\n\t\t\t})\n\t\t} else {\n\t\t\tlogger.debug('Service Worker is not enabled on this browser.')\n\t\t}\n\t},\n\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('load', () => {\n\t\t\tnavigator.serviceWorker.register(generateUrl('/apps/photos/service-worker.js', {}, {\n\t\t\t\tnoRewrite: true,\n\t\t\t}))\n\t\t})\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.app-content {\n\tdisplay: flex;\n\tflex-grow: 1;\n\tflex-direction: column;\n\talign-content: space-between;\n}\n\n.app-navigation__photos:deep(.app-navigation-entry-icon.icon-photos) {\n\tbackground-size: 20px;\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { translate, translatePlural } from '@nextcloud/l10n'\nimport Vue from 'vue'\nimport { sync } from 'vuex-router-sync'\nimport PhotosAppPublic from './PhotosAppPublic.vue'\nimport router from './router/index.js'\nimport store from './store/index.js'\n\nsync(store, router)\n\nVue.prototype.t = translate\nVue.prototype.n = translatePlural\n\nexport default new Vue({\n\tel: '#content',\n\tname: 'PhotosRoot',\n\trouter,\n\tstore,\n\trender: (h) => h(PhotosAppPublic),\n})\n"],"names":["generateUrl","sync","store"],"mappings":";;;;;;;;AAuCA,MAAA,YAAA;AAAA,EACA,MAAA;AAAA,EACA,YAAA;AAAA,IACA;AAAA,IACA;AAAA,EACA;AAAA,EAEA,OAAA;AACA,WAAA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACA;AAAA,EACA;AAAA,EAEA,MAAA,cAAA;AACA,QAAA,mBAAA,WAAA;AAEA,aAAA,iBAAA,QAAA,YAAA;AACA,YAAA;AACA,gBAAA,MAAAA,EAAA,kCAAA,IAAA,EAAA,WAAA,MAAA;AACA,gBAAA,eAAA,MAAA,UAAA,cAAA,SAAA,KAAA,EAAA,OAAAA,EAAA,cAAA,GAAA;AACA,iBAAA,MAAA,mBAAA,EAAA,aAAA,CAAA;AAAA,iBACA,OAAA;AACA,iBAAA,MAAA,4BAAA,EAAA,MAAA,CAAA;AAAA,QAAA;AAAA,MACA,CACA;AAAA,IAAA,OACA;AACA,aAAA,MAAA,gDAAA;AAAA,IAAA;AAAA,EAEA;AAAA,EAEA,gBAAA;AACA,WAAA,oBAAA,QAAA,MAAA;AACA,gBAAA,cAAA,SAAAA,EAAA,kCAAA,CAAA,GAAA;AAAA,QACA,WAAA;AAAA,MAAA,CACA,CAAA;AAAA,IAAA,CACA;AAAA,EAAA;AAEA;;;;;;;;;;;;;;;;;AClEAC,sBAAAA,KAAKC,aAAO,MAAM;AAElB,IAAI,UAAU,IAAI;AAClB,IAAI,UAAU,IAAI;AAEH,IAAI,IAAI;AAAA,EACtB,IAAI;AAAA,EACJ,MAAM;AAAA,EACN;AAAA,EAAA,OACAA;AAAAA,EACA,QAAQ,CAAC,MAAM,EAAE,eAAe;AACjC,CAAC;"}
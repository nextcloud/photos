{"version":3,"file":"photos-public.mjs","sources":["../src/PhotosAppPublic.vue","../src/public.ts"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcContent app-name=\"photos\">\n\t\t<!--\n\t\tNeeded for isPublicShare to return true\n\t\thttps://github.com/nextcloud-libraries/nextcloud-sharing/blob/15f38dfdeb2c72501008e5ae89d3eb424b83aed5/lib/publicShare.ts#L12-L20\n\t\t -->\n\t\t<input\n\t\t\tid=\"isPublic\"\n\t\t\ttype=\"hidden\"\n\t\t\tname=\"isPublic\"\n\t\t\tvalue=\"1\">\n\t\t<NcAppContent>\n\t\t\t<router-view />\n\n\t\t\t<!-- svg img loading placeholder (linked to the File component) -->\n\t\t\t<!-- eslint-disable-next-line vue/no-v-html (because it's an SVG file) -->\n\t\t\t<span class=\"hidden-visually\" role=\"none\" v-html=\"svgplaceholder\" />\n\t\t\t<!-- eslint-disable-next-line vue/no-v-html (because it's an SVG file) -->\n\t\t\t<span class=\"hidden-visually\" role=\"none\" v-html=\"imgplaceholder\" />\n\t\t\t<!-- eslint-disable-next-line vue/no-v-html (because it's an SVG file) -->\n\t\t\t<span class=\"hidden-visually\" role=\"none\" v-html=\"videoplaceholder\" />\n\t\t</NcAppContent>\n\t</NcContent>\n</template>\n\n<script lang='ts'>\nimport { generateUrl } from '@nextcloud/router'\nimport { NcAppContent, NcContent } from '@nextcloud/vue'\nimport svgplaceholder from './assets/file-placeholder.svg'\nimport imgplaceholder from './assets/image.svg'\nimport videoplaceholder from './assets/video.svg'\nimport logger from './services/logger.js'\n\nexport default {\n\tname: 'PhotosAppPublic',\n\tcomponents: {\n\t\tNcAppContent,\n\t\tNcContent,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tsvgplaceholder,\n\t\t\timgplaceholder,\n\t\t\tvideoplaceholder,\n\t\t}\n\t},\n\n\tasync beforeMount() {\n\t\tif ('serviceWorker' in navigator) {\n\t\t\t// Use the window load event to keep the page load performant\n\t\t\twindow.addEventListener('load', async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst url = generateUrl('/apps/photos/service-worker.js', {}, { noRewrite: true })\n\t\t\t\t\tconst registration = await navigator.serviceWorker.register(url, { scope: generateUrl('/apps/photos') })\n\t\t\t\t\tlogger.debug('SW registered: ', { registration })\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlogger.error('SW registration failed: ', { error })\n\t\t\t\t}\n\t\t\t})\n\t\t} else {\n\t\t\tlogger.debug('Service Worker is not enabled on this browser.')\n\t\t}\n\t},\n\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('load', () => {\n\t\t\tnavigator.serviceWorker.register(generateUrl('/apps/photos/service-worker.js', {}, {\n\t\t\t\tnoRewrite: true,\n\t\t\t}))\n\t\t})\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.app-content {\n\tdisplay: flex;\n\tflex-grow: 1;\n\tflex-direction: column;\n\talign-content: space-between;\n}\n\n.app-navigation__photos:deep(.app-navigation-entry-icon.icon-photos) {\n\tbackground-size: 20px;\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { translate, translatePlural } from '@nextcloud/l10n'\nimport Vue from 'vue'\nimport { sync } from 'vuex-router-sync'\nimport PhotosAppPublic from './PhotosAppPublic.vue'\nimport router from './router/index.js'\nimport store from './store/index.js'\n\nsync(store, router)\n\nVue.prototype.t = translate\nVue.prototype.n = translatePlural\n\nexport default new Vue({\n\tel: '#content',\n\tname: 'PhotosRoot',\n\trouter,\n\tstore,\n\trender: (h) => h(PhotosAppPublic),\n})\n"],"names":["_sfc_main","NcAppContent","NcContent","svgplaceholder","imgplaceholder","videoplaceholder","url","generateUrl","registration","logger","error","sync","store","router","Vue","translate","translatePlural","h","PhotosAppPublic"],"mappings":"2VAsCA,MAAAA,EAAA,CACA,KAAA,kBACA,WAAA,CACA,aAAAC,EACA,UAAAC,CACA,EAEA,MAAA,CACA,MAAA,CACA,eAAAC,EACA,eAAAC,EACA,iBAAAC,CACA,CACA,EAEA,MAAA,aAAA,CACA,kBAAA,UAEA,OAAA,iBAAA,OAAA,SAAA,CACA,GAAA,CACA,MAAAC,EAAAC,EAAA,iCAAA,GAAA,CAAA,UAAA,GAAA,EACAC,EAAA,MAAA,UAAA,cAAA,SAAAF,EAAA,CAAA,MAAAC,EAAA,cAAA,EAAA,EACAE,EAAA,MAAA,kBAAA,CAAA,aAAAD,CAAA,CAAA,QACAE,EAAA,CACAD,EAAA,MAAA,2BAAA,CAAA,MAAAC,CAAA,CAAA,CAAA,CACA,CACA,EAEAD,EAAA,MAAA,gDAAA,CAEA,EAEA,eAAA,CACA,OAAA,oBAAA,OAAA,IAAA,CACA,UAAA,cAAA,SAAAF,EAAA,iCAAA,CAAA,EAAA,CACA,UAAA,EAAA,CACA,CAAA,CAAA,CACA,CAAA,CAEA,qkBCjEAI,EAAAA,KAAKC,EAAOC,CAAM,EAElBC,EAAI,UAAU,EAAIC,EAClBD,EAAI,UAAU,EAAIE,EAEH,IAAIF,EAAI,CACtB,GAAI,WACJ,KAAM,aACN,OAAAD,EAAA,MACAD,EACA,OAASK,GAAMA,EAAEC,CAAe,CACjC,CAAC"}